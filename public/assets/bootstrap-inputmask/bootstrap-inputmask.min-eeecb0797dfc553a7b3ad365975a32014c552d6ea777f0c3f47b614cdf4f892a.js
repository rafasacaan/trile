/**
* Bootstrap.js by @mdo and @fat, extended by @ArnoldDaniels.
* plugins: bootstrap-inputmask.js
* Copyright 2012 Twitter, Inc.
* http://www.apache.org/licenses/LICENSE-2.0.txt
*/
!function(t){var e=void 0!==window.orientation,s=navigator.userAgent.toLowerCase().indexOf("android")>-1,i=function(e,i){s||(this.$element=t(e),this.options=t.extend({},t.fn.inputmask.defaults,i),this.mask=String(i.mask),this.init(),this.listen(),this.checkVal())};i.prototype={init:function(){var e=this.options.definitions,s=this.mask.length;this.tests=[],this.partialPosition=this.mask.length,this.firstNonMaskPos=null,t.each(this.mask.split(""),t.proxy(function(t,i){"?"==i?(s--,this.partialPosition=t):e[i]?(this.tests.push(new RegExp(e[i])),null===this.firstNonMaskPos&&(this.firstNonMaskPos=this.tests.length-1)):this.tests.push(null)},this)),this.buffer=t.map(this.mask.split(""),t.proxy(function(t){return"?"!=t?e[t]?this.options.placeholder:t:void 0},this)),this.focusText=this.$element.val(),this.$element.data("rawMaskFn",t.proxy(function(){return t.map(this.buffer,function(t,e){return this.tests[e]&&t!=this.options.placeholder?t:null}).join("")},this))},listen:function(){if(!this.$element.attr("readonly")){var e=(navigator.userAgent.match(/msie/i)?"paste":"input")+".mask";this.$element.on("unmask",t.proxy(this.unmask,this)).on("focus.mask",t.proxy(this.focusEvent,this)).on("blur.mask",t.proxy(this.blurEvent,this)).on("keydown.mask",t.proxy(this.keydownEvent,this)).on("keypress.mask",t.proxy(this.keypressEvent,this)).on(e,t.proxy(this.pasteEvent,this))}},caret:function(t,e){if(0!==this.$element.length){if("number"==typeof t)return e="number"==typeof e?e:t,this.$element.each(function(){if(this.setSelectionRange)this.setSelectionRange(t,e);else if(this.createTextRange){var s=this.createTextRange();s.collapse(!0),s.moveEnd("character",e),s.moveStart("character",t),s.select()}});if(this.$element[0].setSelectionRange)t=this.$element[0].selectionStart,e=this.$element[0].selectionEnd;else if(document.selection&&document.selection.createRange){var s=document.selection.createRange();t=0-s.duplicate().moveStart("character",-1e5),e=t+s.text.length}return{begin:t,end:e}}},seekNext:function(t){for(var e=this.mask.length;++t<=e&&!this.tests[t];);return t},seekPrev:function(t){for(;--t>=0&&!this.tests[t];);return t},shiftL:function(t,e){var s=this.mask.length;if(!(0>t)){for(var i=t,n=this.seekNext(e);s>i;i++)if(this.tests[i]){if(!(s>n&&this.tests[i].test(this.buffer[n])))break;this.buffer[i]=this.buffer[n],this.buffer[n]=this.options.placeholder,n=this.seekNext(n)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}},shiftR:function(t){for(var e=this.mask.length,s=t,i=this.options.placeholder;e>s;s++)if(this.tests[s]){var n=this.seekNext(s),a=this.buffer[s];if(this.buffer[s]=i,!(e>n&&this.tests[n].test(a)))break;i=a}},unmask:function(){this.$element.unbind(".mask").removeData("inputmask")},focusEvent:function(){this.focusText=this.$element.val();var e=this.mask.length,s=this.checkVal();this.writeBuffer();var i=this,n=function(){s==e?i.caret(0,s):i.caret(s)};t.browser.msie?n():setTimeout(n,0)},blurEvent:function(){this.checkVal(),this.$element.val()!=this.focusText&&this.$element.trigger("change")},keydownEvent:function(t){var s=t.which;if(8==s||46==s||e&&127==s){var i=this.caret(),n=i.begin,a=i.end;return a-n===0&&(n=46!=s?this.seekPrev(n):a=this.seekNext(n-1),a=46==s?this.seekNext(a):a),this.clearBuffer(n,a),this.shiftL(n,a-1),!1}return 27==s?(this.$element.val(this.focusText),this.caret(0,this.checkVal()),!1):void 0},keypressEvent:function(t){var e=this.mask.length,s=t.which,i=this.caret();if(t.ctrlKey||t.altKey||t.metaKey||32>s)return!0;if(s){i.end-i.begin!==0&&(this.clearBuffer(i.begin,i.end),this.shiftL(i.begin,i.end-1));var n=this.seekNext(i.begin-1);if(e>n){var a=String.fromCharCode(s);if(this.tests[n].test(a)){this.shiftR(n),this.buffer[n]=a,this.writeBuffer();var h=this.seekNext(n);this.caret(h)}}return!1}},pasteEvent:function(){var t=this;setTimeout(function(){t.caret(t.checkVal(!0))},0)},clearBuffer:function(t,e){for(var s=this.mask.length,i=t;e>i&&s>i;i++)this.tests[i]&&(this.buffer[i]=this.options.placeholder)},writeBuffer:function(){return this.$element.val(this.buffer.join("")).val()},checkVal:function(t){for(var e=this.mask.length,s=this.$element.val(),i=-1,n=0,a=0;e>n;n++)if(this.tests[n]){for(this.buffer[n]=this.options.placeholder;a++<s.length;){var h=s.charAt(a-1);if(this.tests[n].test(h)){this.buffer[n]=h,i=n;break}}if(a>s.length)break}else this.buffer[n]==s.charAt(a)&&n!=this.partialPosition&&(a++,i=n);return!t&&i+1<this.partialPosition?(this.$element.val(""),this.clearBuffer(0,e)):(t||i+1>=this.partialPosition)&&(this.writeBuffer(),t||this.$element.val(this.$element.val().substring(0,i+1))),this.partialPosition?n:this.firstNonMaskPos}},t.fn.inputmask=function(e){return this.each(function(){var s=t(this),n=s.data("inputmask");n||s.data("inputmask",n=new i(this,e))})},t.fn.inputmask.defaults={mask:"",placeholder:"_",definitions:{9:"[0-9]",a:"[A-Za-z]","?":"[A-Za-z0-9]","*":"."}},t.fn.inputmask.Constructor=i,t(document).on("focus.inputmask.data-api","[data-mask]",function(e){var s=t(this);s.data("inputmask")||(e.preventDefault(),s.inputmask(s.data()))})}(window.jQuery);