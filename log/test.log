  [1m[36m (319.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (53.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (181.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (40.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150511152613"]]
  [1m[36m (18.9ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (96.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.9ms)[0m  CREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")
  [1m[36m (67.5ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_fe3eefaf0d"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150513183751"]]
  [1m[36m (16.5ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.4ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (10.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (9.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (17.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (17.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (6.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (3.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (14.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (4.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (7.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (7.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (15.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 980190962)
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:12:54', '2015-05-20 21:12:54', 298486374)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (19.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (19.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (5.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (14.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 980190962)
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:44', '2015-05-20 21:26:44', 298486374)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (4.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (4.4ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (16.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)
  [1m[36mFixture Insert (1.5ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (6.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 980190962)
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)[0m
PG::UniqueViolation: ERROR:  duplicate key value violates unique constraint "index_users_on_email"
DETAIL:  Key (email)=() already exists.
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:26:45', '2015-05-20 21:26:45', 298486374)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (4.4ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (9.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (26.5ms)[0m  ALTER TABLE "circuits" DROP CONSTRAINT "fk_rails_fe3eefaf0d"
  [1m[36m (12.9ms)[0m  [1mDROP TABLE "circuits"[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150513183751"]]
  [1m[36m (20.8ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (0.9ms)[0m  [1mDROP INDEX "index_users_on_reset_password_token"[0m
  [1m[35m (0.6ms)[0m  DROP INDEX "index_users_on_email"
  [1m[36m (2.0ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150511152613"]]
  [1m[36m (5.8ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (21.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (99.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (51.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150511152613"]]
  [1m[36m (23.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (98.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (42.0ms)[0m  CREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")
  [1m[36m (4.1ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_e04677de9e"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150513183751"]]
  [1m[36m (19.6ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (11.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (15.6ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (5.7ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (15.4ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (5.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (7.7ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (8.0ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (6.8ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (4.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (4.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-20 21:27:28', '2015-05-20 21:27:28', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
PG::NotNullViolation: ERROR:  null value in column "email" violates not-null constraint
DETAIL:  Failing row contains (980190962, , null, , null, null, null, 0, null, null, null, null, 2015-05-20 21:27:28, 2015-05-20 21:27:28).
: INSERT INTO "users" ("created_at", "updated_at", "id") VALUES ('2015-05-20 21:27:28', '2015-05-20 21:27:28', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (41.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (46.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (54.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)
  [1m[36mFixture Delete (2.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (25.5ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (16.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (6.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.2ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (13.0ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (8.0ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (3.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (6.3ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (7.9ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:17', '2015-05-22 02:22:17', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:17', '2015-05-22 02:22:17', 980190962)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (4.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (11.8ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36m (8.3ms)[0m  [1mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (9.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', NULL, '2015-05-22 02:22:18', '2015-05-22 02:22:18', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
PG::UndefinedColumn: ERROR:  column "column" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("column", "created_at", "updated_at", "...
                             ^
: INSERT INTO "users" ("column", "created_at", "updated_at", "id") VALUES ('value', '2015-05-22 02:22:18', '2015-05-22 02:22:18', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demana', '2015-05-22 02:36:34', '2015-05-22 02:36:34', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generacion', '2015-05-22 02:36:34', '2015-05-22 02:36:34', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:36:34', '2015-05-22 02:36:34', 980190962)
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:36:34', '2015-05-22 02:36:34', 298486374)[0m
  [1m[35m (19.2ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
ListinMesuresTest: test_return_list_of_all_zombies
--------------------------------------------------
Started GET "/zombies" for 127.0.0.1 at 2015-05-21 23:36:34 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 7ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demanda', '2015-05-22 02:37:16', '2015-05-22 02:37:16', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generacion', '2015-05-22 02:37:16', '2015-05-22 02:37:16', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:37:16', '2015-05-22 02:37:16', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:37:16', '2015-05-22 02:37:16', 298486374)[0m
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 5ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
ListinMesuresTest: test_return_list_of_all_zombies
--------------------------------------------------
Started GET "/zombies" for 127.0.0.1 at 2015-05-21 23:37:16 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 02:37:50', '2015-05-22 02:37:50', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 02:37:50', '2015-05-22 02:37:50', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:37:50', '2015-05-22 02:37:50', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:37:50', '2015-05-22 02:37:50', 298486374)[0m
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
ListinMesuresTest: test_return_list_of_all_zombies
--------------------------------------------------
Started GET "/zombies" for 127.0.0.1 at 2015-05-21 23:37:50 -0300
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 4ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (21.9ms)
Completed 500 Internal Server Error in 49ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 02:41:28', '2015-05-22 02:41:28', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 02:41:28', '2015-05-22 02:41:28', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:41:28', '2015-05-22 02:41:28', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:41:28', '2015-05-22 02:41:28', 298486374)[0m
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-21 23:41:28 -0300
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
Processing by WelcomeController#index as HTML
Completed 500 Internal Server Error in 5ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (7.4ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (10.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 02:50:42', '2015-05-22 02:50:42', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 02:50:42', '2015-05-22 02:50:42', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:50:42', '2015-05-22 02:50:42', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:50:42', '2015-05-22 02:50:42', 298486374)[0m
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
Processing by WelcomeController#index as HTML
Completed 401 Unauthorized in 10ms
  Rendered text template (0.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-21 23:50:42 -0300
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (7.8ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
Completed 500 Internal Server Error in 2ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Completed 500 Internal Server Error in 5ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 02:57:16', '2015-05-22 02:57:16', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 02:57:16', '2015-05-22 02:57:16', 298486374)
  [1m[36mFixture Delete (1.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 02:57:16', '2015-05-22 02:57:16', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 02:57:16', '2015-05-22 02:57:16', 298486374)[0m
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 11ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Completed 500 Internal Server Error in 9ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
Completed 500 Internal Server Error in 2ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (7.0ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
Completed 500 Internal Server Error in 1ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
Completed 500 Internal Server Error in 1ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-21 23:57:16 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 03:00:43', '2015-05-22 03:00:43', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 03:00:43', '2015-05-22 03:00:43', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 03:00:43', '2015-05-22 03:00:43', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 03:00:43', '2015-05-22 03:00:43', 298486374)[0m
  [1m[35m (10.1ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 00:00:43 -0300
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (8.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 03:02:07', '2015-05-22 03:02:07', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 03:02:07', '2015-05-22 03:02:07', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 03:02:07', '2015-05-22 03:02:07', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 03:02:07', '2015-05-22 03:02:07', 298486374)[0m
  [1m[35m (2.3ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 00:02:07 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (21.8ms)
  Rendered circuits/edit.html.erb within layouts/application (43.4ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 76ms (Views: 71.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (1.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["description", "MyText"], ["user_id", 980190962], ["created_at", "2015-05-22 03:02:07.876557"], ["updated_at", "2015-05-22 03:02:07.876557"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 10ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (9.4ms)
Completed 500 Internal Server Error in 12ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 8.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 03:11:08', '2015-05-22 03:11:08', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 03:11:08', '2015-05-22 03:11:08', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 03:11:08', '2015-05-22 03:11:08', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 03:11:08', '2015-05-22 03:11:08', 298486374)[0m
  [1m[35m (9.2ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["description", "MyText"], ["user_id", 980190962], ["created_at", "2015-05-22 03:11:08.447134"], ["updated_at", "2015-05-22 03:11:08.447134"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.5ms)
  Rendered circuits/new.html.erb within layouts/application (10.8ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 26.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.8ms)
  Rendered circuits/edit.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (8.8ms)
Completed 500 Internal Server Error in 11ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 00:11:08 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 03:12:22', '2015-05-22 03:12:22', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 03:12:22', '2015-05-22 03:12:22', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 03:12:22', '2015-05-22 03:12:22', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 03:12:22', '2015-05-22 03:12:22', 298486374)[0m
  [1m[35m (10.0ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 00:12:22 -0300
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.5ms)
  Rendered circuits/edit.html.erb within layouts/application (9.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (7.8ms)
Completed 500 Internal Server Error in 11ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["description", "MyText"], ["user_id", 980190962], ["created_at", "2015-05-22 03:12:22.741197"], ["updated_at", "2015-05-22 03:12:22.741197"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (36.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (90.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (49.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (7.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Demand', '2015-05-22 12:54:26', '2015-05-22 12:54:26', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (NULL, 'MyText', 'Generation', '2015-05-22 12:54:26', '2015-05-22 12:54:26', 298486374)
  [1m[36mFixture Delete (34.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 12:54:26', '2015-05-22 12:54:26', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 12:54:26', '2015-05-22 12:54:26', 298486374)[0m
  [1m[35m (20.3ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (15.2ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (8.6ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 136ms (Views: 113.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (49.2ms)
  Rendered circuits/edit.html.erb within layouts/application (61.4ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 89ms (Views: 85.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (31.0ms)
Completed 500 Internal Server Error in 49ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>nil}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "circuits" ("description", "user_id", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["description", "MyText"], ["user_id", 980190962], ["created_at", "2015-05-22 12:54:26.920439"], ["updated_at", "2015-05-22 12:54:26.920439"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 26ms (Views: 22.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 09:54:26 -0300
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 12:56:53', '2015-05-22 12:56:53', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 12:56:53', '2015-05-22 12:56:53', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 12:56:53', '2015-05-22 12:56:53', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 12:56:53', '2015-05-22 12:56:53', 298486374)[0m
  [1m[35m (9.3ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 09:56:53 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 26ms (Views: 18.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.6ms)
  Rendered circuits/new.html.erb within layouts/application (11.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 20ms (Views: 17.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (36.5ms)
Completed 500 Internal Server Error in 39ms
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 12:56:53.764177"], ["updated_at", "2015-05-22 12:56:53.764177"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 12:57:35', '2015-05-22 12:57:35', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 12:57:35', '2015-05-22 12:57:35', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 12:57:35', '2015-05-22 12:57:35', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 12:57:35', '2015-05-22 12:57:35', 298486374)[0m
  [1m[35m (3.0ms)[0m  COMMIT
  [1m[36m (9.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 09:57:35 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
Completed 500 Internal Server Error in 25ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.6ms)
  Rendered circuits/edit.html.erb within layouts/application (11.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 21ms (Views: 16.7ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.2ms)
Completed 500 Internal Server Error in 16ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 12:57:35.824739"], ["updated_at", "2015-05-22 12:57:35.824739"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:02:35', '2015-05-22 13:02:35', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:02:35', '2015-05-22 13:02:35', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:02:35', '2015-05-22 13:02:35', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:02:35', '2015-05-22 13:02:35', 298486374)[0m
  [1m[35m (5.6ms)[0m  COMMIT
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:02:35.672489"], ["updated_at", "2015-05-22 13:02:35.672489"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 9ms (ActiveRecord: 2.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (5.7ms)
  Rendered circuits/edit.html.erb within layouts/application (9.1ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 28.7ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.1ms)
  Rendered circuits/new.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:02:35 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
Completed 500 Internal Server Error in 10ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (1620.3ms)[0m  [1mDROP DATABASE IF EXISTS "solar_test"[0m
  [1m[35m (4165.9ms)[0m  CREATE DATABASE "solar_test" ENCODING = 'unicode'
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (177.6ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (109.9ms)[0m  [1mCREATE  INDEX  "index_circuits_on_user_id" ON "circuits" USING btree ("user_id")[0m
  [1m[35m (110.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (130.2ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (224.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (109.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (97.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (43.3ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_d7bf44846f"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (43.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_b287402688"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (94.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (119.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (31.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (32.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (43.9ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[35mActiveRecord::SchemaMigration Load (1.0ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (32.5ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:14:27', '2015-05-22 13:14:27', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:14:27', '2015-05-22 13:14:27', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:14:27', '2015-05-22 13:14:27', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:14:27', '2015-05-22 13:14:27', 298486374)
  [1m[36m (20.2ms)[0m  [1mCOMMIT[0m
  [1m[35m (31.5ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.0ms)
  Rendered circuits/new.html.erb within layouts/application (10.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:14:28.098452"], ["updated_at", "2015-05-22 13:14:28.098452"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.1ms)
  Rendered circuits/edit.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:14:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
Completed 500 Internal Server Error in 10ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (15.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:28:04', '2015-05-22 13:28:04', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:28:04', '2015-05-22 13:28:04', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:28:04', '2015-05-22 13:28:04', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:28:04', '2015-05-22 13:28:04', 298486374)[0m
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.7ms)
  Rendered circuits/new.html.erb within layouts/application (12.4ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 26.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:28:04.470509"], ["updated_at", "2015-05-22 13:28:04.470509"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/edit.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.4ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:28:04 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
Completed 500 Internal Server Error in 9ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 7.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:31:55', '2015-05-22 13:31:55', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:31:55', '2015-05-22 13:31:55', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:31:55', '2015-05-22 13:31:55', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:31:55', '2015-05-22 13:31:55', 298486374)[0m
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.8ms)
  Rendered circuits/new.html.erb within layouts/application (12.5ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 25.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.5ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (14.7ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:31:56.002521"], ["updated_at", "2015-05-22 13:31:56.002521"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (5.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 13ms (Views: 9.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/edit.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:31:56 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
Completed 500 Internal Server Error in 10ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:36:06', '2015-05-22 13:36:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:36:06', '2015-05-22 13:36:06', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:36:06', '2015-05-22 13:36:06', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:36:06', '2015-05-22 13:36:06', 298486374)[0m
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 18.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.0ms)
  Rendered circuits/edit.html.erb within layouts/application (10.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 13.7ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:36:07.125992"], ["updated_at", "2015-05-22 13:36:07.125992"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.0ms)
  Rendered circuits/new.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 8.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_user
---------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:36:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api"}
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (25.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:52:12', '2015-05-22 13:52:12', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:52:12', '2015-05-22 13:52:12', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:52:12', '2015-05-22 13:52:12', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:52:12', '2015-05-22 13:52:12', 298486374)[0m
  [1m[35m (6.1ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 18.9ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
Started GET "/measures" for 127.0.0.1 at 2015-05-22 10:52:12 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.0ms)
  Rendered circuits/edit.html.erb within layouts/application (10.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 20ms (Views: 15.7ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:52:12.876347"], ["updated_at", "2015-05-22 13:52:12.876347"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.6ms)
Completed 500 Internal Server Error in 16ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (6.5ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 13.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:53:24', '2015-05-22 13:53:24', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:53:24', '2015-05-22 13:53:24', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:53:24', '2015-05-22 13:53:24', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:53:24', '2015-05-22 13:53:24', 298486374)[0m
  [1m[35m (12.0ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.7ms)
  Rendered circuits/edit.html.erb within layouts/application (10.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 20ms (Views: 16.1ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.5ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.7ms)
  Rendered circuits/new.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:53:24.543980"], ["updated_at", "2015-05-22 13:53:24.543980"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 9ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (24.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:53:48', '2015-05-22 13:53:48', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:53:48', '2015-05-22 13:53:48', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:53:48', '2015-05-22 13:53:48', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:53:48', '2015-05-22 13:53:48', 298486374)[0m
  [1m[35m (9.8ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:53:48.861999"], ["updated_at", "2015-05-22 13:53:48.861999"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 17ms (ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.0ms)
  Rendered circuits/edit.html.erb within layouts/application (10.8ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 26.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.2ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
Started GET "/circuits/1/measures" for 127.0.0.1 at 2015-05-22 10:53:48 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
Completed 200 OK in 12ms (Views: 1.0ms | ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:57:21', '2015-05-22 13:57:21', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:57:21', '2015-05-22 13:57:21', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:57:21', '2015-05-22 13:57:21', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:57:21', '2015-05-22 13:57:21', 298486374)[0m
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (8.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
Started GET "/circuits/1/measures" for 127.0.0.1 at 2015-05-22 10:57:21 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 11ms (ActiveRecord: 3.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 9ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (6.9ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (3.4ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 32.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.7ms)
  Rendered circuits/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:57:22.118391"], ["updated_at", "2015-05-22 13:57:22.118391"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 11ms (ActiveRecord: 2.2ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (2.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 5.8ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (24.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 13:58:36', '2015-05-22 13:58:36', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 13:58:36', '2015-05-22 13:58:36', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 13:58:36', '2015-05-22 13:58:36', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 13:58:36', '2015-05-22 13:58:36', 298486374)[0m
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 21.5ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 13:58:37.066292"], ["updated_at", "2015-05-22 13:58:37.066292"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 11ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.4ms)
Completed 500 Internal Server Error in 17ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.2ms)
  Rendered circuits/edit.html.erb within layouts/application (8.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 11.8ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
Started GET "/circuits/1/measures" for 127.0.0.1 at 2015-05-22 10:58:37 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
Completed 200 OK in 14ms (Views: 1.3ms | ActiveRecord: 2.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 14:06:50', '2015-05-22 14:06:50', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 14:06:50', '2015-05-22 14:06:50', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 14:06:50', '2015-05-22 14:06:50', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 14:06:50', '2015-05-22 14:06:50', 298486374)[0m
  [1m[35m (11.5ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 24ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (6.2ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 25.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (9.1ms)
  Rendered circuits/new.html.erb within layouts/application (10.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 13.8ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/edit.html.erb within layouts/application (2.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 14:06:51.086772"], ["updated_at", "2015-05-22 14:06:51.086772"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 14:06:51.123308"], ["updated_at", "2015-05-22 14:06:51.123308"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 11:06:51 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 13ms (Views: 1.0ms | ActiveRecord: 2.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 14:11:51', '2015-05-22 14:11:51', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 14:11:51', '2015-05-22 14:11:51', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 14:11:51', '2015-05-22 14:11:51', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 14:11:51', '2015-05-22 14:11:51', 298486374)[0m
  [1m[35m (5.5ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 14:11:51.578112"], ["updated_at", "2015-05-22 14:11:51.578112"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.7ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.4ms)
  Rendered circuits/new.html.erb within layouts/application (11.7ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 27.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.9ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/edit.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 14:11:51.702383"], ["updated_at", "2015-05-22 14:11:51.702383"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 11:11:51 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 13ms (Views: 1.1ms | ActiveRecord: 2.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (28.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 14:51:53', '2015-05-22 14:51:53', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 14:51:53', '2015-05-22 14:51:53', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 14:51:53', '2015-05-22 14:51:53', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 14:51:53', '2015-05-22 14:51:53', 298486374)[0m
  [1m[35m (10.3ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.4ms)
  Rendered circuits/edit.html.erb within layouts/application (12.3ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 35ms (Views: 25.8ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.3ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 14:51:53.802257"], ["updated_at", "2015-05-22 14:51:53.802257"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 9ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 8.4ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
----------------------------------------
ListinMesuresTest: test_creates_measures
----------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 14:51:53.890926"], ["updated_at", "2015-05-22 14:51:53.890926"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 11:51:53 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 14:51:53.918494"], ["updated_at", "2015-05-22 14:51:53.918494"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 11:51:53 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (27.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:09:13', '2015-05-22 15:09:13', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:09:13', '2015-05-22 15:09:13', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:09:13', '2015-05-22 15:09:13', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:09:13', '2015-05-22 15:09:13', 298486374)[0m
  [1m[35m (12.4ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:09:13.885952"], ["updated_at", "2015-05-22 15:09:13.885952"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:09:13 -0300
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
----------------------------------------
ListinMesuresTest: test_creates_measures
----------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:09:13.910331"], ["updated_at", "2015-05-22 15:09:13.910331"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:09:13 -0300
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/edit.html.erb within layouts/application (8.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:09:13.962386"], ["updated_at", "2015-05-22 15:09:13.962386"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.2ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:13:30', '2015-05-22 15:13:30', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:13:30', '2015-05-22 15:13:30', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:13:30', '2015-05-22 15:13:30', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:13:30', '2015-05-22 15:13:30', 298486374)[0m
  [1m[35m (10.4ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:13:31.044892"], ["updated_at", "2015-05-22 15:13:31.044892"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:13:31 -0300
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (10.4ms)
Completed 500 Internal Server Error in 23ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.9ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.8ms)
  Rendered circuits/edit.html.erb within layouts/application (12.8ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 31ms (Views: 21.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:13:31.168895"], ["updated_at", "2015-05-22 15:13:31.168895"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 9ms (ActiveRecord: 2.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.7ms | ActiveRecord: 0.2ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:13:31.234607"], ["updated_at", "2015-05-22 15:13:31.234607"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:13:31 -0300
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:16:29', '2015-05-22 15:16:29', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:16:29', '2015-05-22 15:16:29', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:16:29', '2015-05-22 15:16:29', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:16:29', '2015-05-22 15:16:29', 298486374)[0m
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.7ms)
  Rendered circuits/edit.html.erb within layouts/application (12.6ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 26.2ms | ActiveRecord: 1.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:16:29.377961"], ["updated_at", "2015-05-22 15:16:29.377961"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 8ms (ActiveRecord: 1.1ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 16ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:16:29.489228"], ["updated_at", "2015-05-22 15:16:29.489228"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:16:29 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:16:29.511465"], ["updated_at", "2015-05-22 15:16:29.511465"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:16:29 -0300
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (41.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:26:27', '2015-05-22 15:26:27', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:26:27', '2015-05-22 15:26:27', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:26:27', '2015-05-22 15:26:27', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:26:27', '2015-05-22 15:26:27', 298486374)[0m
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 18.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:26:28.030858"], ["updated_at", "2015-05-22 15:26:28.030858"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:26:28 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:26:28.070598"], ["updated_at", "2015-05-22 15:26:28.070598"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.9ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.6ms)
  Rendered circuits/new.html.erb within layouts/application (9.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 21ms (Views: 17.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.0ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:26:28.186842"], ["updated_at", "2015-05-22 15:26:28.186842"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:26:28 -0300
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:27:20', '2015-05-22 15:27:20', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:27:20', '2015-05-22 15:27:20', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:27:20', '2015-05-22 15:27:20', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:27:20', '2015-05-22 15:27:20', 298486374)[0m
  [1m[35m (5.1ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:27:20.708264"], ["updated_at", "2015-05-22 15:27:20.708264"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:27:20 -0300
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:27:20.737594"], ["updated_at", "2015-05-22 15:27:20.737594"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:27:20 -0300
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 8.7ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.7ms)
  Rendered circuits/new.html.erb within layouts/application (9.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 13.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.7ms)
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:27:20.886611"], ["updated_at", "2015-05-22 15:27:20.886611"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 8ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:29:01', '2015-05-22 15:29:01', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:29:01', '2015-05-22 15:29:01', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:29:01', '2015-05-22 15:29:01', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:29:01', '2015-05-22 15:29:01', 298486374)[0m
  [1m[35m (2.6ms)[0m  COMMIT
  [1m[36m (9.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:29:01.108631"], ["updated_at", "2015-05-22 15:29:01.108631"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 25ms (Views: 22.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.1ms)
  Rendered circuits/edit.html.erb within layouts/application (8.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 11.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.1ms)
Completed 500 Internal Server Error in 13ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:29:01.252793"], ["updated_at", "2015-05-22 15:29:01.252793"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:29:01 -0300
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:29:01.272790"], ["updated_at", "2015-05-22 15:29:01.272790"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:29:01 -0300
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (12.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:29:27', '2015-05-22 15:29:27', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:29:27', '2015-05-22 15:29:27', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:29:27', '2015-05-22 15:29:27', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:29:27', '2015-05-22 15:29:27', 298486374)[0m
  [1m[35m (10.6ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:29:27.156759"], ["updated_at", "2015-05-22 15:29:27.156759"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:29:27 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:29:27.184954"], ["updated_at", "2015-05-22 15:29:27.184954"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:29:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 19ms (Views: 1.4ms | ActiveRecord: 2.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 19.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:29:27.299756"], ["updated_at", "2015-05-22 15:29:27.299756"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190965
Completed 302 Found in 14ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 9.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.4ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/edit.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:34:19', '2015-05-22 15:34:19', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:34:19', '2015-05-22 15:34:19', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:34:19', '2015-05-22 15:34:19', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:34:19', '2015-05-22 15:34:19', 298486374)[0m
  [1m[35m (4.8ms)[0m  COMMIT
  [1m[36m (10.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (10.6ms)
Completed 500 Internal Server Error in 23ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.0ms)
  Rendered circuits/edit.html.erb within layouts/application (10.3ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 26ms (Views: 20.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 5.3ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:34:19.629325"], ["updated_at", "2015-05-22 15:34:19.629325"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (1.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.7ms)
  Rendered circuits/new.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.7ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:34:19.675899"], ["updated_at", "2015-05-22 15:34:19.675899"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:34:19 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 15:34:19.715272"], ["updated_at", "2015-05-22 15:34:19.715272"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 24ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:34:19.732283"], ["updated_at", "2015-05-22 15:34:19.732283"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:34:19 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:35:43', '2015-05-22 15:35:43', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:35:43', '2015-05-22 15:35:43', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:35:43', '2015-05-22 15:35:43', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:35:43', '2015-05-22 15:35:43', 298486374)[0m
  [1m[35m (12.2ms)[0m  COMMIT
  [1m[36m (8.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:35:43.841767"], ["updated_at", "2015-05-22 15:35:43.841767"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:35:43 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 18ms (Views: 1.1ms | ActiveRecord: 1.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:35:43.932321"], ["updated_at", "2015-05-22 15:35:43.932321"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 1.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.0ms)
  Rendered circuits/new.html.erb within layouts/application (10.2ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 28ms (Views: 25.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.1ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.5ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 5.0ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:35:44.069171"], ["updated_at", "2015-05-22 15:35:44.069171"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:35:44 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-22 15:35:44.081377"], ["updated_at", "2015-05-22 15:35:44.081377"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:39:41', '2015-05-22 15:39:41', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:39:41', '2015-05-22 15:39:41', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:39:41', '2015-05-22 15:39:41', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:39:41', '2015-05-22 15:39:41', 298486374)[0m
  [1m[35m (10.1ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 25ms (Views: 17.6ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:39:41.973919"], ["updated_at", "2015-05-22 15:39:41.973919"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:39:41 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 13ms (Views: 1.1ms | ActiveRecord: 2.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:39:42.017513"], ["updated_at", "2015-05-22 15:39:42.017513"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:39:42 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 15:39:42.030096"], ["updated_at", "2015-05-22 15:39:42.030096"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 9.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:39:42.124251"], ["updated_at", "2015-05-22 15:39:42.124251"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 7ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.7ms)
  Rendered circuits/edit.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 7.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (7.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:40:47', '2015-05-22 15:40:47', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:40:47', '2015-05-22 15:40:47', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:40:47', '2015-05-22 15:40:47', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:40:47', '2015-05-22 15:40:47', 298486374)[0m
  [1m[35m (11.8ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:40:47.716793"], ["updated_at", "2015-05-22 15:40:47.716793"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 12:40:47 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 15:40:47.766143"], ["updated_at", "2015-05-22 15:40:47.766143"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 28ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 21ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.4ms)
  Rendered circuits/new.html.erb within layouts/application (12.9ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.6ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 23.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:40:47.907609"], ["updated_at", "2015-05-22 15:40:47.907609"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:40:47.934618"], ["updated_at", "2015-05-22 15:40:47.934618"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:40:47 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 8.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 15:41:57', '2015-05-22 15:41:57', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 15:41:57', '2015-05-22 15:41:57', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 15:41:57', '2015-05-22 15:41:57', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 15:41:57', '2015-05-22 15:41:57', 298486374)[0m
  [1m[35m (11.6ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 15:41:57.733747"], ["updated_at", "2015-05-22 15:41:57.733747"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 12ms (ActiveRecord: 3.0ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 10.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.1ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.1ms)
  Rendered circuits/edit.html.erb within layouts/application (9.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 21ms (Views: 14.2ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:41:57.854442"], ["updated_at", "2015-05-22 15:41:57.854442"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 12:41:57 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 15:41:57.894618"], ["updated_at", "2015-05-22 15:41:57.894618"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 23ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 15:41:57.910932"], ["updated_at", "2015-05-22 15:41:57.910932"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 12:41:57 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 2.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (84.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:00:28', '2015-05-22 16:00:28', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:00:28', '2015-05-22 16:00:28', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:00:28', '2015-05-22 16:00:28', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:00:28', '2015-05-22 16:00:28', 298486374)[0m
  [1m[35m (8.3ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:00:29.024426"], ["updated_at", "2015-05-22 16:00:29.024426"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:00:29 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mMeasure Load (0.9ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 19ms (Views: 1.3ms | ActiveRecord: 2.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 18.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (11.2ms)
  Rendered circuits/new.html.erb within layouts/application (14.3ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 21.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.3ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:00:29.212897"], ["updated_at", "2015-05-22 16:00:29.212897"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.0ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.8ms)
  Rendered circuits/edit.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 4.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:00:29.250774"], ["updated_at", "2015-05-22 16:00:29.250774"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:00:29 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-22 16:00:29.262808"], ["updated_at", "2015-05-22 16:00:29.262808"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:12:47', '2015-05-22 16:12:47', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:12:47', '2015-05-22 16:12:47', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:12:47', '2015-05-22 16:12:47', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:12:47', '2015-05-22 16:12:47', 298486374)[0m
  [1m[35m (2.4ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:12:47.455619"], ["updated_at", "2015-05-22 16:12:47.455619"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:12:47 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:12:47.504915"], ["updated_at", "2015-05-22 16:12:47.504915"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 29ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.9ms)
  Rendered circuits/new.html.erb within layouts/application (8.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 14.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.1ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:12:47.645911"], ["updated_at", "2015-05-22 16:12:47.645911"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/edit.html.erb within layouts/application (2.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 5.3ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:12:47.686504"], ["updated_at", "2015-05-22 16:12:47.686504"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:12:47 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (8.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:13:31', '2015-05-22 16:13:31', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:13:31', '2015-05-22 16:13:31', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:13:31', '2015-05-22 16:13:31', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:13:31', '2015-05-22 16:13:31', 298486374)[0m
  [1m[35m (30.6ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:13:31.919591"], ["updated_at", "2015-05-22 16:13:31.919591"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:13:31 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:13:31.968915"], ["updated_at", "2015-05-22 16:13:31.968915"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 32ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 15.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/edit.html.erb within layouts/application (2.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.6ms | ActiveRecord: 1.2ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:13:32.100461"], ["updated_at", "2015-05-22 16:13:32.100461"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:13:32.157651"], ["updated_at", "2015-05-22 16:13:32.157651"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:13:32 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 1.3ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:14:09', '2015-05-22 16:14:09', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:14:09', '2015-05-22 16:14:09', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:14:09', '2015-05-22 16:14:09', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:14:09', '2015-05-22 16:14:09', 298486374)[0m
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (9.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:14:09.631066"], ["updated_at", "2015-05-22 16:14:09.631066"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:14:09 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 19ms (Views: 1.4ms | ActiveRecord: 2.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:14:09.732532"], ["updated_at", "2015-05-22 16:14:09.732532"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:14:09 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 16:14:09.745100"], ["updated_at", "2015-05-22 16:14:09.745100"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:14:09.772093"], ["updated_at", "2015-05-22 16:14:09.772093"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 10ms (ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.7ms)
  Rendered circuits/edit.html.erb within layouts/application (7.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 5.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:15:59', '2015-05-22 16:15:59', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:15:59', '2015-05-22 16:15:59', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:15:59', '2015-05-22 16:15:59', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:15:59', '2015-05-22 16:15:59', 298486374)[0m
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:16:00.006444"], ["updated_at", "2015-05-22 16:16:00.006444"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:16:00 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:16:00.055485"], ["updated_at", "2015-05-22 16:16:00.055485"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 29ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 20.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:16:00.129367"], ["updated_at", "2015-05-22 16:16:00.129367"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.7ms)
  Rendered circuits/edit.html.erb within layouts/application (8.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.9ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:16:00.237322"], ["updated_at", "2015-05-22 16:16:00.237322"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:16:00 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:16:44', '2015-05-22 16:16:44', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:16:44', '2015-05-22 16:16:44', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:16:44', '2015-05-22 16:16:44', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:16:44', '2015-05-22 16:16:44', 298486374)[0m
  [1m[35m (4.0ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 19.0ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (5.8ms)
  Rendered circuits/edit.html.erb within layouts/application (6.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 12.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:16:44.222685"], ["updated_at", "2015-05-22 16:16:44.222685"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.8ms)
  Rendered circuits/new.html.erb within layouts/application (3.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 2.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:16:44.300730"], ["updated_at", "2015-05-22 16:16:44.300730"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:16:44 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 16:16:44.340265"], ["updated_at", "2015-05-22 16:16:44.340265"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 23ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:16:44.354990"], ["updated_at", "2015-05-22 16:16:44.354990"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:16:44 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 1.4ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (31.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:17:16', '2015-05-22 16:17:16', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:17:16', '2015-05-22 16:17:16', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:17:16', '2015-05-22 16:17:16', 980190962)
  [1m[36mFixture Insert (0.1ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:17:16', '2015-05-22 16:17:16', 298486374)[0m
  [1m[35m (10.2ms)[0m  COMMIT
  [1m[36m (10.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.7ms)
  Rendered circuits/edit.html.erb within layouts/application (11.5ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 35ms (Views: 25.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/new.html.erb within layouts/application (2.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:17:16.506712"], ["updated_at", "2015-05-22 16:17:16.506712"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 10ms (ActiveRecord: 1.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:17:16.568298"], ["updated_at", "2015-05-22 16:17:16.568298"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:17:16 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 13ms (Views: 1.1ms | ActiveRecord: 2.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:17:16.633007"], ["updated_at", "2015-05-22 16:17:16.633007"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:17:16 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-22 16:17:16.642463"], ["updated_at", "2015-05-22 16:17:16.642463"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 13ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:18:08', '2015-05-22 16:18:08', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:18:08', '2015-05-22 16:18:08', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:18:08', '2015-05-22 16:18:08', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:18:08', '2015-05-22 16:18:08', 298486374)[0m
  [1m[35m (9.6ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:18:08.831363"], ["updated_at", "2015-05-22 16:18:08.831363"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 16ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 20.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.3ms)
  Rendered circuits/edit.html.erb within layouts/application (7.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 14ms (Views: 10.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.0ms)
  Rendered circuits/new.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 8.1ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.5ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:18:08.954424"], ["updated_at", "2015-05-22 16:18:08.954424"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:18:08 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 16:18:08.995035"], ["updated_at", "2015-05-22 16:18:08.995035"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 23ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:18:09.030006"], ["updated_at", "2015-05-22 16:18:09.030006"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:18:09 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:19:09', '2015-05-22 16:19:09', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:19:09', '2015-05-22 16:19:09', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:19:09', '2015-05-22 16:19:09', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:19:09', '2015-05-22 16:19:09', 298486374)[0m
  [1m[35m (5.7ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:19:09.716283"], ["updated_at", "2015-05-22 16:19:09.716283"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:19:09 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:19:09.764292"], ["updated_at", "2015-05-22 16:19:09.764292"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 28ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:19:09.781573"], ["updated_at", "2015-05-22 16:19:09.781573"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:19:09 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 1.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:19:09.862472"], ["updated_at", "2015-05-22 16:19:09.862472"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 9ms (ActiveRecord: 2.5ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.9ms)
  Rendered circuits/edit.html.erb within layouts/application (9.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 21ms (Views: 17.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:20:38', '2015-05-22 16:20:38', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:20:38', '2015-05-22 16:20:38', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:20:38', '2015-05-22 16:20:38', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:20:38', '2015-05-22 16:20:38', 298486374)[0m
  [1m[35m (2.9ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:20:38.959041"], ["updated_at", "2015-05-22 16:20:38.959041"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:20:38 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:20:39.008914"], ["updated_at", "2015-05-22 16:20:39.008914"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 35ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:20:39.030824"], ["updated_at", "2015-05-22 16:20:39.030824"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:20:39 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 1.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:20:39.074904"], ["updated_at", "2015-05-22 16:20:39.074904"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 23ms (Views: 21.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.9ms)
  Rendered circuits/new.html.erb within layouts/application (8.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 11.6ms | ActiveRecord: 0.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.6ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 4.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:25:10', '2015-05-22 16:25:10', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:25:10', '2015-05-22 16:25:10', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:25:10', '2015-05-22 16:25:10', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:25:10', '2015-05-22 16:25:10', 298486374)[0m
  [1m[35m (8.7ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:25:10.869999"], ["updated_at", "2015-05-22 16:25:10.869999"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 21ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_sidebar.html.erb (1.5ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 20ms (Views: 16.8ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.8ms)
  Rendered circuits/new.html.erb within layouts/application (10.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:25:10.991466"], ["updated_at", "2015-05-22 16:25:10.991466"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:25:10 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 13ms (Views: 1.3ms | ActiveRecord: 2.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:25:11.061561"], ["updated_at", "2015-05-22 16:25:11.061561"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:25:11 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-22 16:25:11.072445"], ["updated_at", "2015-05-22 16:25:11.072445"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 10ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (8.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:26:28', '2015-05-22 16:26:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:26:28', '2015-05-22 16:26:28', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:26:28', '2015-05-22 16:26:28', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:26:28', '2015-05-22 16:26:28', 298486374)[0m
  [1m[35m (12.0ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.9ms)
  Rendered circuits/new.html.erb within layouts/application (12.9ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 34ms (Views: 26.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.9ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:26:28.632400"], ["updated_at", "2015-05-22 16:26:28.632400"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/edit.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:26:28.682168"], ["updated_at", "2015-05-22 16:26:28.682168"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:26:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 13ms (Views: 1.2ms | ActiveRecord: 2.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 9.2ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:26:28.744360"], ["updated_at", "2015-05-22 16:26:28.744360"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:26:28 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-22 16:26:28.752776"], ["updated_at", "2015-05-22 16:26:28.752776"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 500 Internal Server Error in 7ms
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:27:58', '2015-05-22 16:27:58', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:27:58', '2015-05-22 16:27:58', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:27:58', '2015-05-22 16:27:58', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:27:58', '2015-05-22 16:27:58', 298486374)[0m
  [1m[35m (9.8ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:27:58.316881"], ["updated_at", "2015-05-22 16:27:58.316881"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:27:58 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:27:58.365766"], ["updated_at", "2015-05-22 16:27:58.365766"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 24ms (Views: 0.5ms | ActiveRecord: 5.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:27:58.381966"], ["updated_at", "2015-05-22 16:27:58.381966"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:27:58 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 21ms (Views: 18.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.4ms)
  Rendered circuits/new.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 14.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.8ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:27:58.518062"], ["updated_at", "2015-05-22 16:27:58.518062"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.3ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (26.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:35:48', '2015-05-22 16:35:48', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:35:48', '2015-05-22 16:35:48', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:35:48', '2015-05-22 16:35:48', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:35:48', '2015-05-22 16:35:48', 298486374)[0m
  [1m[35m (10.2ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:35:48.918378"], ["updated_at", "2015-05-22 16:35:48.918378"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:35:48 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-22 16:35:48.967133"], ["updated_at", "2015-05-22 16:35:48.967133"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 24ms (Views: 0.4ms | ActiveRecord: 5.3ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 23.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:35:49.083015"], ["updated_at", "2015-05-22 16:35:49.083015"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.7ms)
Completed 500 Internal Server Error in 16ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.4ms)
  Rendered circuits/new.html.erb within layouts/application (10.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 14.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.6ms)
  Rendered circuits/edit.html.erb within layouts/application (4.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 9.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:35:49.171999"], ["updated_at", "2015-05-22 16:35:49.171999"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:35:49 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 7.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (15.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:42:20', '2015-05-22 16:42:20', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:42:20', '2015-05-22 16:42:20', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:42:20', '2015-05-22 16:42:20', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:42:20', '2015-05-22 16:42:20', 298486374)[0m
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:42:20.879085"], ["updated_at", "2015-05-22 16:42:20.879085"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.1ms)
  Rendered circuits/new.html.erb within layouts/application (10.2ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 27.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:42:20.998140"], ["updated_at", "2015-05-22 16:42:20.998140"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:42:21 -0300
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:42:21.021495"], ["updated_at", "2015-05-22 16:42:21.021495"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-22 13:42:21 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 17ms (Views: 2.4ms | ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.9ms)
  Rendered welcome/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.2ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 15.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-22 16:42:37', '2015-05-22 16:42:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-22 16:42:37', '2015-05-22 16:42:37', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-22 16:42:37', '2015-05-22 16:42:37', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-22 16:42:37', '2015-05-22 16:42:37', 298486374)[0m
  [1m[35m (4.6ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------------------------------
ListinMesuresTest: test_return_list_of_all_measures_form_current_circuit
------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:42:37.808731"], ["updated_at", "2015-05-22 16:42:37.808731"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-22 13:42:37 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 19ms (Views: 1.2ms | ActiveRecord: 2.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-22 16:42:37.862949"], ["updated_at", "2015-05-22 16:42:37.862949"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-22 13:42:37 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-22 16:42:37.875113"], ["updated_at", "2015-05-22 16:42:37.875113"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 10ms (Views: 0.3ms | ActiveRecord: 2.9ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 9ms (ActiveRecord: 1.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.7ms)
  Rendered circuits/edit.html.erb within layouts/application (12.2ms)
  Rendered layouts/_navigation_links.html.erb (0.6ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 32ms (Views: 27.5ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.1ms)
  Rendered circuits/new.html.erb within layouts/application (2.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.9ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-22 16:42:38.012153"], ["updated_at", "2015-05-22 16:42:38.012153"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.9ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (20.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (63.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (44.3ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (6.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 20:21:42', '2015-05-26 20:21:42', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 20:21:42', '2015-05-26 20:21:42', 298486374)
  [1m[36mFixture Delete (17.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 20:21:42', '2015-05-26 20:21:42', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 20:21:42', '2015-05-26 20:21:42', 298486374)[0m
  [1m[35m (17.7ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_token
--------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 19.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (21.6ms)
  Rendered circuits/new.html.erb within layouts/application (23.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 43ms (Views: 40.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (19.9ms)
Completed 500 Internal Server Error in 22ms
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (4.5ms)
  Rendered circuits/edit.html.erb within layouts/application (6.7ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 25ms (Views: 22.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (39.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 45ms (ActiveRecord: 40.5ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 20:21:43.425050"], ["updated_at", "2015-05-26 20:21:43.425050"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:21:43.442424"], ["updated_at", "2015-05-26 20:21:43.442424"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-26 17:21:43 -0300
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (72.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 20:23:37', '2015-05-26 20:23:37', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 20:23:37', '2015-05-26 20:23:37', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 20:23:37', '2015-05-26 20:23:37', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 20:23:37', '2015-05-26 20:23:37', 298486374)[0m
  [1m[35m (4.4ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (11.2ms)
  Rendered circuits/edit.html.erb within layouts/application (15.2ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 35ms (Views: 30.5ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 20:23:38.006867"], ["updated_at", "2015-05-26 20:23:38.006867"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.9ms)
Completed 500 Internal Server Error in 16ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_token
--------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:23:38.079888"], ["updated_at", "2015-05-26 20:23:38.079888"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-26 17:23:38 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.1ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 29ms (Views: 21.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (2.0ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 8.7ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 20:24:44', '2015-05-26 20:24:44', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 20:24:44', '2015-05-26 20:24:44', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 20:24:44', '2015-05-26 20:24:44', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 20:24:44', '2015-05-26 20:24:44', 298486374)[0m
  [1m[35m (6.0ms)[0m  COMMIT
  [1m[36m (8.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 20:24:44.780453"], ["updated_at", "2015-05-26 20:24:44.780453"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.5ms)
  Rendered circuits/edit.html.erb within layouts/application (10.5ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 28.3ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (6.6ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.6ms)
  Rendered circuits/new.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.3ms)
Completed 500 Internal Server Error in 16ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:24:44.913637"], ["updated_at", "2015-05-26 20:24:44.913637"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-26 17:24:44 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 3.5ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_token
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:24:44.975101"], ["updated_at", "2015-05-26 20:24:44.975101"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-26 17:24:44 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.7ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 9.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 20:31:08', '2015-05-26 20:31:08', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 20:31:08', '2015-05-26 20:31:08', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 20:31:08', '2015-05-26 20:31:08', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 20:31:08', '2015-05-26 20:31:08', 298486374)[0m
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:31:08.410106"], ["updated_at", "2015-05-26 20:31:08.410106"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-26 17:31:08 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 6.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 19ms (Views: 16.0ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_token
--------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.0ms)
  Rendered circuits/edit.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 14.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (10.9ms)
Completed 500 Internal Server Error in 13ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 20:31:08.622327"], ["updated_at", "2015-05-26 20:31:08.622327"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.7ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (25.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 20:39:43', '2015-05-26 20:39:43', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 20:39:43', '2015-05-26 20:39:43', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 20:39:43', '2015-05-26 20:39:43', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 20:39:43', '2015-05-26 20:39:43', 298486374)[0m
  [1m[35m (9.7ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (10.5ms)
Completed 500 Internal Server Error in 24ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 20:39:43.797573"], ["updated_at", "2015-05-26 20:39:43.797573"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.7ms)
  Rendered circuits/edit.html.erb within layouts/application (12.0ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 20.7ms | ActiveRecord: 0.4ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 8.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_token
--------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 20:39:43.909249"], ["updated_at", "2015-05-26 20:39:43.909249"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-26 17:39:43 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.6ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-26 21:35:16', '2015-05-26 21:35:16', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-26 21:35:16', '2015-05-26 21:35:16', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-26 21:35:16', '2015-05-26 21:35:16', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-26 21:35:16', '2015-05-26 21:35:16', 298486374)[0m
  [1m[35m (2.7ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-26 21:35:16.377069"], ["updated_at", "2015-05-26 21:35:16.377069"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-26 18:35:16 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 16.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.6ms)
  Rendered circuits/edit.html.erb within layouts/application (8.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.7ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.1ms)
  Rendered circuits/new.html.erb within layouts/application (2.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.8ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.1ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.7ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-26 21:35:16.658300"], ["updated_at", "2015-05-26 21:35:16.658300"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (22.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (89.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (35.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (8.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 13:32:45', '2015-05-27 13:32:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 13:32:45', '2015-05-27 13:32:45', 298486374)
  [1m[36mFixture Delete (13.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 13:32:45', '2015-05-27 13:32:45', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 13:32:45', '2015-05-27 13:32:45', 298486374)[0m
  [1m[35m (16.2ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 13:32:45.896723"], ["updated_at", "2015-05-27 13:32:45.896723"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 43ms (ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (14.4ms)
  Rendered circuits/edit.html.erb within layouts/application (33.5ms)
  Rendered layouts/_navigation_links.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (17.5ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 204ms (Views: 197.8ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (33.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 40ms (ActiveRecord: 33.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 16.1ms | ActiveRecord: 0.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (42.0ms)
Completed 500 Internal Server Error in 57ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 20ms (Views: 17.4ms | ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (22.1ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 31ms (Views: 29.4ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 13:32:46.439849"], ["updated_at", "2015-05-27 13:32:46.439849"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 10:32:46 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 36ms (Views: 12.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (27.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 13:40:06', '2015-05-27 13:40:06', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 13:40:06', '2015-05-27 13:40:06', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 13:40:06', '2015-05-27 13:40:06', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 13:40:06', '2015-05-27 13:40:06', 298486374)[0m
  [1m[35m (10.7ms)[0m  COMMIT
  [1m[36m (8.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.4ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 13:40:06.177950"], ["updated_at", "2015-05-27 13:40:06.177950"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 10:40:06 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.3ms)
  Rendered circuits/edit.html.erb within layouts/application (8.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.8ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 13:40:06.325474"], ["updated_at", "2015-05-27 13:40:06.325474"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 13:47:45', '2015-05-27 13:47:45', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 13:47:45', '2015-05-27 13:47:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 13:47:45', '2015-05-27 13:47:45', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 13:47:45', '2015-05-27 13:47:45', 298486374)[0m
  [1m[35m (3.7ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 13:47:45.790946"], ["updated_at", "2015-05-27 13:47:45.790946"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 10:47:45 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 6.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 19ms (Views: 16.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 3.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.8ms)
  Rendered circuits/edit.html.erb within layouts/application (9.1ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 15.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.8ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 13:47:45.998867"], ["updated_at", "2015-05-27 13:47:45.998867"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 13:51:51', '2015-05-27 13:51:51', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 13:51:51', '2015-05-27 13:51:51', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 13:51:51', '2015-05-27 13:51:51', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 13:51:51', '2015-05-27 13:51:51', 298486374)[0m
  [1m[35m (10.2ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (1.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.7ms)
Completed 500 Internal Server Error in 27ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.8ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 18ms (Views: 14.5ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (10.2ms)
  Rendered circuits/new.html.erb within layouts/application (11.9ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 14.9ms | ActiveRecord: 0.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/edit.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.5ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 13:51:51.505729"], ["updated_at", "2015-05-27 13:51:51.505729"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 13:51:51.516144"], ["updated_at", "2015-05-27 13:51:51.516144"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 10:51:51 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.4ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 14:55:46', '2015-05-27 14:55:46', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 14:55:46', '2015-05-27 14:55:46', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 14:55:46', '2015-05-27 14:55:46', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 14:55:46', '2015-05-27 14:55:46', 298486374)[0m
  [1m[35m (8.5ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 14:55:46.428304"], ["updated_at", "2015-05-27 14:55:46.428304"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 11:55:46 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 19ms (Views: 16.1ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/edit.html.erb within layouts/application (8.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.3ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 14:55:46.648306"], ["updated_at", "2015-05-27 14:55:46.648306"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.6ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.4ms)
Completed 500 Internal Server Error in 15ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (12.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 14:56:37', '2015-05-27 14:56:37', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 14:56:37', '2015-05-27 14:56:37', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 14:56:37', '2015-05-27 14:56:37', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 14:56:37', '2015-05-27 14:56:37', 298486374)[0m
  [1m[35m (3.1ms)[0m  COMMIT
  [1m[36m (10.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 10ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.6ms)
Completed 500 Internal Server Error in 23ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 14:56:37.631768"], ["updated_at", "2015-05-27 14:56:37.631768"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/edit.html.erb within layouts/application (11.0ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 20.4ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 14:56:37.703597"], ["updated_at", "2015-05-27 14:56:37.703597"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 11:56:37 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.5ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (26.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 15:16:19', '2015-05-27 15:16:19', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 15:16:19', '2015-05-27 15:16:19', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 15:16:19', '2015-05-27 15:16:19', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 15:16:19', '2015-05-27 15:16:19', 298486374)[0m
  [1m[35m (6.3ms)[0m  COMMIT
  [1m[36m (86.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 9.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 15:16:19.813132"], ["updated_at", "2015-05-27 15:16:19.813132"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (13.6ms)
Completed 500 Internal Server Error in 17ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.0ms)
  Rendered circuits/edit.html.erb within layouts/application (9.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.6ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/new.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 4.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 15:16:19.948879"], ["updated_at", "2015-05-27 15:16:19.948879"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 12:16:19 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 15:21:10', '2015-05-27 15:21:10', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 15:21:10', '2015-05-27 15:21:10', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 15:21:10', '2015-05-27 15:21:10', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 15:21:10', '2015-05-27 15:21:10', 298486374)[0m
  [1m[35m (3.5ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 15:21:11.007815"], ["updated_at", "2015-05-27 15:21:11.007815"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 12:21:11 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 6.2ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 15:21:11.097305"], ["updated_at", "2015-05-27 15:21:11.097305"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.7ms)
  Rendered circuits/new.html.erb within layouts/application (11.8ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 28ms (Views: 24.8ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.4ms)
Completed 500 Internal Server Error in 13ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 6.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 15:22:09', '2015-05-27 15:22:09', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 15:22:09', '2015-05-27 15:22:09', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 15:22:09', '2015-05-27 15:22:09', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 15:22:09', '2015-05-27 15:22:09', 298486374)[0m
  [1m[35m (8.7ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 26ms (Views: 19.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 15:22:09.411748"], ["updated_at", "2015-05-27 15:22:09.411748"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 12:22:09 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.9ms)
  Rendered circuits/edit.html.erb within layouts/application (8.1ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 22ms (Views: 14.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 15:22:09.572051"], ["updated_at", "2015-05-27 15:22:09.572051"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.8ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.8ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (7.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 15:24:42', '2015-05-27 15:24:42', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 15:24:42', '2015-05-27 15:24:42', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 15:24:43', '2015-05-27 15:24:43', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 15:24:43', '2015-05-27 15:24:43', 298486374)[0m
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (10.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 15:24:43.069997"], ["updated_at", "2015-05-27 15:24:43.069997"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 12:24:43 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 16.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.6ms)
  Rendered circuits/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 15.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (14.7ms)
Completed 500 Internal Server Error in 18ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.5ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 15:24:43.270255"], ["updated_at", "2015-05-27 15:24:43.270255"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.3ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$C5VPkNfoFv3THSUpduOeh./Sx.ZGRhFGCSlfuwMq4mYjcwVValBCK"], ["created_at", "2015-05-27 15:24:43.306946"], ["updated_at", "2015-05-27 15:24:43.306946"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$tN8lhJfZvbZAClu3TwdQxOinA/Csw5ERAwf8J/uULVo3Ii7jb24wG"], ["created_at", "2015-05-27 15:24:43.324074"], ["updated_at", "2015-05-27 15:24:43.324074"]]
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$yHQWbPclczumkgeuaEtQIOHrxrcrvhWyIDgtbiQp7gSM5tlKL.3B2"], ["created_at", "2015-05-27 15:24:43.343313"], ["updated_at", "2015-05-27 15:24:43.343313"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$6943TLp31.Z6VAM/OblJJOhT6qTdBpoBgzpyw.nreCcLKcAzjGT3a"], ["created_at", "2015-05-27 15:24:43.360814"], ["updated_at", "2015-05-27 15:24:43.360814"]]
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 15:35:29', '2015-05-27 15:35:29', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 15:35:29', '2015-05-27 15:35:29', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2015-05-27 15:35:29', '2015-05-27 15:35:29', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2015-05-27 15:35:29', '2015-05-27 15:35:29', 298486374)[0m
  [1m[35m (3.3ms)[0m  COMMIT
  [1m[36m (10.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 15:35:29.341241"], ["updated_at", "2015-05-27 15:35:29.341241"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 12:35:29 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.3ms)
Completed 500 Internal Server Error in 16ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 15:35:29.428498"], ["updated_at", "2015-05-27 15:35:29.428498"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.5ms)
  Rendered circuits/new.html.erb within layouts/application (10.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 14.2ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 10.1ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.7ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 4.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 3.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '1bd9c48b3bee46f82fe962ca9517d9bf', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '1bd9c48b3bee46f82fe962ca9517d9bf', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (14.1ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (7.7ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '3a3c7a54d61e601e3a31a62bba0bc904', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '3a3c7a54d61e601e3a31a62bba0bc904', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (16.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '1855ff138a8a86218ec2dd1063d0c61d', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '1855ff138a8a86218ec2dd1063d0c61d', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.9ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '3716d64afbbc7a51a5e9c495a2f82852', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '3716d64afbbc7a51a5e9c495a2f82852', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (10.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2f500ce8070ed6b31540baca5779df55', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2f500ce8070ed6b31540baca5779df55', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (2.5ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '4e80b20d0b1830171a1733abcf8bcef6', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '4e80b20d0b1830171a1733abcf8bcef6', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'e605451a87273dd64272d308d4943207', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'e605451a87273dd64272d308d4943207', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '658ff63230b68efd60aaef51029aab87', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '658ff63230b68efd60aaef51029aab87', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (6.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'f81b84d244e835f88235736ca202d232', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'f81b84d244e835f88235736ca202d232', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.9ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (12.3ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (8.7ms)[0m  [1mCOMMIT[0m
  [1m[35m (7.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'df83cee153bb312acf31775bc86dd3e1', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', 'df83cee153bb312acf31775bc86dd3e1', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.3ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (7.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '9bd0d154b2f37fa55bf0e231b74587f2', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '9bd0d154b2f37fa55bf0e231b74587f2', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.2ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (7.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '98e2c69bcf9c47702c6c081e16023394', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '98e2c69bcf9c47702c6c081e16023394', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (5.0ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (5.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '146b7d7b1d7942f4b9afcf8a7d6a55ee', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '146b7d7b1d7942f4b9afcf8a7d6a55ee', '2015-05-27 16:17:45', '2015-05-27 16:17:45', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (24.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (4.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (4.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (4.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (9.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (5.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (6.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (4.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (4.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (6.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (6.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (13.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (10.1ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (13.8ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (5.1ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (4.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (5.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (6.1ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (28.0ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (21.6ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (8.4ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (22.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.2ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (9.6ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (22.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (11.3ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (8.4ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (19.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.3ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (7.2ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (7.3ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (17.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (6.4ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (6.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.2ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:41', '2015-05-27 16:22:41', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (17.4ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (6.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (4.7ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (7.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (16.1ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (4.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.3ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:22:42', '2015-05-27 16:22:42', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (5.3ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (7.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (1.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (12.7ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (4.1ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (18.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (13.5ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (8.5ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (7.5ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (8.4ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (3.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (5.4ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (7.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (5.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (5.8ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36m (6.9ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.3ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (6.2ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (5.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (4.9ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (5.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (6.0ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 298486374)[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "users"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "auth_token" of relation "users" does not exist
LINE 1: INSERT INTO "users" ("name", "email", "auth_token", "created...
                                              ^
: INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:27:02', '2015-05-27 16:27:02', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (7.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users"
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (9.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (68.4ms)[0m  ALTER TABLE "measures" DROP CONSTRAINT "fk_rails_b287402688"
  [1m[36m (16.6ms)[0m  [1mDROP TABLE "measures"[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150522130847"]]
  [1m[36m (11.7ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (7.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "circuits" DROP CONSTRAINT "fk_rails_d7bf44846f"
  [1m[36m (2.6ms)[0m  [1mDROP TABLE "circuits"[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150513183751"]]
  [1m[36m (20.1ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mDROP INDEX "index_users_on_reset_password_token"[0m
  [1m[35m (0.5ms)[0m  DROP INDEX "index_users_on_email"
  [1m[36m (29.7ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150511152613"]]
  [1m[36m (13.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (18.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (255.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (38.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (39.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150511152613"]]
  [1m[36m (19.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (82.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.1ms)[0m  CREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")
  [1m[36m (21.4ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_cdfc653008"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150513183751"]]
  [1m[36m (9.9ms)[0m  [1mCOMMIT[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (38.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (42.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures"  ("circuit_id")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_d93a10bffd"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150522130847"]]
  [1m[36m (14.1ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.7ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (2.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 16:55:36', '2015-05-27 16:55:36', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 16:55:36', '2015-05-27 16:55:36', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 16:55:36', '2015-05-27 16:55:36', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 16:55:36', '2015-05-27 16:55:36', 298486374)[0m
  [1m[35m (5.4ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "74a1b712c65686651b7cd6abb5fe4a69"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$dmx58gwmZDSoY3VgP20/puJph5jVU5vgrIqYUzN8srl5ENck5eSq6"], ["created_at", "2015-05-27 16:55:36.992454"], ["updated_at", "2015-05-27 16:55:36.992454"], ["auth_token", "74a1b712c65686651b7cd6abb5fe4a69"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 16:55:37.011813"], ["updated_at", "2015-05-27 16:55:37.011813"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 13:55:37 -0300
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "29ea58c771bb75c3d16ec27e0d87ee57"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$WcCpq.SpdivIqnsLfs4j2u.NmdkmY5y2sbiZwSVp77AM4BriZCVF."], ["created_at", "2015-05-27 16:55:37.050890"], ["updated_at", "2015-05-27 16:55:37.050890"], ["auth_token", "29ea58c771bb75c3d16ec27e0d87ee57"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/measures" for 127.0.0.1 at 2015-05-27 13:55:37 -0300
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "3262240d785598c5df87b6a7e866eb99"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ZTgFz4aat/unZgc569hFU..TZsDGAa5GQgLoneJood2Z2WKMovs42"], ["created_at", "2015-05-27 16:55:37.073157"], ["updated_at", "2015-05-27 16:55:37.073157"], ["auth_token", "3262240d785598c5df87b6a7e866eb99"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/measures" for 127.0.0.1 at 2015-05-27 13:55:37 -0300
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2c932d9e2a8036720ef8d6000f54ef2a"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$MgzyTEo6wZaHE8zEW79V.uP4O2.sVsp7hV4EMLgE6z8wzJbCbRMim"], ["created_at", "2015-05-27 16:55:37.093595"], ["updated_at", "2015-05-27 16:55:37.093595"], ["auth_token", "2c932d9e2a8036720ef8d6000f54ef2a"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/measures" for 127.0.0.1 at 2015-05-27 13:55:37 -0300
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 20.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 16:55:37.182457"], ["updated_at", "2015-05-27 16:55:37.182457"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.6ms)
  Rendered circuits/new.html.erb within layouts/application (8.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 14.2ms | ActiveRecord: 0.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.3ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 16:55:37.284763"], ["updated_at", "2015-05-27 16:55:37.284763"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 13:55:37 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 3.2ms | ActiveRecord: 0.0ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:06:59', '2015-05-27 17:06:59', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:06:59', '2015-05-27 17:06:59', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:06:59', '2015-05-27 17:06:59', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:06:59', '2015-05-27 17:06:59', 298486374)[0m
  [1m[35m (11.8ms)[0m  COMMIT
  [1m[36m (8.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3ed7633f4624bf89a8d39a45f465e290"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$mLAL4jakq46tW2IKmHY4KODzwCEJT2dKNTTqB/l0h0RP1uLY42b4i"], ["created_at", "2015-05-27 17:06:59.660861"], ["updated_at", "2015-05-27 17:06:59.660861"], ["auth_token", "3ed7633f4624bf89a8d39a45f465e290"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:06:59 -0300
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "0255e5de71ab0c7828652d9a6560e511"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$G/wujSiMONdvtSdg/aLmSO6hkTH4mY34WRQIMjvgpbQFPlGdIMAai"], ["created_at", "2015-05-27 17:06:59.701451"], ["updated_at", "2015-05-27 17:06:59.701451"], ["auth_token", "0255e5de71ab0c7828652d9a6560e511"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:06:59 -0300
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d96861063ae8197da953fe665c7071dd"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ELC8X7OkRVfjfkAXe7iMI.dgDqN3Au9ifPAmGZJOXnOtp2BNzqJJC"], ["created_at", "2015-05-27 17:06:59.725244"], ["updated_at", "2015-05-27 17:06:59.725244"], ["auth_token", "d96861063ae8197da953fe665c7071dd"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:06:59 -0300
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "68aebd54567337c1f4655cd9885e0ccd"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$WdPc7uYNFtT9moQ8GaGTIOX.7aNhUxD7U//BPuN5rD9VlFnXgMpuC"], ["created_at", "2015-05-27 17:06:59.744061"], ["updated_at", "2015-05-27 17:06:59.744061"], ["auth_token", "68aebd54567337c1f4655cd9885e0ccd"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:06:59.755921"], ["updated_at", "2015-05-27 17:06:59.755921"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:06:59 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 23ms (Views: 18.8ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:06:59.871821"], ["updated_at", "2015-05-27 17:06:59.871821"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 8ms (ActiveRecord: 2.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (1.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 3.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (18.2ms)
  Rendered circuits/edit.html.erb within layouts/application (19.4ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 26ms (Views: 22.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/new.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 5.0ms | ActiveRecord: 0.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 8ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (9.5ms)
Completed 500 Internal Server Error in 11ms
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:06:59.976189"], ["updated_at", "2015-05-27 17:06:59.976189"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:06:59 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 8.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (15.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:09:07', '2015-05-27 17:09:07', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:09:07', '2015-05-27 17:09:07', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:09:07', '2015-05-27 17:09:07', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:09:07', '2015-05-27 17:09:07', 298486374)[0m
  [1m[35m (9.3ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:09:07.078073"], ["updated_at", "2015-05-27 17:09:07.078073"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:09:07 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 16.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f8a14039c308afbb05d7872699de495"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$UMgQHpKfa9vq0x/U5zMgme9XLBpAFRRmXWVmKdvaXthkNWvccqJwW"], ["created_at", "2015-05-27 17:09:07.195389"], ["updated_at", "2015-05-27 17:09:07.195389"], ["auth_token", "6f8a14039c308afbb05d7872699de495"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:09:07.201936"], ["updated_at", "2015-05-27 17:09:07.201936"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:09:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.5ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "15a2dd2282d368ff1a00b4fe286caf84"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$kt0g9nodXKCgXMl.6zI9y.zv/pdwympSoLta6Kzbx/90tQuUz54a6"], ["created_at", "2015-05-27 17:09:07.227718"], ["updated_at", "2015-05-27 17:09:07.227718"], ["auth_token", "15a2dd2282d368ff1a00b4fe286caf84"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:09:07 -0300
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3456c88f533a2c77a7eae7da45e97d30"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$4O3FXcyOjMvrLg.1.QYJpueHWcINqgDCove9kfhDHaM5xvMnXquUW"], ["created_at", "2015-05-27 17:09:07.252592"], ["updated_at", "2015-05-27 17:09:07.252592"], ["auth_token", "3456c88f533a2c77a7eae7da45e97d30"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:09:07.257167"], ["updated_at", "2015-05-27 17:09:07.257167"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:09:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3456c88f533a2c77a7eae7da45e97d30"]]
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 7ms (Views: 1.0ms | ActiveRecord: 3.1ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "24674eb607e8aa9f710cc80ef6e1c371"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$4Xnkcwl5.ABYi0oiwlYAQ..TOf/wl0dzoxU4sT5Z4fb6di3jm1YtC"], ["created_at", "2015-05-27 17:09:07.286296"], ["updated_at", "2015-05-27 17:09:07.286296"], ["auth_token", "24674eb607e8aa9f710cc80ef6e1c371"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:09:07 -0300
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:09:07.326499"], ["updated_at", "2015-05-27 17:09:07.326499"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190966
Completed 302 Found in 18ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/edit.html.erb within layouts/application (9.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 15.2ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.0ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.1ms)
Completed 500 Internal Server Error in 13ms
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:10:27', '2015-05-27 17:10:27', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:10:27', '2015-05-27 17:10:27', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:10:27', '2015-05-27 17:10:27', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:10:27', '2015-05-27 17:10:27', 298486374)[0m
  [1m[35m (7.4ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8633cbf486d34bab122b0fe3314052f3"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$kOGCdqeGym6Y3bFVTKhPG.TV9voDQghgEG2ffTfOagGXbcFWAuh76"], ["created_at", "2015-05-27 17:10:27.344519"], ["updated_at", "2015-05-27 17:10:27.344519"], ["auth_token", "8633cbf486d34bab122b0fe3314052f3"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:10:27.374426"], ["updated_at", "2015-05-27 17:10:27.374426"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:10:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8633cbf486d34bab122b0fe3314052f3\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 22ms (Views: 7.2ms | ActiveRecord: 0.7ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "1dc5780605f7ed70be70e8a54969d085"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$fju.2d06EAYu2/DZtyXA1.xfJcKnN.tSmpk1QcKQIhP./mRN8l5bS"], ["created_at", "2015-05-27 17:10:27.447726"], ["updated_at", "2015-05-27 17:10:27.447726"], ["auth_token", "1dc5780605f7ed70be70e8a54969d085"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:10:27.452594"], ["updated_at", "2015-05-27 17:10:27.452594"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:10:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c34a99c2c97f28997fde88be5f38e8a0"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$suRtR9NjWapCGPBoguE.R.Hr1bV672jujbxw/EZkKo/1STEo39zUW"], ["created_at", "2015-05-27 17:10:27.475303"], ["updated_at", "2015-05-27 17:10:27.475303"], ["auth_token", "c34a99c2c97f28997fde88be5f38e8a0"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:10:27.479184"], ["updated_at", "2015-05-27 17:10:27.479184"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:10:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c34a99c2c97f28997fde88be5f38e8a0"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 1.9ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "9a3bae9c4bade751b52c55c454948bd7"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$2EfqZJ04ljFwyZPLDOgf5urUoLC9CArgOf2KRv21aFrtToho3LyrC"], ["created_at", "2015-05-27 17:10:27.505145"], ["updated_at", "2015-05-27 17:10:27.505145"], ["auth_token", "9a3bae9c4bade751b52c55c454948bd7"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/measures" for 127.0.0.1 at 2015-05-27 14:10:27 -0300
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 16.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:10:27.556368"], ["updated_at", "2015-05-27 17:10:27.556368"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:10:27 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190966}, "subdomain"=>"api", "circuit_id"=>"980190966"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.4ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 16ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 8.9ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.3ms)
  Rendered circuits/new.html.erb within layouts/application (10.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 13.3ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/edit.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:10:27.668655"], ["updated_at", "2015-05-27 17:10:27.668655"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190967
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.0ms)
Completed 500 Internal Server Error in 13ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:11:40', '2015-05-27 17:11:40', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:11:40', '2015-05-27 17:11:40', 298486374)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:11:40', '2015-05-27 17:11:40', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:11:40', '2015-05-27 17:11:40', 298486374)[0m
  [1m[35m (8.8ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:11:40.784798"], ["updated_at", "2015-05-27 17:11:40.784798"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:11:40 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.8ms | ActiveRecord: 0.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "0c12d898ef3d426bc674f7bfc61fe1c0"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$kee71wv/hWNJD4VfGB6sT.NxHGl2JS/J9OW6JaeGlKSg5mG80qQi."], ["created_at", "2015-05-27 17:11:40.859834"], ["updated_at", "2015-05-27 17:11:40.859834"], ["auth_token", "0c12d898ef3d426bc674f7bfc61fe1c0"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:11:40.870386"], ["updated_at", "2015-05-27 17:11:40.870386"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "2569875925996f9bd508e91301c8a1ce"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Pt88WpDrABajb9G78G45bud/4Ancsb9nu8lJGD2TSDu9i9GjuG7Ny"], ["created_at", "2015-05-27 17:11:40.895456"], ["updated_at", "2015-05-27 17:11:40.895456"], ["auth_token", "2569875925996f9bd508e91301c8a1ce"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:11:40.901731"], ["updated_at", "2015-05-27 17:11:40.901731"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:11:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "2569875925996f9bd508e91301c8a1ce"]]
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 3.3ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "de897252c6ff569de0837b62b9248c9e"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$vPtEUQnzCBIezx43Ii8CqOeq.dHulwTh9weZOvp7EyjsVlcBSUrRy"], ["created_at", "2015-05-27 17:11:40.935368"], ["updated_at", "2015-05-27 17:11:40.935368"], ["auth_token", "de897252c6ff569de0837b62b9248c9e"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:11:40.941931"], ["updated_at", "2015-05-27 17:11:40.941931"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:11:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "125bf2a6175c780b9ffe7d170513e3d0"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$hGkGa8d6JoF8YKzJgacFG..k4aw5IeJ81lM5rJFwbYTdt8XPQfC7u"], ["created_at", "2015-05-27 17:11:40.962687"], ["updated_at", "2015-05-27 17:11:40.962687"], ["auth_token", "125bf2a6175c780b9ffe7d170513e3d0"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:11:40.967203"], ["updated_at", "2015-05-27 17:11:40.967203"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:11:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "125bf2a6175c780b9ffe7d170513e3d0\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 20ms (Views: 17.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 21ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 8.8ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:11:41.080972"], ["updated_at", "2015-05-27 17:11:41.080972"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.8ms)
  Rendered circuits/edit.html.erb within layouts/application (10.5ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 14.2ms | ActiveRecord: 0.5ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.9ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:15:27', '2015-05-27 17:15:27', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:15:27', '2015-05-27 17:15:27', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:15:27', '2015-05-27 17:15:27', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:15:27', '2015-05-27 17:15:27', 298486374)[0m
  [1m[35m (9.0ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:15:27.950324"], ["updated_at", "2015-05-27 17:15:27.950324"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 22ms (ActiveRecord: 2.4ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.6ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.6ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.4ms)
  Rendered circuits/new.html.erb within layouts/application (10.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 13.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/edit.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (2.3ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 8.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (22.6ms)
Completed 500 Internal Server Error in 25ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "40b369c6852fe974334d671c9276109a"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Q.qcbRS2x3HZwoXCqjY.j.K9Ps0Bexo0e56esoJ/5lPqiTqMSwJc6"], ["created_at", "2015-05-27 17:15:28.098242"], ["updated_at", "2015-05-27 17:15:28.098242"], ["auth_token", "40b369c6852fe974334d671c9276109a"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:15:28.106023"], ["updated_at", "2015-05-27 17:15:28.106023"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:15:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "40b369c6852fe974334d671c9276109a\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 13ms (Views: 3.3ms | ActiveRecord: 0.6ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "9dc59f0cb4501d0be8b5e5da20a5635e"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$zfdV.kshlhMQQ385WltQx.yweyjk76UUVfQW8DJXGaCEYHhGyhiu."], ["created_at", "2015-05-27 17:15:28.166063"], ["updated_at", "2015-05-27 17:15:28.166063"], ["auth_token", "9dc59f0cb4501d0be8b5e5da20a5635e"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:15:28.171436"], ["updated_at", "2015-05-27 17:15:28.171436"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:15:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "87e95d5c4d8e06cdfba5053fa040f0fc"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ODGHjj5ZiGCcbt9vYnwCsODZnhi7Rjgq8yS.FjCaKPPm0e0SaFJG2"], ["created_at", "2015-05-27 17:15:28.199542"], ["updated_at", "2015-05-27 17:15:28.199542"], ["auth_token", "87e95d5c4d8e06cdfba5053fa040f0fc"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:15:28.204884"], ["updated_at", "2015-05-27 17:15:28.204884"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:15:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "87e95d5c4d8e06cdfba5053fa040f0fc"]]
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 8ms (Views: 1.7ms | ActiveRecord: 2.6ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "efe5b3e04c09f4bb7a54ad0781a81fae"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jJ55LPERwGRvHemu9VO3UOQf7yPyrPn9QC2fbHm8XLfIyzEM0afi6"], ["created_at", "2015-05-27 17:15:28.236740"], ["updated_at", "2015-05-27 17:15:28.236740"], ["auth_token", "efe5b3e04c09f4bb7a54ad0781a81fae"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:15:28.241139"], ["updated_at", "2015-05-27 17:15:28.241139"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:15:28 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "efe5b3e04c09f4bb7a54ad0781a81fae"]]
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 1.2ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:15:28.260195"], ["updated_at", "2015-05-27 17:15:28.260195"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190968/measures" for 127.0.0.1 at 2015-05-27 14:15:28 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190968}, "subdomain"=>"api", "circuit_id"=>"980190968"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.9ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:25:25', '2015-05-27 17:25:25', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:25:25', '2015-05-27 17:25:25', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:25:25', '2015-05-27 17:25:25', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:25:25', '2015-05-27 17:25:25', 298486374)[0m
  [1m[35m (8.0ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:25:25.791890"], ["updated_at", "2015-05-27 17:25:25.791890"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:25:25 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 18ms (Views: 5.9ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5688584d4048881ee51ff2ed0ef07a67"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$LSbYEhrtItu0cGsngZCNMuItLkJ/0MJKlS1xxetqtAKEaivv/CESe"], ["created_at", "2015-05-27 17:25:25.868721"], ["updated_at", "2015-05-27 17:25:25.868721"], ["auth_token", "5688584d4048881ee51ff2ed0ef07a67"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:25:25.878251"], ["updated_at", "2015-05-27 17:25:25.878251"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:25:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5688584d4048881ee51ff2ed0ef07a67\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.4ms | ActiveRecord: 0.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e2779e53ccff2655bdb0b64d737ea6fe"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jxsoErMyj1n433dkJddF5.SC1/bfK2.db5D079VG0TWShvQUZSVcK"], ["created_at", "2015-05-27 17:25:25.907379"], ["updated_at", "2015-05-27 17:25:25.907379"], ["auth_token", "e2779e53ccff2655bdb0b64d737ea6fe"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:25:25.912544"], ["updated_at", "2015-05-27 17:25:25.912544"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:25:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e2779e53ccff2655bdb0b64d737ea6fe"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 6ms (Views: 1.0ms | ActiveRecord: 3.1ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "70d7d0e5548e52cb005a61c3549e4025"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$HpF3yYvWdZSCMYRGidyAm.2VKXJckzhwnUhFx3OkV5s8U8/hBpMUq"], ["created_at", "2015-05-27 17:25:25.940892"], ["updated_at", "2015-05-27 17:25:25.940892"], ["auth_token", "70d7d0e5548e52cb005a61c3549e4025"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:25:25.946306"], ["updated_at", "2015-05-27 17:25:25.946306"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d2d5dd1ef0eadec5c4d577d9fdada47e"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Y3QxoiR5Diij2XhmSdzGRuxZkjUBIhup2k312LxS4WXfA4SNbga3e"], ["created_at", "2015-05-27 17:25:25.963427"], ["updated_at", "2015-05-27 17:25:25.963427"], ["auth_token", "d2d5dd1ef0eadec5c4d577d9fdada47e"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:25:25.967882"], ["updated_at", "2015-05-27 17:25:25.967882"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:25:25 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d2d5dd1ef0eadec5c4d577d9fdada47e"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.9ms)
Completed 500 Internal Server Error in 18ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (1.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:25:26.024853"], ["updated_at", "2015-05-27 17:25:26.024853"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 17ms (Views: 14.2ms | ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.6ms)
  Rendered circuits/edit.html.erb within layouts/application (10.1ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 13.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.9ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (5.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:26:01', '2015-05-27 17:26:01', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:26:01', '2015-05-27 17:26:01', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:26:01', '2015-05-27 17:26:01', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:26:01', '2015-05-27 17:26:01', 298486374)[0m
  [1m[35m (11.2ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 19.2ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:26:01.975555"], ["updated_at", "2015-05-27 17:26:01.975555"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:26:01 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.1ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.3ms | ActiveRecord: 0.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "635267189312f8a9d1cc17b45d8a5cf7"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Qnt1I4Dog23.FwMqC6KyeeSs/lozgqQFCESnaQD3wkU8huLBjOfsC"], ["created_at", "2015-05-27 17:26:02.034828"], ["updated_at", "2015-05-27 17:26:02.034828"], ["auth_token", "635267189312f8a9d1cc17b45d8a5cf7"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:26:02.046031"], ["updated_at", "2015-05-27 17:26:02.046031"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:26:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "51a89896b00d8337106444b190ec432d"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$uE1MZffF8YzgkF8vN0mxIOCNEYCNU8Dp1PkBw6U1c2AkcZ13sKdQm"], ["created_at", "2015-05-27 17:26:02.071504"], ["updated_at", "2015-05-27 17:26:02.071504"], ["auth_token", "51a89896b00d8337106444b190ec432d"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:26:02.077149"], ["updated_at", "2015-05-27 17:26:02.077149"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:26:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "51a89896b00d8337106444b190ec432d"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 8ms (Views: 1.9ms | ActiveRecord: 2.3ms)
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5d7687d4eb1948cb52e42bfaf24bc626"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$JeYSdVtY.DW42Bb8Vn5/9ub6PDXhzlZfsIX6V0/oYS061AxWg8.DG"], ["created_at", "2015-05-27 17:26:02.108056"], ["updated_at", "2015-05-27 17:26:02.108056"], ["auth_token", "5d7687d4eb1948cb52e42bfaf24bc626"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:26:02.113326"], ["updated_at", "2015-05-27 17:26:02.113326"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:26:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5d7687d4eb1948cb52e42bfaf24bc626\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.3ms | ActiveRecord: 0.6ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "06cc6b3b13a4652f3afa5d64f1adc13d"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$HP6NWi6TmLAP0F0nt4ORguuPgNWiMo.ZB9Nnh3CciLnvDweOK..ne"], ["created_at", "2015-05-27 17:26:02.141695"], ["updated_at", "2015-05-27 17:26:02.141695"], ["auth_token", "06cc6b3b13a4652f3afa5d64f1adc13d"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:26:02.145955"], ["updated_at", "2015-05-27 17:26:02.145955"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:26:02 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "06cc6b3b13a4652f3afa5d64f1adc13d"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 1.4ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.3ms)
  Rendered circuits/new.html.erb within layouts/application (10.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:26:02.243167"], ["updated_at", "2015-05-27 17:26:02.243167"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 9ms (ActiveRecord: 2.8ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.0ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 5.3ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:29:01', '2015-05-27 17:29:01', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:29:01', '2015-05-27 17:29:01', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:29:01', '2015-05-27 17:29:01', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:29:01', '2015-05-27 17:29:01', 298486374)[0m
  [1m[35m (2.2ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.7ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 26ms (Views: 18.5ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6fa4794e83ad00233cb67da378c630a8"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$KoAUD1QkZzrWxGBXJyGZW.KwcjrXAQ5EwpJDI7QpCnq9iSeoWY95a"], ["created_at", "2015-05-27 17:29:02.044806"], ["updated_at", "2015-05-27 17:29:02.044806"], ["auth_token", "6fa4794e83ad00233cb67da378c630a8"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:29:02.059041"], ["updated_at", "2015-05-27 17:29:02.059041"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:29:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 3.1ms | ActiveRecord: 0.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9cd412f39b17a09792e88cbc9a345cca"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$4sR.nEf6hvYDORaHrzfBUOfVhxiGyKsOyABBHecPDh6SC1TfrS1v2"], ["created_at", "2015-05-27 17:29:02.115674"], ["updated_at", "2015-05-27 17:29:02.115674"], ["auth_token", "9cd412f39b17a09792e88cbc9a345cca"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:29:02.124662"], ["updated_at", "2015-05-27 17:29:02.124662"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:29:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9cd412f39b17a09792e88cbc9a345cca"]]
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 9ms (Views: 1.2ms | ActiveRecord: 2.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f9096a471b8c0d762fb66b1e35784d1b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5Brd8iKmpKbrJFyBrVgWTuvvE4FtZ6t0/qik62PScteo6gKoWF7Sm"], ["created_at", "2015-05-27 17:29:02.158240"], ["updated_at", "2015-05-27 17:29:02.158240"], ["auth_token", "f9096a471b8c0d762fb66b1e35784d1b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:29:02.164668"], ["updated_at", "2015-05-27 17:29:02.164668"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:29:02 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f9096a471b8c0d762fb66b1e35784d1b"]]
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.3ms)
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c447089a6611eb6587fd2d1d1b6fd1ef"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$evMBwX0Zh9.ENPRUGVG6zO.SYnyxc87gTUQgdQPoI7I6p8avcEnCC"], ["created_at", "2015-05-27 17:29:02.194808"], ["updated_at", "2015-05-27 17:29:02.194808"], ["auth_token", "c447089a6611eb6587fd2d1d1b6fd1ef"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:29:02.200956"], ["updated_at", "2015-05-27 17:29:02.200956"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:29:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c447089a6611eb6587fd2d1d1b6fd1ef\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.4ms | ActiveRecord: 0.6ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:29:02.219760"], ["updated_at", "2015-05-27 17:29:02.219760"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 8.8ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (12.7ms)
Completed 500 Internal Server Error in 15ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.7ms)
  Rendered circuits/new.html.erb within layouts/application (9.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:29:02.322307"], ["updated_at", "2015-05-27 17:29:02.322307"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.1ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (29.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:30:11', '2015-05-27 17:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:30:11', '2015-05-27 17:30:11', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:30:11', '2015-05-27 17:30:11', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:30:11', '2015-05-27 17:30:11', 298486374)[0m
  [1m[35m (9.7ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c993f83efd1fedec0bd69e1ff8c5486f"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PVv3xyRwjTUyCmn/28Kq0uQQmJKxIK0ahSjJ6Gx9OIVmFpdywbSGy"], ["created_at", "2015-05-27 17:30:11.865530"], ["updated_at", "2015-05-27 17:30:11.865530"], ["auth_token", "c993f83efd1fedec0bd69e1ff8c5486f"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:30:11.883259"], ["updated_at", "2015-05-27 17:30:11.883259"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 14:30:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c993f83efd1fedec0bd69e1ff8c5486f"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 21ms (Views: 1.3ms | ActiveRecord: 3.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6b84ba61af96edd6c5d613a9a0a3a686"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$DwRXwqlm3YFybJTN7sssreMpcAlzZ2ox0G/RXEPIlhaE3Y8Ku8TBu"], ["created_at", "2015-05-27 17:30:11.954417"], ["updated_at", "2015-05-27 17:30:11.954417"], ["auth_token", "6b84ba61af96edd6c5d613a9a0a3a686"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:30:11.960011"], ["updated_at", "2015-05-27 17:30:11.960011"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:30:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6b84ba61af96edd6c5d613a9a0a3a686\"fake"]]
  Rendered text template (0.1ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 9ms (Views: 7.7ms | ActiveRecord: 0.6ms)
  [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5ec1a5178a79c6895cff7fbda1ba944a"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$rKjSspq5GKmhDonO1Ox8XubohBrittElGSNfofTfffXx4s9cbOpiK"], ["created_at", "2015-05-27 17:30:11.989782"], ["updated_at", "2015-05-27 17:30:11.989782"], ["auth_token", "5ec1a5178a79c6895cff7fbda1ba944a"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:30:11.994067"], ["updated_at", "2015-05-27 17:30:11.994067"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:30:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "99fa50fc7384f230af87e952f050030c"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$mGkvj.RZJvpfFYUI73XijuyYiKh3JGPB8zzx06ijU7CtxpgvEz0.C"], ["created_at", "2015-05-27 17:30:12.014674"], ["updated_at", "2015-05-27 17:30:12.014674"], ["auth_token", "99fa50fc7384f230af87e952f050030c"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:30:12.019208"], ["updated_at", "2015-05-27 17:30:12.019208"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:30:12 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "99fa50fc7384f230af87e952f050030c"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:30:12.039735"], ["updated_at", "2015-05-27 17:30:12.039735"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:30:12 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190967}, "subdomain"=>"api", "circuit_id"=>"980190967"}
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 17.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.6ms)
  Rendered circuits/edit.html.erb within layouts/application (8.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 15.5ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 5.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.5ms)
Completed 500 Internal Server Error in 14ms
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.0ms)
  Rendered circuits/new.html.erb within layouts/application (4.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 7.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:30:12.182968"], ["updated_at", "2015-05-27 17:30:12.182968"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190968
Completed 302 Found in 7ms (ActiveRecord: 1.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (1, 'MyText', 'Demand', '2015-05-27 17:54:26', '2015-05-27 17:54:26', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "type", "created_at", "updated_at", "id") VALUES (2, 'MyText', 'Generation', '2015-05-27 17:54:26', '2015-05-27 17:54:26', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 17:54:26', '2015-05-27 17:54:26', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 17:54:26', '2015-05-27 17:54:26', 298486374)[0m
  [1m[35m (4.9ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 17:54:26.592225"], ["updated_at", "2015-05-27 17:54:26.592225"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (12.0ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.8ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 29ms (Views: 26.9ms | ActiveRecord: 0.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.1ms)
  Rendered circuits/edit.html.erb within layouts/application (2.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.6ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (2.7ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  Rendered circuits/show.html.erb within layouts/application (11.7ms)
Completed 500 Internal Server Error in 14ms
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"1"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 3ms (ActiveRecord: 0.4ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:54:26.705467"], ["updated_at", "2015-05-27 17:54:26.705467"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 14:54:26 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-27 17:54:26.756402"], ["updated_at", "2015-05-27 17:54:26.756402"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 19ms (Views: 0.4ms | ActiveRecord: 4.3ms)
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 6.4ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "139b5f9ae1773441d58bbffdf4555724"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$QZnxX3p0ZvrCna0MrxgD..0/3pLR4IqvIDHfFbgUc6.vWQOZ2i9HO"], ["created_at", "2015-05-27 17:54:26.811425"], ["updated_at", "2015-05-27 17:54:26.811425"], ["auth_token", "139b5f9ae1773441d58bbffdf4555724"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:54:26.819238"], ["updated_at", "2015-05-27 17:54:26.819238"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 14:54:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_3
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "9a1b01b28a8efd06ce5b4623c926503a"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$CKuXUQRI.bSdxkSqPMEbZ.4dV1b6dUYTBSGRemz.Fn9RlVJ7Frcju"], ["created_at", "2015-05-27 17:54:26.849733"], ["updated_at", "2015-05-27 17:54:26.849733"], ["auth_token", "9a1b01b28a8efd06ce5b4623c926503a"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_3
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:54:26.855156"], ["updated_at", "2015-05-27 17:54:26.855156"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_3[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 14:54:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "9a1b01b28a8efd06ce5b4623c926503a"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_3[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_3
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f8f48aeb8e6a0ee6dcb8464daa4faa13"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5vvk2e5tRhob6c79/3Wy0.oSoMVtW7Skbr.j30F2TIl9gxs8SZwLK"], ["created_at", "2015-05-27 17:54:26.881081"], ["updated_at", "2015-05-27 17:54:26.881081"], ["auth_token", "f8f48aeb8e6a0ee6dcb8464daa4faa13"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:54:26.885891"], ["updated_at", "2015-05-27 17:54:26.885891"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_4
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 14:54:26 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f8f48aeb8e6a0ee6dcb8464daa4faa13"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_4
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_4
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_4[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "f807f65c92cfbc8a5edcd421594299b0"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$zcuMYGAUuNffGKHvTum2tuYpbMMp4d0stpqyyvgdkcsBQNuAtb0cO"], ["created_at", "2015-05-27 17:54:26.909364"], ["updated_at", "2015-05-27 17:54:26.909364"], ["auth_token", "f807f65c92cfbc8a5edcd421594299b0"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 17:54:26.913521"], ["updated_at", "2015-05-27 17:54:26.913521"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
Started GET "/circuits/980190968/measures" for 127.0.0.1 at 2015-05-27 14:54:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190968"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "f807f65c92cfbc8a5edcd421594299b0\"fake"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190968]]
Completed 200 OK in 2ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 18:02:04', '2015-05-27 18:02:04', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 18:02:04', '2015-05-27 18:02:04', 298486374, 980190962)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 18:02:04', '2015-05-27 18:02:04', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 18:02:04', '2015-05-27 18:02:04', 298486374)[0m
  [1m[35m (10.1ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:02:04.198395"], ["updated_at", "2015-05-27 18:02:04.198395"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 15:02:04 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 12ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35mCircuit Load (0.8ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f32cb1400f207d524d527ac9f4c9c7e"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$y9I5LdIcqmujwATZ6Uu86.QkZjCafRFO.rETK50uvlzvJDyQyIciO"], ["created_at", "2015-05-27 18:02:04.282775"], ["updated_at", "2015-05-27 18:02:04.282775"], ["auth_token", "6f32cb1400f207d524d527ac9f4c9c7e"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:02:04.293469"], ["updated_at", "2015-05-27 18:02:04.293469"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 15:02:04 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f32cb1400f207d524d527ac9f4c9c7e\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 4ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_cdfc653008" on table "circuits"
DETAIL:  Key (id)=(980190962) is still referenced from table "circuits".
: DELETE FROM "users" WHERE "users"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (2.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_cdfc653008" on table "circuits"
DETAIL:  Key (id)=(980190962) is still referenced from table "circuits".
: DELETE FROM "users" WHERE "users"."id" = $1
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_cdfc653008" on table "circuits"
DETAIL:  Key (id)=(980190962) is still referenced from table "circuits".
: DELETE FROM "users" WHERE "users"."id" = $1
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_3[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_4
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_4
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "users" violates foreign key constraint "fk_rails_cdfc653008" on table "circuits"
DETAIL:  Key (id)=(980190962) is still referenced from table "circuits".
: DELETE FROM "users" WHERE "users"."id" = $1
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_4[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 18:02:04.487224"], ["updated_at", "2015-05-27 18:02:04.487224"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
Redirected to http://test.host/demands/980190965
Completed 302 Found in 20ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_4
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (5.1ms)
  Rendered layouts/_navigation_links.html.erb (1.1ms)
  Rendered layouts/_header.html.erb (3.3ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 24.0ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_4
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.0ms)
  Rendered circuits/new.html.erb within layouts/application (9.7ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.4ms | ActiveRecord: 0.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_4[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.3ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (8.4ms)
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.9ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_4
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.6ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 18:03:27', '2015-05-27 18:03:27', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 18:03:27', '2015-05-27 18:03:27', 298486374, 980190962)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 18:03:27', '2015-05-27 18:03:27', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 18:03:27', '2015-05-27 18:03:27', 298486374)[0m
  [1m[35m (11.9ms)[0m  COMMIT
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (1.0ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.7ms)
  Rendered circuits/edit.html.erb within layouts/application (12.6ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 36ms (Views: 26.3ms | ActiveRecord: 1.3ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 18:03:27.635367"], ["updated_at", "2015-05-27 18:03:27.635367"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.6ms)
  Rendered circuits/new.html.erb within layouts/application (3.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (8.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 11.7ms | ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (10.5ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 14.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "b12a3864b15266179d6de11a2eeb4dc8"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$OTPX5z31W9onJaTCNSA5J.VXtPxx.hldtkfQj.C.i4d41B/RDbI.6"], ["created_at", "2015-05-27 18:03:27.739952"], ["updated_at", "2015-05-27 18:03:27.739952"], ["auth_token", "b12a3864b15266179d6de11a2eeb4dc8"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:03:27.750336"], ["updated_at", "2015-05-27 18:03:27.750336"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 15:03:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "b12a3864b15266179d6de11a2eeb4dc8\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b2520f3fe99de31c186bcd034455a620"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$TP.TKhP.oNUKaDXpMgDHQeLJdsrz7O9ICIIPB9so3/6Ug4y6e/x8C"], ["created_at", "2015-05-27 18:03:27.816339"], ["updated_at", "2015-05-27 18:03:27.816339"], ["auth_token", "b2520f3fe99de31c186bcd034455a620"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:03:27.821666"], ["updated_at", "2015-05-27 18:03:27.821666"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 15:03:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b2520f3fe99de31c186bcd034455a620"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 2.7ms)
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a198d190dbd82f88b6565cb32b904ba5"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$z.HkJbZb9meW1BAxE4zQ2uMuyahciDJhK98TojbDhQvHZltQrwf6y"], ["created_at", "2015-05-27 18:03:27.852718"], ["updated_at", "2015-05-27 18:03:27.852718"], ["auth_token", "a198d190dbd82f88b6565cb32b904ba5"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:03:27.857148"], ["updated_at", "2015-05-27 18:03:27.857148"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 15:03:27 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a198d190dbd82f88b6565cb32b904ba5"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 1.2ms | ActiveRecord: 1.2ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5b35ae0512c6639d84833167342dd58b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PJLR67cMOLV9MnPY3.AG4erY3IsbiZCLXglz5s1dyhI/JVxRB34ia"], ["created_at", "2015-05-27 18:03:27.891136"], ["updated_at", "2015-05-27 18:03:27.891136"], ["auth_token", "5b35ae0512c6639d84833167342dd58b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:03:27.896645"], ["updated_at", "2015-05-27 18:03:27.896645"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 15:03:27 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 11ms (Views: 8.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 18:03:27.939821"], ["updated_at", "2015-05-27 18:03:27.939821"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190968/measures" for 127.0.0.1 at 2015-05-27 15:03:27 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190968}, "subdomain"=>"api", "circuit_id"=>"980190968"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 0ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190968]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:29:59', '2015-05-27 19:29:59', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:29:59', '2015-05-27 19:29:59', 298486374, 980190962)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:29:59', '2015-05-27 19:29:59', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:29:59', '2015-05-27 19:29:59', 298486374)[0m
  [1m[35m (7.9ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 19.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "43dee8dd0b3c867ba713f9f0c2fc1e61"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jrq6cJFdj6stEGtECHgbCuXbdK/s3hN.U5NgoTeMYsdnwIUME9N7y"], ["created_at", "2015-05-27 19:30:00.093422"], ["updated_at", "2015-05-27 19:30:00.093422"], ["auth_token", "43dee8dd0b3c867ba713f9f0c2fc1e61"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:30:00.110451"], ["updated_at", "2015-05-27 19:30:00.110451"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:30:00 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "43dee8dd0b3c867ba713f9f0c2fc1e61\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "47c27f0db349f91fbe842e719cb9603a"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$vjtVM/d3.5Mx2ADlq7.dn.oZuRYs9IOZSMVbrNfke0xEH6WMXRS0."], ["created_at", "2015-05-27 19:30:00.175217"], ["updated_at", "2015-05-27 19:30:00.175217"], ["auth_token", "47c27f0db349f91fbe842e719cb9603a"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:30:00.181105"], ["updated_at", "2015-05-27 19:30:00.181105"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:30:00 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "47c27f0db349f91fbe842e719cb9603a"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 8ms (Views: 1.1ms | ActiveRecord: 2.9ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "a27da59c11f6d4ad7bba733cb137084b"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$00YYavACR3Z5OkrOK1In3u85LyOLybnkO0FYQK3eXQMCAFetZJfsa"], ["created_at", "2015-05-27 19:30:00.219359"], ["updated_at", "2015-05-27 19:30:00.219359"], ["auth_token", "a27da59c11f6d4ad7bba733cb137084b"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:30:00.224295"], ["updated_at", "2015-05-27 19:30:00.224295"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:30:00 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "a27da59c11f6d4ad7bba733cb137084b"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "654f5c4baa694a685c79e107dfcdc2ad"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$JEvFva7mb5MGg1g3KS2Gcegf7TQ41Q6PTC3v3aiu.YVPfT3gIwApe"], ["created_at", "2015-05-27 19:30:00.259558"], ["updated_at", "2015-05-27 19:30:00.259558"], ["auth_token", "654f5c4baa694a685c79e107dfcdc2ad"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:30:00.267992"], ["updated_at", "2015-05-27 19:30:00.267992"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:30:00 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "654f5c4baa694a685c79e107dfcdc2ad"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.0ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (9.6ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 15.9ms | ActiveRecord: 1.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:30:00.365403"], ["updated_at", "2015-05-27 19:30:00.365403"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190967
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.1ms)
  Rendered circuits/edit.html.erb within layouts/application (2.0ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.8ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.2ms | ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:30:00.427982"], ["updated_at", "2015-05-27 19:30:00.427982"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190968/measures" for 127.0.0.1 at 2015-05-27 16:30:00 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190968}, "subdomain"=>"api", "circuit_id"=>"980190968"}
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190968]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (9.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:32:39', '2015-05-27 19:32:39', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:32:39', '2015-05-27 19:32:39', 298486374, 980190962)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:32:39', '2015-05-27 19:32:39', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:32:39', '2015-05-27 19:32:39', 298486374)[0m
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3457a44d44043a17ed3b9389477bc968"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$CzOeoJTu.Asi3axq6641hubk6ULUN8z9YWERHp4Pg3fyDIv/DEKsi"], ["created_at", "2015-05-27 19:32:39.250715"], ["updated_at", "2015-05-27 19:32:39.250715"], ["auth_token", "3457a44d44043a17ed3b9389477bc968"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:32:39.265842"], ["updated_at", "2015-05-27 19:32:39.265842"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:32:39 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3457a44d44043a17ed3b9389477bc968"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 20ms (Views: 1.2ms | ActiveRecord: 3.0ms)
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "475c7132e0b2564a1750f604b53c4ac5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$fZT/bJELqNAbT8rYzXqKIenWMPYUUJPkDxMeHbr.0OSCaAQxIDq4S"], ["created_at", "2015-05-27 19:32:39.352352"], ["updated_at", "2015-05-27 19:32:39.352352"], ["auth_token", "475c7132e0b2564a1750f604b53c4ac5"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:32:39.356933"], ["updated_at", "2015-05-27 19:32:39.356933"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:32:39 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "475c7132e0b2564a1750f604b53c4ac5"]]
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.3ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f0c4576cb6481b326fc572f6d4f80c80"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$42k1NQvKj61PrIZUink5Le/HoNDQRBSr65ZM5O2KGb1/mqAScOlim"], ["created_at", "2015-05-27 19:32:39.393935"], ["updated_at", "2015-05-27 19:32:39.393935"], ["auth_token", "f0c4576cb6481b326fc572f6d4f80c80"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:32:39.400250"], ["updated_at", "2015-05-27 19:32:39.400250"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:32:39 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f0c4576cb6481b326fc572f6d4f80c80\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "62f217778b061499056db18dda68b9b6"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$JdHMC4kUof/8rl8LrhnL7.ApNBA8wDBlO06ygpZPEvt8rofngvWmG"], ["created_at", "2015-05-27 19:32:39.429298"], ["updated_at", "2015-05-27 19:32:39.429298"], ["auth_token", "62f217778b061499056db18dda68b9b6"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:32:39.434338"], ["updated_at", "2015-05-27 19:32:39.434338"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:32:39 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "62f217778b061499056db18dda68b9b6"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 0.9ms)
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:32:39.462425"], ["updated_at", "2015-05-27 19:32:39.462425"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (5.1ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 20.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 13ms (Views: 10.3ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (9.0ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 12.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.8ms)
  Rendered circuits/edit.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 12.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:32:39.601715"], ["updated_at", "2015-05-27 19:32:39.601715"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 7ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (2.3ms)
  Rendered circuits/new.html.erb within layouts/application (4.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 13ms (Views: 9.4ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:33:24', '2015-05-27 19:33:24', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:33:24', '2015-05-27 19:33:24', 298486374, 980190962)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:33:24', '2015-05-27 19:33:24', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:33:24', '2015-05-27 19:33:24', 298486374)[0m
  [1m[35m (7.6ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:33:24.544005"], ["updated_at", "2015-05-27 19:33:24.544005"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 17ms (ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (10.6ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.8ms)
  Rendered layouts/_header.html.erb (4.4ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 35ms (Views: 31.4ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.6ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.7ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/edit.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.8ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 3ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (6.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 9.8ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (1.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (9.8ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 16.6ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "bb1b6e009b07ba310aced3230a17f30d"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$K7Ph/VJwoKtvKbKWeHgVm.LViElxDGvMkfSDoalpPyAjPcvfCfVpW"], ["created_at", "2015-05-27 19:33:24.711834"], ["updated_at", "2015-05-27 19:33:24.711834"], ["auth_token", "bb1b6e009b07ba310aced3230a17f30d"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:33:24.719329"], ["updated_at", "2015-05-27 19:33:24.719329"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:33:24 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "bb1b6e009b07ba310aced3230a17f30d"]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-27 19:33:24.764163"], ["updated_at", "2015-05-27 19:33:24.764163"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 22ms (Views: 0.5ms | ActiveRecord: 4.8ms)
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:34:25', '2015-05-27 19:34:25', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:34:25', '2015-05-27 19:34:25', 298486374, 980190962)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:34:25', '2015-05-27 19:34:25', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:34:25', '2015-05-27 19:34:25', 298486374)[0m
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "35d3f24539e86858240ce19eeb9dcab4"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$RfuOK5YeIsJQp0cjkP.26eHRbrtRPGEV5V04hrLZMIsJPExyheYja"], ["created_at", "2015-05-27 19:34:25.299527"], ["updated_at", "2015-05-27 19:34:25.299527"], ["auth_token", "35d3f24539e86858240ce19eeb9dcab4"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:34:25.317313"], ["updated_at", "2015-05-27 19:34:25.317313"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:34:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "35d3f24539e86858240ce19eeb9dcab4\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[35mCircuit Load (0.8ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "735abe0a35618ebfd1aa7270a0e60f92"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$iFoD4s.p8f80eMrro/YE9e36GXO0OR7Ei.IAng1qfRbIbtWRHqNYW"], ["created_at", "2015-05-27 19:34:25.398623"], ["updated_at", "2015-05-27 19:34:25.398623"], ["auth_token", "735abe0a35618ebfd1aa7270a0e60f92"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:34:25.407487"], ["updated_at", "2015-05-27 19:34:25.407487"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:34:25 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "735abe0a35618ebfd1aa7270a0e60f92"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 7ms (Views: 1.4ms | ActiveRecord: 1.6ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "98c4958303fc70426bf904b53afa9923"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$QAnACDI5A7O6yxpbxAD9X.RJSYsc8cWNcYwuZbRYKUpirSI1/ZNQq"], ["created_at", "2015-05-27 19:34:25.449974"], ["updated_at", "2015-05-27 19:34:25.449974"], ["auth_token", "98c4958303fc70426bf904b53afa9923"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:34:25.454522"], ["updated_at", "2015-05-27 19:34:25.454522"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:34:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "98c4958303fc70426bf904b53afa9923"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5d34ef57bc50858ed326e7f492cbad16"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jeJyRhPFT7LpyfdKk7wTh.hC7fF468IuGbSx0Ps0h/ywhqD3TAQaa"], ["created_at", "2015-05-27 19:34:25.483206"], ["updated_at", "2015-05-27 19:34:25.483206"], ["auth_token", "5d34ef57bc50858ed326e7f492cbad16"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:34:25.487853"], ["updated_at", "2015-05-27 19:34:25.487853"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:34:25 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "5d34ef57bc50858ed326e7f492cbad16"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "34fb34173bfee98cda69f1ed9ee43bd6"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$uwZaXgDXQRwlFqxDUddnGumXRLqk59BMMnY4UGJAPRanAIIsMXgqi"], ["created_at", "2015-05-27 19:34:25.519897"], ["updated_at", "2015-05-27 19:34:25.519897"], ["auth_token", "34fb34173bfee98cda69f1ed9ee43bd6"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:34:25.526085"], ["updated_at", "2015-05-27 19:34:25.526085"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 16:34:25 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190967}, "subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "34fb34173bfee98cda69f1ed9ee43bd6"]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190967], ["watts", 65], ["created_at", "2015-05-27 19:34:25.541843"], ["updated_at", "2015-05-27 19:34:25.541843"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 13ms (Views: 0.4ms | ActiveRecord: 3.6ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d93a10bffd" on table "measures"
DETAIL:  Key (id)=(980190967) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 23ms (Views: 19.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (7.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "measures" DROP CONSTRAINT "fk_rails_d93a10bffd"
  [1m[36m (2.0ms)[0m  [1mDROP TABLE "measures"[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150522130847"]]
  [1m[36m (11.2ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (6.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "circuits" DROP CONSTRAINT "fk_rails_cdfc653008"
  [1m[36m (1.4ms)[0m  [1mDROP TABLE "circuits"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150513183751"]]
  [1m[36m (8.5ms)[0m  [1mCOMMIT[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36m (1.1ms)[0m  [1mDROP INDEX "index_users_on_reset_password_token"[0m
  [1m[35m (0.4ms)[0m  DROP INDEX "index_users_on_email"
  [1m[36m (1.6ms)[0m  [1mDROP TABLE "users"[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150511152613"]]
  [1m[36m (5.7ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (84.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (41.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (51.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150511152613"]]
  [1m[36m (18.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.6ms)[0m  BEGIN
  [1m[36m (91.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.3ms)[0m  CREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_9832393487"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150513183751"]]
  [1m[36m (30.8ms)[0m  [1mCOMMIT[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (49.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures"  ("circuit_id")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_d94efeabd6"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150522130847"]]
  [1m[36m (17.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (3.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.7ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.7ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (11.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:35:24', '2015-05-27 19:35:24', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:35:24', '2015-05-27 19:35:24', 298486374, 980190962)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:35:24', '2015-05-27 19:35:24', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:35:24', '2015-05-27 19:35:24', 298486374)[0m
  [1m[35m (11.1ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "acaa04712757bc3a1fb1632888f24bc1"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$YtZkf6iqXoCcAU1MR6cAeuK8AcEJXru4MsQ.RqxpV4KWULWP7Avhy"], ["created_at", "2015-05-27 19:35:25.004820"], ["updated_at", "2015-05-27 19:35:25.004820"], ["auth_token", "acaa04712757bc3a1fb1632888f24bc1"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:35:25.022051"], ["updated_at", "2015-05-27 19:35:25.022051"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:35:25 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "acaa04712757bc3a1fb1632888f24bc1"]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-27 19:35:25.064579"], ["updated_at", "2015-05-27 19:35:25.064579"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 23ms (Views: 0.4ms | ActiveRecord: 6.2ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c7d193c1903c41b921bee4b0cae36f77"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$A6YjKp/gY98H7wNOVqk6FOvzFgCItWYPm4zjff/HhsfNtLY8O.8T6"], ["created_at", "2015-05-27 19:35:25.122183"], ["updated_at", "2015-05-27 19:35:25.122183"], ["auth_token", "c7d193c1903c41b921bee4b0cae36f77"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:35:25.126165"], ["updated_at", "2015-05-27 19:35:25.126165"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:35:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c7d193c1903c41b921bee4b0cae36f77\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_3
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (10.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:36:12', '2015-05-27 19:36:12', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:36:12', '2015-05-27 19:36:12', 298486374, 980190962)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:36:12', '2015-05-27 19:36:12', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:36:12', '2015-05-27 19:36:12', 298486374)[0m
  [1m[35m (4.3ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.0ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6ab90a76f887b0e1b56486ea0166095b"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$SV1Ez7hSXKR99y7XBE.DiOZgSRyz.8gnfJVLpfpt0cq125xIVAgXS"], ["created_at", "2015-05-27 19:36:12.998440"], ["updated_at", "2015-05-27 19:36:12.998440"], ["auth_token", "6ab90a76f887b0e1b56486ea0166095b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:36:13.013461"], ["updated_at", "2015-05-27 19:36:13.013461"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:36:13 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6ab90a76f887b0e1b56486ea0166095b"]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-27 19:36:13.056436"], ["updated_at", "2015-05-27 19:36:13.056436"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 22ms (Views: 0.6ms | ActiveRecord: 6.0ms)
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (7.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 15.4ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (18.0ms)
  Rendered circuits/new.html.erb within layouts/application (19.7ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 22.7ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.3ms)
  Rendered circuits/edit.html.erb within layouts/application (2.0ms)
  Rendered layouts/_navigation_links.html.erb (0.5ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.4ms | ActiveRecord: 1.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (8.7ms)
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 12.7ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:36:13.185319"], ["updated_at", "2015-05-27 19:36:13.185319"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
Redirected to http://test.host/demands/980190964
Completed 302 Found in 10ms (ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "486ddbafcb41bc2e63967e999a7a8e87"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$O1Kp2pZdspMvvfbE6WzU1eYmRRW6UBOVf0alREVey8V6bmhYn3t/."], ["created_at", "2015-05-27 19:36:13.213248"], ["updated_at", "2015-05-27 19:36:13.213248"], ["auth_token", "486ddbafcb41bc2e63967e999a7a8e87"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:36:13.218287"], ["updated_at", "2015-05-27 19:36:13.218287"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:36:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "486ddbafcb41bc2e63967e999a7a8e87"]]
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 1.3ms | ActiveRecord: 1.3ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_2
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_3
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_4[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:37:00', '2015-05-27 19:37:00', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:37:00', '2015-05-27 19:37:00', 298486374, 980190962)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:37:00', '2015-05-27 19:37:00', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:37:00', '2015-05-27 19:37:00', 298486374)[0m
  [1m[35m (10.3ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "14c0a37d322833781cba28018deaf1f8"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VApyCVajagDFREMVZAVlZuTt2e5BdEvxzyR4P6iprFknmvLwUD3eu"], ["created_at", "2015-05-27 19:37:00.572829"], ["updated_at", "2015-05-27 19:37:00.572829"], ["auth_token", "14c0a37d322833781cba28018deaf1f8"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:37:00.590122"], ["updated_at", "2015-05-27 19:37:00.590122"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:37:00 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "14c0a37d322833781cba28018deaf1f8\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_4
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 20.8ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3e150ae8fa036330f906f9f5a0942eae"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$YlY6WsTqt1a7dCFlm77x1uWzEa91lvWX5jXmo15Aq2ZAtzY0SkGm2"], ["created_at", "2015-05-27 19:37:00.724361"], ["updated_at", "2015-05-27 19:37:00.724361"], ["auth_token", "3e150ae8fa036330f906f9f5a0942eae"]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:37:00.730504"], ["updated_at", "2015-05-27 19:37:00.730504"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:37:00 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3e150ae8fa036330f906f9f5a0942eae"]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-27 19:37:00.749827"], ["updated_at", "2015-05-27 19:37:00.749827"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_5
Completed 201 Created in 16ms (Views: 0.5ms | ActiveRecord: 6.0ms)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_6
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:37:00.774448"], ["updated_at", "2015-05-27 19:37:00.774448"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_6
Redirected to http://test.host/demands/980190965
Completed 302 Found in 9ms (ActiveRecord: 2.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (8.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 14.9ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (8.6ms)
  Rendered circuits/new.html.erb within layouts/application (10.4ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 14.1ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (9.2ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 16ms (Views: 13.2ms | ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_6[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_6
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_5
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSAVEPOINT active_record_6[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_6[0m
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.3ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:38:01', '2015-05-27 19:38:01', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:38:01', '2015-05-27 19:38:01', 298486374, 980190962)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:38:01', '2015-05-27 19:38:01', 980190962)
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:38:01', '2015-05-27 19:38:01', 298486374)[0m
  [1m[35m (6.8ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 19.0ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (8.3ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 14.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (13.2ms)
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (1.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 22ms (Views: 18.6ms | ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 0.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.8ms)
  Rendered circuits/new.html.erb within layouts/application (9.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 13.0ms | ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:38:02.159590"], ["updated_at", "2015-05-27 19:38:02.159590"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (10.7ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 16.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "cc4394f5e9b72d97c28e6c949b0eadb6"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$t8VbTG0OneEGFaviBoxlAuNw95kItriW0NALXC30/HQLxvGFwNsvm"], ["created_at", "2015-05-27 19:38:02.208485"], ["updated_at", "2015-05-27 19:38:02.208485"], ["auth_token", "cc4394f5e9b72d97c28e6c949b0eadb6"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:38:02.217488"], ["updated_at", "2015-05-27 19:38:02.217488"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:38:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "cc4394f5e9b72d97c28e6c949b0eadb6\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 10ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_2
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_2
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_3[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_4[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "574c4a3fc40a799005267d47850736f2"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$GKCF4Oeeq1VgAo1mnHNZ..aml5yeJBDslsuOY57wZI9XIdiWiPdYm"], ["created_at", "2015-05-27 19:38:02.310817"], ["updated_at", "2015-05-27 19:38:02.310817"], ["auth_token", "574c4a3fc40a799005267d47850736f2"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_5
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:38:02.315818"], ["updated_at", "2015-05-27 19:38:02.315818"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:38:02 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "574c4a3fc40a799005267d47850736f2"]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-27 19:38:02.332418"], ["updated_at", "2015-05-27 19:38:02.332418"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
Completed 201 Created in 14ms (Views: 0.4ms | ActiveRecord: 5.0ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190965) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mActiveRecord::SchemaMigration Load (0.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:38:58', '2015-05-27 19:38:58', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:38:58', '2015-05-27 19:38:58', 298486374, 980190962)
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:38:58', '2015-05-27 19:38:58', 980190962)
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:38:58', '2015-05-27 19:38:58', 298486374)[0m
  [1m[35m (7.7ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9f045bb27da371ad4dcddacb7fb7656a"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eY8/hBr/i1vhToeK1wh/VeiJqP4FflY.k6hXrHIvcyhqfPNt3aatu"], ["created_at", "2015-05-27 19:38:58.654365"], ["updated_at", "2015-05-27 19:38:58.654365"], ["auth_token", "9f045bb27da371ad4dcddacb7fb7656a"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:38:58.675803"], ["updated_at", "2015-05-27 19:38:58.675803"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:38:58 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9f045bb27da371ad4dcddacb7fb7656a"]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-27 19:38:58.727168"], ["updated_at", "2015-05-27 19:38:58.727168"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 25ms (Views: 0.4ms | ActiveRecord: 5.2ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (1.9ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 33ms (Views: 29.7ms | ActiveRecord: 0.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f5b2c62fbadda7ef41cce52e63d69f1b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$FVinnq94lhpX843ZDd8bMusNlcaF1yiO7k0T89ph44ylyLueO3J5."], ["created_at", "2015-05-27 19:38:58.834769"], ["updated_at", "2015-05-27 19:38:58.834769"], ["auth_token", "f5b2c62fbadda7ef41cce52e63d69f1b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:38:58.840155"], ["updated_at", "2015-05-27 19:38:58.840155"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_2
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:38:58 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f5b2c62fbadda7ef41cce52e63d69f1b\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_4
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190963) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:39:24', '2015-05-27 19:39:24', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:39:24', '2015-05-27 19:39:24', 298486374, 980190962)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:39:24', '2015-05-27 19:39:24', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:39:24', '2015-05-27 19:39:24', 298486374)[0m
  [1m[35m (6.6ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "22178491dd0a6a1f6eebeffd5d835873"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$pX0tTWETciSLuG/kRQKrkeR58YZD3BGqeGxBoIuZgpn3r/IegsQsm"], ["created_at", "2015-05-27 19:39:24.789244"], ["updated_at", "2015-05-27 19:39:24.789244"], ["auth_token", "22178491dd0a6a1f6eebeffd5d835873"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:39:24.811255"], ["updated_at", "2015-05-27 19:39:24.811255"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:39:24 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "22178491dd0a6a1f6eebeffd5d835873\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9b310a82a8a050069712579453dde3e1"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$icUu2.c1rmdKaoN/BaYHAOVQj.EgF6g/8qUXI2lL.bPIRW/oAfDmO"], ["created_at", "2015-05-27 19:39:24.905739"], ["updated_at", "2015-05-27 19:39:24.905739"], ["auth_token", "9b310a82a8a050069712579453dde3e1"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:39:24.910275"], ["updated_at", "2015-05-27 19:39:24.910275"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:39:24 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9b310a82a8a050069712579453dde3e1"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-27 19:39:24.936243"], ["updated_at", "2015-05-27 19:39:24.936243"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
Completed 201 Created in 24ms (Views: 0.5ms | ActiveRecord: 5.5ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
PG::ForeignKeyViolation: ERROR:  update or delete on table "circuits" violates foreign key constraint "fk_rails_d94efeabd6" on table "measures"
DETAIL:  Key (id)=(980190964) is still referenced from table "measures".
: DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 20.9ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_5[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_5[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.7ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:39:54', '2015-05-27 19:39:54', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:39:54', '2015-05-27 19:39:54', 298486374, 980190962)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:39:54', '2015-05-27 19:39:54', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:39:54', '2015-05-27 19:39:54', 298486374)[0m
  [1m[35m (7.8ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 18.4ms | ActiveRecord: 0.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (10.3ms)
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.0ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 20ms (Views: 16.7ms | ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190962
Completed 302 Found in 7ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.2ms)
  Rendered circuits/edit.html.erb within layouts/application (8.4ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 11.9ms | ActiveRecord: 0.5ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.5ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.7ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:39:54.497399"], ["updated_at", "2015-05-27 19:39:54.497399"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190963
Completed 302 Found in 7ms (ActiveRecord: 2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (9.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 13.8ms | ActiveRecord: 0.7ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "e0ba9369632f0e145918d86f04eddf7a"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$PheEwtscgdMkXLsJFq7I0eAweVSDZ99JgPKWN7QYzIJOGcLQ2xtGe"], ["created_at", "2015-05-27 19:39:54.552863"], ["updated_at", "2015-05-27 19:39:54.552863"], ["auth_token", "e0ba9369632f0e145918d86f04eddf7a"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:39:54.559855"], ["updated_at", "2015-05-27 19:39:54.559855"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:39:54 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190964}, "subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "e0ba9369632f0e145918d86f04eddf7a"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190964], ["watts", 65], ["created_at", "2015-05-27 19:39:54.601200"], ["updated_at", "2015-05-27 19:39:54.601200"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 20ms (Views: 0.5ms | ActiveRecord: 4.8ms)
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0333674e6e6fc56a2dc6d17c79101295"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$GD1Aq1sWktoCbPnulp0cwOv.FRhYDBaSFFsqQ0LOZ49lox4XxNt9K"], ["created_at", "2015-05-27 19:39:54.618033"], ["updated_at", "2015-05-27 19:39:54.618033"], ["auth_token", "0333674e6e6fc56a2dc6d17c79101295"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_2[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_2
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:39:54.622364"], ["updated_at", "2015-05-27 19:39:54.622364"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_2
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:39:54 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0333674e6e6fc56a2dc6d17c79101295"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_2[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_3
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_3
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_3[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_4
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_4[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_5
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:41:04', '2015-05-27 19:41:04', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:41:04', '2015-05-27 19:41:04', 298486374, 980190962)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:41:04', '2015-05-27 19:41:04', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:41:04', '2015-05-27 19:41:04', 298486374)[0m
  [1m[35m (9.3ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.3ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:41:04.225515"], ["updated_at", "2015-05-27 19:41:04.225515"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190963
Completed 302 Found in 15ms (ActiveRecord: 2.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.7ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.1ms)
  Rendered circuits/edit.html.erb within layouts/application (11.1ms)
  Rendered layouts/_navigation_links.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 25.7ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.2ms)
  Rendered circuits/new.html.erb within layouts/application (2.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 6.0ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (10.3ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.1ms)
  Rendered layouts/_header.html.erb (2.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 14.1ms | ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (7.0ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 9.9ms | ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c82c3d663ee9c98a16cd20b81abdb068"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$kPfcH0vTPEG7YVqpd0HEJePe1BtOA6B5lg3hsPoC.h1nEgvXGbl/O"], ["created_at", "2015-05-27 19:41:04.372216"], ["updated_at", "2015-05-27 19:41:04.372216"], ["auth_token", "c82c3d663ee9c98a16cd20b81abdb068"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:41:04.379429"], ["updated_at", "2015-05-27 19:41:04.379429"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:41:04 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c82c3d663ee9c98a16cd20b81abdb068"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 16ms (Views: 1.1ms | ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_2[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_2[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_2
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_3[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_3[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_3
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_4[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_4[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_4
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_5[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "46db7398dfa0daf70c35029c113ab8c4"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$IwmbIWKNi.9N79GMcVWZMeOsIxKBE4zQvxLbPpGpHTBsppz4khHG2"], ["created_at", "2015-05-27 19:41:04.483610"], ["updated_at", "2015-05-27 19:41:04.483610"], ["auth_token", "46db7398dfa0daf70c35029c113ab8c4"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_5[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:41:04.488968"], ["updated_at", "2015-05-27 19:41:04.488968"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_5
Started POST "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:41:04 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190965}, "subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "46db7398dfa0daf70c35029c113ab8c4"]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_5
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190965], ["watts", 65], ["created_at", "2015-05-27 19:41:04.503974"], ["updated_at", "2015-05-27 19:41:04.503974"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_5
Completed 201 Created in 13ms (Views: 0.5ms | ActiveRecord: 4.0ms)
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_5[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (1.9ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 8.4ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_5
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (15.8ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:42:40', '2015-05-27 19:42:40', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:42:40', '2015-05-27 19:42:40', 298486374, 980190962)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:42:40', '2015-05-27 19:42:40', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:42:40', '2015-05-27 19:42:40', 298486374)[0m
  [1m[35m (11.3ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6c2e7563f2dda3221e879f947bc5041f"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$wgkoxOZ0cx.nniTHDDus8O3yNK2FRp7CIboDa61E9DQ/bbw9stwAC"], ["created_at", "2015-05-27 19:42:40.089337"], ["updated_at", "2015-05-27 19:42:40.089337"], ["auth_token", "6c2e7563f2dda3221e879f947bc5041f"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:42:40.106374"], ["updated_at", "2015-05-27 19:42:40.106374"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:42:40 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6c2e7563f2dda3221e879f947bc5041f"]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-27 19:42:40.160585"], ["updated_at", "2015-05-27 19:42:40.160585"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 27ms (Views: 0.4ms | ActiveRecord: 6.0ms)
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9031556a4a730201c28302b281cd4fb5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$y7vM2q649CFc7ejKtiVVdu7anE0kY4IZebtE.GanukSVqyeHCiq3y"], ["created_at", "2015-05-27 19:42:40.208110"], ["updated_at", "2015-05-27 19:42:40.208110"], ["auth_token", "9031556a4a730201c28302b281cd4fb5"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:42:40.212677"], ["updated_at", "2015-05-27 19:42:40.212677"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:42:40 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9031556a4a730201c28302b281cd4fb5"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 1.1ms | ActiveRecord: 1.2ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "87e3e60cb9508ba750b04721fbe68558"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$X4.SNO2WbuyQKQOZA1yvRuFAs8Iy69udos58dQjFFPwS3tmpI7uki"], ["created_at", "2015-05-27 19:42:40.252141"], ["updated_at", "2015-05-27 19:42:40.252141"], ["auth_token", "87e3e60cb9508ba750b04721fbe68558"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:42:40.257152"], ["updated_at", "2015-05-27 19:42:40.257152"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:42:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "87e3e60cb9508ba750b04721fbe68558\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "d7ebfc1a4c4e026ee89e8c26d996600f"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$BeaFsD9QHcKB6RDrmplVEOB9RPF5rw7U8DWJpFU74ZxnMc0b1Jc/G"], ["created_at", "2015-05-27 19:42:40.289467"], ["updated_at", "2015-05-27 19:42:40.289467"], ["auth_token", "d7ebfc1a4c4e026ee89e8c26d996600f"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:42:40.294410"], ["updated_at", "2015-05-27 19:42:40.294410"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:42:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "d7ebfc1a4c4e026ee89e8c26d996600f"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 1.1ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "27c59c6443b851f0007e4e0466ca751d"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$pUWjnx/NXeZ2D36qPuShVOBkzQqz6S1I28wSFiDu9N7nXCP7ROIim"], ["created_at", "2015-05-27 19:42:40.323457"], ["updated_at", "2015-05-27 19:42:40.323457"], ["auth_token", "27c59c6443b851f0007e4e0466ca751d"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:42:40.329851"], ["updated_at", "2015-05-27 19:42:40.329851"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 16:42:40 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "27c59c6443b851f0007e4e0466ca751d"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
Completed 200 OK in 5ms (Views: 1.2ms | ActiveRecord: 1.1ms)
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (6.2ms)
  Rendered circuits/new.html.erb within layouts/application (20.3ms)
  Rendered layouts/_navigation_links.html.erb (0.7ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 40ms (Views: 35.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:42:40.423212"], ["updated_at", "2015-05-27 19:42:40.423212"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190968
Completed 302 Found in 12ms (ActiveRecord: 2.6ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 1.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (0.9ms)
  Rendered circuits/edit.html.erb within layouts/application (1.7ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.5ms | ActiveRecord: 0.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (9.1ms)
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (2.4ms)
  Rendered layouts/_header.html.erb (2.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 13.5ms | ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (1.6ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 7.3ms | ActiveRecord: 0.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.4ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:43:21', '2015-05-27 19:43:21', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:43:21', '2015-05-27 19:43:21', 298486374, 980190962)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:43:21', '2015-05-27 19:43:21', 980190962)
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:43:21', '2015-05-27 19:43:21', 298486374)[0m
  [1m[35m (9.0ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_navigation_links.html.erb (0.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 26ms (Views: 19.1ms | ActiveRecord: 0.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "297ecdbb2d36a447101d958507254392"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$9BP7stUyulhKa8WwRAWs2.A.Opiyw0qAD8sqwkqQPxIfOIsTTuBQ."], ["created_at", "2015-05-27 19:43:22.057784"], ["updated_at", "2015-05-27 19:43:22.057784"], ["auth_token", "297ecdbb2d36a447101d958507254392"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:43:22.085294"], ["updated_at", "2015-05-27 19:43:22.085294"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:43:22 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "297ecdbb2d36a447101d958507254392"]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-05-27 19:43:22.127975"], ["updated_at", "2015-05-27 19:43:22.127975"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 24ms (Views: 0.6ms | ActiveRecord: 5.8ms)
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.2ms)
  Rendered layouts/_navigation_links.html.erb (0.4ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 17ms (Views: 15.1ms | ActiveRecord: 0.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1[0m  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_navigation_links.html.erb (0.2ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.8ms | ActiveRecord: 1.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (8.9ms)
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (1.9ms)
  Rendered layouts/_header.html.erb (2.3ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.5ms | ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:43:22.307087"], ["updated_at", "2015-05-27 19:43:22.307087"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190964
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c0d33c22e59c2b160df1158fe76edb6c"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$iNqB5GYKSIHM2gr2Qu.ZCe173z94fLUkW89a4a5MsvV1ONQn.gQCu"], ["created_at", "2015-05-27 19:43:22.322064"], ["updated_at", "2015-05-27 19:43:22.322064"], ["auth_token", "c0d33c22e59c2b160df1158fe76edb6c"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:43:22.326552"], ["updated_at", "2015-05-27 19:43:22.326552"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:43:22 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "c0d33c22e59c2b160df1158fe76edb6c"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 1.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1fd46d9be22d538d6a70b5c35dc3bc25"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$LvsWUCefseHVYqSDEvDDVOp7VCscENSePVXQ8DBtE9vH3EmAjeub2"], ["created_at", "2015-05-27 19:43:22.361549"], ["updated_at", "2015-05-27 19:43:22.361549"], ["auth_token", "1fd46d9be22d538d6a70b5c35dc3bc25"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:43:22.367286"], ["updated_at", "2015-05-27 19:43:22.367286"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:43:22 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1fd46d9be22d538d6a70b5c35dc3bc25"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.1ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "fe236da74487100993fe7a8cf2374580"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$UfKqi4fmFvz.P.KYSL/AJO6PHo7uJ2Rd5xrBsXMG66NgQ1VnQqbJW"], ["created_at", "2015-05-27 19:43:22.407648"], ["updated_at", "2015-05-27 19:43:22.407648"], ["auth_token", "fe236da74487100993fe7a8cf2374580"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:43:22.413391"], ["updated_at", "2015-05-27 19:43:22.413391"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 16:43:22 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "fe236da74487100993fe7a8cf2374580\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "f265f4d3b0f8a43bd66f43e6b57ac728"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$/SEcdsJW6L7OMdTd.aQHluWTYpZ.KlUysr0cXb3h7iopAtmpymIm."], ["created_at", "2015-05-27 19:43:22.442391"], ["updated_at", "2015-05-27 19:43:22.442391"], ["auth_token", "f265f4d3b0f8a43bd66f43e6b57ac728"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:43:22.446594"], ["updated_at", "2015-05-27 19:43:22.446594"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190968/measures" for 127.0.0.1 at 2015-05-27 16:43:22 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190968"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "f265f4d3b0f8a43bd66f43e6b57ac728"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190968]]
Completed 200 OK in 3ms (Views: 0.5ms | ActiveRecord: 1.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190968]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Demand', '2015-05-27 19:44:12', '2015-05-27 19:44:12', 980190962, 298486374)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "created_at", "updated_at", "id", "user_id") VALUES ('MyText', 'Generation', '2015-05-27 19:44:12', '2015-05-27 19:44:12', 298486374, 980190962)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-05-27 19:44:12', '2015-05-27 19:44:12', 980190962)
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-05-27 19:44:12', '2015-05-27 19:44:12', 298486374)[0m
  [1m[35m (3.8ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.5ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "28433256559eda54be5bedca0ad6256f"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$1lM9/vgVggwlu/EP/epQF.ZP2AcCCf6wck.lYG6ELp4B9PuJoOZjq"], ["created_at", "2015-05-27 19:44:13.007775"], ["updated_at", "2015-05-27 19:44:13.007775"], ["auth_token", "28433256559eda54be5bedca0ad6256f"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:44:13.025637"], ["updated_at", "2015-05-27 19:44:13.025637"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-05-27 16:44:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "28433256559eda54be5bedca0ad6256f\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 15ms (Views: 0.2ms | ActiveRecord: 0.6ms)
  [1m[35mMeasure Load (1.1ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "531dca174f2510186738c328f20e5cc2"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5OaH7HNBvMlGt8/zxo5Z1.2OoKASRlE0LucaG4cr3buoRHh3zZoZO"], ["created_at", "2015-05-27 19:44:13.112145"], ["updated_at", "2015-05-27 19:44:13.112145"], ["auth_token", "531dca174f2510186738c328f20e5cc2"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:44:13.116611"], ["updated_at", "2015-05-27 19:44:13.116611"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-05-27 16:44:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "531dca174f2510186738c328f20e5cc2"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 3ms (Views: 1.1ms | ActiveRecord: 1.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f916f96f49b84a9e6e8de1a0be680db"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$M8aHCtlbITMmdN6V3rTEfuQBL1s8.hqC/EVZYnvOBOqwu1wMigBIy"], ["created_at", "2015-05-27 19:44:13.147652"], ["updated_at", "2015-05-27 19:44:13.147652"], ["auth_token", "6f916f96f49b84a9e6e8de1a0be680db"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:44:13.151497"], ["updated_at", "2015-05-27 19:44:13.151497"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-05-27 16:44:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f916f96f49b84a9e6e8de1a0be680db"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "774c1e489d928f565339e8c4aa5140d3"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$I3qFXv12fBCWyNf9lfcjROR0URfXuHy7JK.w8Vh8qQ74iaKRGB8mG"], ["created_at", "2015-05-27 19:44:13.186465"], ["updated_at", "2015-05-27 19:44:13.186465"], ["auth_token", "774c1e489d928f565339e8c4aa5140d3"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:44:13.191806"], ["updated_at", "2015-05-27 19:44:13.191806"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-05-27 16:44:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "774c1e489d928f565339e8c4aa5140d3"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "users" WHERE "users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "4ac75ff76c476014866674f31ad35de1"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$CVJ4CrdFBBpubyUPdrNHluwYCGdxrZ/8.7k6iYQXkDGf.GFyOY60."], ["created_at", "2015-05-27 19:44:13.223858"], ["updated_at", "2015-05-27 19:44:13.223858"], ["auth_token", "4ac75ff76c476014866674f31ad35de1"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["created_at", "2015-05-27 19:44:13.230253"], ["updated_at", "2015-05-27 19:44:13.230253"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190967/measures" for 127.0.0.1 at 2015-05-27 16:44:13 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190967}, "subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."auth_token" = $1 LIMIT 1  [["auth_token", "4ac75ff76c476014866674f31ad35de1"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190967], ["watts", 65], ["created_at", "2015-05-27 19:44:13.240190"], ["updated_at", "2015-05-27 19:44:13.240190"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 9ms (Views: 0.3ms | ActiveRecord: 2.1ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "measures" WHERE "measures"."id" = $1  [["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "users" WHERE "users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "users" WHERE "users"."id" = $1  [["id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  Rendered welcome/_general_status.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_navigation_links.html.erb (1.0ms)
  Rendered layouts/_header.html.erb (3.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_right_side_bar.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 24ms (Views: 20.6ms | ActiveRecord: 0.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "circuits" ("user_id", "description", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["user_id", 980190962], ["description", "MyText"], ["created_at", "2015-05-27 19:44:13.306946"], ["updated_at", "2015-05-27 19:44:13.306946"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/980190968
Completed 302 Found in 8ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 298486374]]
  Rendered circuits/show.html.erb within layouts/application (8.7ms)
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered layouts/_navigation_links.html.erb (1.7ms)
  Rendered layouts/_header.html.erb (2.2ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 18ms (Views: 15.2ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (7.3ms)
  Rendered circuits/edit.html.erb within layouts/application (8.6ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 15ms (Views: 12.0ms | ActiveRecord: 0.8ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits" WHERE "circuits"."user_id" = $1  [["user_id", 980190962]]
  Rendered circuits/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.0ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 7.0ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand", "user_id"=>"298486374"}, "id"=>"980190962"}
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/980190962
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "users".* FROM "users" WHERE "users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "users".* FROM "users" WHERE "users"."id" = $1  ORDER BY "users"."id" ASC LIMIT 1  [["id", 980190962]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/new.html.erb within layouts/application (2.8ms)
  Rendered layouts/_navigation_links.html.erb (0.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_right_side_bar.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.1ms | ActiveRecord: 0.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (32.7ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[36m (297.1ms)[0m  [1mDROP DATABASE IF EXISTS "solar_test"[0m
  [1m[35m (1033.0ms)[0m  CREATE DATABASE "solar_test" ENCODING = 'unicode'
  [1m[36mSQL (0.7ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (119.9ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (63.2ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (75.6ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (110.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (73.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (73.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (9.1ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (83.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (60.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (9.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (10.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (10.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (10.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (23.6ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
  [1m[36mFixture Delete (1.0ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:12', '2015-07-22 16:57:12', 980190962)
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:12', '2015-07-22 16:57:12', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (26.9ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (19.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:12', '2015-07-22 16:57:12', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:12', '2015-07-22 16:57:12', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (12.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (6.6ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (6.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.9ms)[0m  INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (12.7ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (12.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (6.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (10.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (9.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (12.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (10.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (13.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.3ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (10.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 16:57:13', '2015-07-22 16:57:13', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (10.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.1ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (3.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.7ms)[0m  SELECT "public"."users"."schema_name" FROM "public"."users"
  [1m[36m (0.4ms)[0m  [1mSELECT "public"."users"."schema_name" FROM "public"."users"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.9ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.7ms)[0m  SELECT "public"."users"."schema_name" FROM "public"."users"
  [1m[36m (0.4ms)[0m  [1mSELECT "public"."users"."schema_name" FROM "public"."users"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (13.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (10.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (10.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (9.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (13.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.2ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (10.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (8.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (7.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (4.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (12.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mMeasure Load (1.0ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.9ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (12.7ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (1.1ms)[0m  INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (10.1ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.0ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (11.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (6.2ms)[0m  [1mALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (8.2ms)[0m  ALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (4.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.2ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)[0m
PG::UndefinedColumn: ERROR:  column "user" of relation "circuits" does not exist
LINE 1: INSERT INTO "circuits" ("user", "description", "type", "crea...
                                ^
: INSERT INTO "circuits" ("user", "description", "type", "created_at", "updated_at", "id") VALUES ('two', 'MyText', 'Demand', '2015-07-22 17:48:05', '2015-07-22 17:48:05', 980190962)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (6.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 17:53:35', '2015-07-22 17:53:35', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 17:53:35', '2015-07-22 17:53:35', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', '2015-07-22 17:53:35', '2015-07-22 17:53:35', 980190962)
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "auth_token", "created_at", "updated_at", "id") VALUES ('Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', '2015-07-22 17:53:35', '2015-07-22 17:53:35', 298486374)[0m
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
Completed 500 Internal Server Error in 21ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  Rendered circuits/index.html.erb within layouts/application (18.8ms)
  Rendered layouts/_header.html.erb (3.6ms)
  Rendered layouts/_sidebar.html.erb (3.2ms)
  Rendered layouts/_alerts.html.erb (1.1ms)
  Rendered layouts/_footer.html.erb (0.8ms)
Completed 200 OK in 139ms (Views: 134.6ms | ActiveRecord: 2.6ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 980190962]]
Completed 500 Internal Server Error in 25ms (ActiveRecord: 1.6ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 13ms (ActiveRecord: 4.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  Rendered circuits/_graphs.html.erb (1.2ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  Rendered circuits/show.html.erb within layouts/application (16.2ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 41ms (Views: 33.0ms | ActiveRecord: 3.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "bc31a54f380192a97254cdab7f6b6dff"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ZPygmSKdWBepg2NkQdh.weJujXRYbjZOefGsgiHmiyRI3PWBtqrju"], ["created_at", "2015-07-22 17:53:36.072303"], ["updated_at", "2015-07-22 17:53:36.072303"], ["auth_token", "bc31a54f380192a97254cdab7f6b6dff"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8be489adfabdddc4c8381041f5311477"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$I7z6ePF1XRjIr.0xQdBF0ewE0CmcR20xAdZC3i9A9.MH78lEcvhxS"], ["created_at", "2015-07-22 17:53:36.106039"], ["updated_at", "2015-07-22 17:53:36.106039"], ["auth_token", "8be489adfabdddc4c8381041f5311477"]]
  [1m[36m (0.4ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "787c3b1f5aad50c946b6a8b74c579d77"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$cd4RmyMTwy5z..xNigaJmec7f3MnkPpoG5JMqMFBgQn4EwhqRROoi"], ["created_at", "2015-07-22 17:53:36.138314"], ["updated_at", "2015-07-22 17:53:36.138314"], ["auth_token", "787c3b1f5aad50c946b6a8b74c579d77"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "fb077d364eb5a1d872f78d19c6426d16"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ERonclV/bBMOE7NOEo4Y0OoN67ViJnNef3QHARPTEH7C2/h6unUuS"], ["created_at", "2015-07-22 17:53:36.164173"], ["updated_at", "2015-07-22 17:53:36.164173"], ["auth_token", "fb077d364eb5a1d872f78d19c6426d16"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "910b11d0fb8031f3640dc202e47f7b6a"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$//iO4bwycoPr02WSAC/G..A5q9M.RgV2nPcOiMmgnqotzN3ShS2.y"], ["created_at", "2015-07-22 17:53:36.189549"], ["updated_at", "2015-07-22 17:53:36.189549"], ["auth_token", "910b11d0fb8031f3640dc202e47f7b6a"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 980190962]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 980190962]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mUser Load (0.7ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           .circuits,                                                                                           .measures                                                                                            WHERE                                                                                                                   users.id = 980190962 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
PG::SyntaxError: ERROR:  syntax error at or near "."
LINE 1: ...                                                  .circuits,...
                                                             ^
: SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           .circuits,                                                                                           .measures                                                                                            WHERE                                                                                                                   users.id = 980190962 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
Completed 500 Internal Server Error in 18ms (ActiveRecord: 4.7ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (24.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 17:59:30', '2015-07-22 17:59:30', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 17:59:30', '2015-07-22 17:59:30', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 17:59:30', '2015-07-22 17:59:30')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 17:59:30', '2015-07-22 17:59:30')[0m
  [1m[35m (16.4ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "63032e86127cf661b5d83b56988cb84c"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PqHTyGInZ9FDrityvTtHk.6MbSuzTa9lU66ovsMURRapi8lYQ6Ag."], ["created_at", "2015-07-22 17:59:30.858745"], ["updated_at", "2015-07-22 17:59:30.858745"], ["auth_token", "63032e86127cf661b5d83b56988cb84c"]]
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.8ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3db703588ac46c2c86b58897168442a9"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$iT/232QHIspivsyA3XPZM..Nkv8n8Wdbk9hBrvPROYkiIv3y1DQOi"], ["created_at", "2015-07-22 17:59:30.926361"], ["updated_at", "2015-07-22 17:59:30.926361"], ["auth_token", "3db703588ac46c2c86b58897168442a9"]]
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "abf0d1763b243ceb18a93b6abcadf953"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$gi2HXxmO6pwPQzVhZYeu4O43wlOlbBEZ.sdC9iJ1aimJ2X8q.LCzi"], ["created_at", "2015-07-22 17:59:30.952753"], ["updated_at", "2015-07-22 17:59:30.952753"], ["auth_token", "abf0d1763b243ceb18a93b6abcadf953"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (2.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c37dcf134f8ee7077b1d2247cf15fbdd"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$qC4.A1.QjdG4URIy34nXheY3bSIxEpvcKKd1RW3V80XiZhci2vJoq"], ["created_at", "2015-07-22 17:59:30.981353"], ["updated_at", "2015-07-22 17:59:30.981353"], ["auth_token", "c37dcf134f8ee7077b1d2247cf15fbdd"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "be3c8245958e6a684708611e11e5d5d1"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bxn8x0rNSYBpmDWqU7P8jurh1crVOGkN6S7kn/8/b50xM.RbpT8kG"], ["created_at", "2015-07-22 17:59:31.013213"], ["updated_at", "2015-07-22 17:59:31.013213"], ["auth_token", "be3c8245958e6a684708611e11e5d5d1"]]
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.5ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.6ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (5.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.6ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.5ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.8ms)[0m  SELECT "public"."users"."schema_name" FROM "public"."users"
  [1m[36m (0.4ms)[0m  [1mSELECT "public"."users"."schema_name" FROM "public"."users"[0m
  [1m[35m (73.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (73.7ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to DeviseCreateUsers (20150511152613)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (90.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) 
  [1m[36m (50.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (40.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150511152613"]]
  [1m[35m (24.4ms)[0m  COMMIT
Migrating to CreateCircuits (20150513183751)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (95.9ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (52.0ms)[0m  [1mCREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")[0m
  [1m[35m (2.1ms)[0m  ALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_0b99c6f514"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")

  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150513183751"]]
  [1m[35m (25.3ms)[0m  COMMIT
Migrating to Measure (20150522130847)
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35m (55.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (54.5ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures"  ("circuit_id")[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150522130847"]]
  [1m[35m (16.2ms)[0m  COMMIT
Migrating to AddAlarmTimeToCircuits (20150612150456)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (0.9ms)[0m  ALTER TABLE "circuits" ADD "alarm_time" integer
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150612150456"]]
  [1m[35m (14.9ms)[0m  COMMIT
Migrating to SetAlarmsInCircuits (20150612152327)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150612152327"]]
  [1m[35m (11.3ms)[0m  COMMIT
Migrating to AddSchemaNameToUser (20150720181315)
  [1m[36m (1.6ms)[0m  [1mBEGIN[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "users" ADD "schema_name" character varying
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150720181315"]]
  [1m[35m (20.2ms)[0m  COMMIT
Migrating to RemoveUserIdFromCircuits (20150720183845)
  [1m[36m (0.5ms)[0m  [1mBEGIN[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "circuits" DROP "user_id"
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES ($1)[0m  [["version", "20150720183845"]]
  [1m[35m (12.6ms)[0m  COMMIT
  [1m[36m (71.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (63.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to DeviseCreateUsers (20150511152613)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (95.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp) [0m
  [1m[35m (39.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150511152613"]]
  [1m[36m (24.5ms)[0m  [1mCOMMIT[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (93.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "user_id" integer, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.7ms)[0m  CREATE  INDEX  "index_circuits_on_user_id" ON "circuits"  ("user_id")
  [1m[36m (3.4ms)[0m  [1mALTER TABLE "circuits" ADD CONSTRAINT "fk_rails_0b99c6f514"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150513183751"]]
  [1m[36m (20.5ms)[0m  [1mCOMMIT[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (59.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (41.6ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures"  ("circuit_id")
  [1m[36m (2.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150522130847"]]
  [1m[36m (19.5ms)[0m  [1mCOMMIT[0m
Migrating to AddAlarmTimeToCircuits (20150612150456)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "circuits" ADD "alarm_time" integer[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150612150456"]]
  [1m[36m (2.7ms)[0m  [1mCOMMIT[0m
Migrating to SetAlarmsInCircuits (20150612152327)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150612152327"]]
  [1m[36m (7.4ms)[0m  [1mCOMMIT[0m
Migrating to AddSchemaNameToUser (20150720181315)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "users" ADD "schema_name" character varying[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150720181315"]]
  [1m[36m (7.6ms)[0m  [1mCOMMIT[0m
Migrating to RemoveUserIdFromCircuits (20150720183845)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "circuits" DROP "user_id"[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150720183845"]]
  [1m[36m (4.4ms)[0m  [1mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (84.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:02:03', '2015-07-22 18:02:03', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:02:03', '2015-07-22 18:02:03', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:02:03', '2015-07-22 18:02:03')
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:02:03', '2015-07-22 18:02:03')[0m
  [1m[35m (12.1ms)[0m  COMMIT
  [1m[36m (9.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.0ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (3.6ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (67.8ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 110ms (Views: 93.8ms | ActiveRecord: 9.3ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1f163462c353bd817e7ec353e600aaf9"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$FHKtxf2o3mThuolWSw7f7ujoItF11qUb.hyowIfyP2AtQCztlzIXu"], ["created_at", "2015-07-22 18:02:03.842171"], ["updated_at", "2015-07-22 18:02:03.842171"], ["auth_token", "1f163462c353bd817e7ec353e600aaf9"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (1.0ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8a38546d6d4e69433594ebef30083cd4"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PQykmIIk/.ZHUJCE04sx5uj3VSUFHxeiL8FN8s8PgTrhgBXkgrYtu"], ["created_at", "2015-07-22 18:02:03.914214"], ["updated_at", "2015-07-22 18:02:03.914214"], ["auth_token", "8a38546d6d4e69433594ebef30083cd4"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7b9538bbbcdad988e0aac367350bbe84"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$DxvQL8kLUBOnBg/Gd2CGHOGeW6ojCwLM89rQuTbpCPTUnxVvnbMlK"], ["created_at", "2015-07-22 18:02:03.940280"], ["updated_at", "2015-07-22 18:02:03.940280"], ["auth_token", "7b9538bbbcdad988e0aac367350bbe84"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "07dc0a5f952230c77f1ea658965a8bb4"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$/MmOyeKV6tchVFOpOuTiSu/HJc/uW.C3vIT7ZnXEkqof4FWye4bhq"], ["created_at", "2015-07-22 18:02:03.968199"], ["updated_at", "2015-07-22 18:02:03.968199"], ["auth_token", "07dc0a5f952230c77f1ea658965a8bb4"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "11410a88c84553e698d159fead06215d"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Jg55YbJzKZ2WzFCIRAvBs.NJfIsSVaCVnd1YsY5dbzsxe9uFX9jE6"], ["created_at", "2015-07-22 18:02:03.991781"], ["updated_at", "2015-07-22 18:02:03.991781"], ["auth_token", "11410a88c84553e698d159fead06215d"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (3.0ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 6.5ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (1.1ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (28.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:09:59', '2015-07-22 18:09:59', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:09:59', '2015-07-22 18:09:59', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:09:59', '2015-07-22 18:09:59')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:09:59', '2015-07-22 18:09:59')[0m
  [1m[35m (13.0ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.5ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.2ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (10.2ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 40ms (Views: 26.6ms | ActiveRecord: 7.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3f26c950e2d115857472be1823a99c73"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$aUNfwXdmPkfHLXxvlpC6O.ldghXLs2faqmd5daZ67aqq9TuHJoHwa"], ["created_at", "2015-07-22 18:09:59.957692"], ["updated_at", "2015-07-22 18:09:59.957692"], ["auth_token", "3f26c950e2d115857472be1823a99c73"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (1.0ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f00f0d9e29301fb591310a762eb75b87"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$TRSDqV7hwcMmT.pEO8bP0ukWwCS1XBkwAI6Wz74IW0hTZYtjDyley"], ["created_at", "2015-07-22 18:10:00.032323"], ["updated_at", "2015-07-22 18:10:00.032323"], ["auth_token", "f00f0d9e29301fb591310a762eb75b87"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6973d4c3dd18d35105b22e501c5299ed"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$BUKC.J/4Vo4PBnpKl.gihefYmrwbDx1amsenrFGmYlwpCSdzQEA7K"], ["created_at", "2015-07-22 18:10:00.060594"], ["updated_at", "2015-07-22 18:10:00.060594"], ["auth_token", "6973d4c3dd18d35105b22e501c5299ed"]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "40724d6d94d0305c3c15668bbdb203df"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$nAcCbItEvpchGCaewheOvOVtTV1arE/gx2AkBHB8btF47/nnLxab."], ["created_at", "2015-07-22 18:10:00.087453"], ["updated_at", "2015-07-22 18:10:00.087453"], ["auth_token", "40724d6d94d0305c3c15668bbdb203df"]]
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.2ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.4ms | ActiveRecord: 1.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (11.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:11:34', '2015-07-22 18:11:34', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:11:34', '2015-07-22 18:11:34', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:11:34', '2015-07-22 18:11:34')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:11:34', '2015-07-22 18:11:34')[0m
  [1m[35m (9.4ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.6ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 20ms (Views: 17.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (5.0ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (3.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (2.6ms)
  Rendered welcome/_month_status.html.erb (1.3ms)
  Rendered welcome/_bar_graph.html.erb (0.7ms)
  Rendered welcome/index.html.erb within layouts/application (13.1ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 27ms (Views: 15.5ms | ActiveRecord: 8.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (1.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:12:41', '2015-07-22 18:12:41', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:12:41', '2015-07-22 18:12:41', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:12:41', '2015-07-22 18:12:41')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:12:41', '2015-07-22 18:12:41')[0m
  [1m[35m (8.1ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (9.2ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (1.5ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 40ms (Views: 25.1ms | ActiveRecord: 8.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "17f9894c5292e0311f3069856efad340"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$RKTY5AoJq2uApXJHObzd..rIm4KDE.9GSSw0P4EvT.aUOT3xq6aX2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:12:41.861407"], ["updated_at", "2015-07-22 18:12:41.861407"], ["auth_token", "17f9894c5292e0311f3069856efad340"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:12:41.889327"], ["updated_at", "2015-07-22 18:12:41.889327"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 15:12:41 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "071b02cc69c0238c13fff9cba5ccf242"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Zldz1MMEuLUvmZKYjw/HwO5Ziybk5X/oGFQwYIVv28QJHsxodh5Jm"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:12:41.999934"], ["updated_at", "2015-07-22 18:12:41.999934"], ["auth_token", "071b02cc69c0238c13fff9cba5ccf242"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:12:42.007059"], ["updated_at", "2015-07-22 18:12:42.007059"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 15:12:42 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "ceb621f33d0deadb16581db0032bc0ed"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$d7e3vq/4XrPsG55QrlbDlePPtXD5bOSz.UTbsDLQ9QAfcCzO6ZSZy"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:12:42.038379"], ["updated_at", "2015-07-22 18:12:42.038379"], ["auth_token", "ceb621f33d0deadb16581db0032bc0ed"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:12:42.042222"], ["updated_at", "2015-07-22 18:12:42.042222"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 15:12:42 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5e715c1680e6334b266663b342ae36eb"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$rBZkpp35NOvxzeyBRVDZneodRJAEL4WrOnYQVAahIyR.qfvq7V/Z."], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:12:42.079025"], ["updated_at", "2015-07-22 18:12:42.079025"], ["auth_token", "5e715c1680e6334b266663b342ae36eb"]]
  [1m[36m (1.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:12:42.086607"], ["updated_at", "2015-07-22 18:12:42.086607"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 15:12:42 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 12ms (ActiveRecord: 2.6ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 8.5ms | ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.0ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.4ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5be23d58bfa9751c94ea192c683da24c"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$OVYe8OURG6VaVTT1fNl5Y.l7Q5R1.ofbhDd.E4HKPwvdYWGCjtvG."], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:12:42.231456"], ["updated_at", "2015-07-22 18:12:42.231456"], ["auth_token", "5be23d58bfa9751c94ea192c683da24c"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:12:42.236649"], ["updated_at", "2015-07-22 18:12:42.236649"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-22 15:12:42 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190967}, "subdomain"=>"api", "circuit_id"=>"980190967"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:28:22', '2015-07-22 18:28:22', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:28:22', '2015-07-22 18:28:22', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:28:22', '2015-07-22 18:28:22')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:28:22', '2015-07-22 18:28:22')[0m
  [1m[35m (11.6ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "22791b034cca445b2b6a18b0276e6119"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$oqygi9sf2.s3FxOgihwnAegAqVAFsegxmbc23WdbWg87rVcIB.V.2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:28:22.709835"], ["updated_at", "2015-07-22 18:28:22.709835"], ["auth_token", "22791b034cca445b2b6a18b0276e6119"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:28:22.741132"], ["updated_at", "2015-07-22 18:28:22.741132"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 15:28:22 -0300
  [1m[35mMeasure Load (1.0ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "56d4b241dfd3ee133c6bc279df81c3be"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Rel6gWf0xUgHKiVBilMev.n5ijYApTM6V1Yr4.TlcYFC5Gw9.AJpK"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:28:22.824879"], ["updated_at", "2015-07-22 18:28:22.824879"], ["auth_token", "56d4b241dfd3ee133c6bc279df81c3be"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:28:22.830351"], ["updated_at", "2015-07-22 18:28:22.830351"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 15:28:22 -0300
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b52b64ad6de1f47ebaf26efd2f9a34f6"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$AkrJRnSTRBIGlNfChF0O0.pMYnhrfWz5nfKg32KxGfmGFhf1x6HjO"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:28:22.873094"], ["updated_at", "2015-07-22 18:28:22.873094"], ["auth_token", "b52b64ad6de1f47ebaf26efd2f9a34f6"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:28:22.878784"], ["updated_at", "2015-07-22 18:28:22.878784"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 15:28:22 -0300
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (1.0ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "4416514b280e455da0bbed51a2df797a"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$omVmEMkgXg90MLGUmvfoz.BkUcZO7U2wGYlrPJcQkCX2JcJCP1cpG"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:28:22.919643"], ["updated_at", "2015-07-22 18:28:22.919643"], ["auth_token", "4416514b280e455da0bbed51a2df797a"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:28:22.925059"], ["updated_at", "2015-07-22 18:28:22.925059"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 15:28:22 -0300
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.7ms)
  Rendered layouts/_alerts.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 28ms (Views: 19.2ms | ActiveRecord: 2.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3af44846b8c41967027c8525c8cdaba4"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rZZ8K2Y6yOrB6jS.1lG6neujs0gdzdoe/4pAkf5QllTb4Azvuu.tW"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:28:23.070911"], ["updated_at", "2015-07-22 18:28:23.070911"], ["auth_token", "3af44846b8c41967027c8525c8cdaba4"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:28:23.078807"], ["updated_at", "2015-07-22 18:28:23.078807"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-22 15:28:23 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190967}, "subdomain"=>"api", "circuit_id"=>"980190967"}
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (2.2ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.8ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (8.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 18ms (Views: 11.2ms | ActiveRecord: 4.3ms)
  [1m[36m (0.7ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:30:13', '2015-07-22 18:30:13', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:30:13', '2015-07-22 18:30:13', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:30:13', '2015-07-22 18:30:13')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:30:13', '2015-07-22 18:30:13')[0m
  [1m[35m (3.4ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "033adedc3aad9f6f398a6c743059a868"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$sd9f7iJcEAcm/WQf8HAB4./fUSvq4xQqQe.Jm4JIREzjXm8ZJB3Si"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:30:13.459188"], ["updated_at", "2015-07-22 18:30:13.459188"], ["auth_token", "033adedc3aad9f6f398a6c743059a868"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:30:13.496587"], ["updated_at", "2015-07-22 18:30:13.496587"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 15:30:13 -0300
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "3d0359c192a7b18b749940fbd22ba766"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$fTWWnhKKpM3IIWpu/VoyeOruokV.MZumVw/RKw.O3ZqWzcXcu6xlC"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:30:13.572283"], ["updated_at", "2015-07-22 18:30:13.572283"], ["auth_token", "3d0359c192a7b18b749940fbd22ba766"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:30:13.579761"], ["updated_at", "2015-07-22 18:30:13.579761"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 15:30:13 -0300
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "46b53f973155e13514b621ca8eb781fc"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$faX2boZn.nGfCGvmPuwvBOumJAmq2JgYir4b8Pok.iuMf36H95HdO"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:30:13.613350"], ["updated_at", "2015-07-22 18:30:13.613350"], ["auth_token", "46b53f973155e13514b621ca8eb781fc"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:30:13.619457"], ["updated_at", "2015-07-22 18:30:13.619457"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 15:30:13 -0300
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c684a2b26b3b658e1e478a99e266ff29"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$lxD4Ces0703jDkjqS4yZ1eKA6dRH7DwJAOQ7.LCdAaZLuZ.k.bi2S"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:30:13.650999"], ["updated_at", "2015-07-22 18:30:13.650999"], ["auth_token", "c684a2b26b3b658e1e478a99e266ff29"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:30:13.657236"], ["updated_at", "2015-07-22 18:30:13.657236"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 15:30:13 -0300
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a05f72e44d3c93af70c78be020e546fa"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$WnMtemWzzSPNT.A854iywed8gc1bBVy11nuvBj./0yGFAxB5DUx3K"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:30:13.680436"], ["updated_at", "2015-07-22 18:30:13.680436"], ["auth_token", "a05f72e44d3c93af70c78be020e546fa"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:30:13.684912"], ["updated_at", "2015-07-22 18:30:13.684912"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-22 15:30:13 -0300
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.0ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.6ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.2ms)
  Rendered welcome/_month_status.html.erb (0.5ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (8.2ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 42ms (Views: 25.5ms | ActiveRecord: 7.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (1.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 9ms (Views: 5.7ms | ActiveRecord: 1.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:31:55', '2015-07-22 18:31:55', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:31:55', '2015-07-22 18:31:55', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:31:55', '2015-07-22 18:31:55')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:31:55', '2015-07-22 18:31:55')[0m
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (8.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.0ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (5.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.3ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.3ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (9.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 44ms (Views: 25.0ms | ActiveRecord: 8.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 9ms (ActiveRecord: 2.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (1.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.1ms | ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a08fd6cbb7e06930225d77379dd974ac"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$8ngILgBqIov5XnRJEiBMCuUaWM5/3YAlnZRT9clrj.GdvaTVTa5Ym"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:31:56.219177"], ["updated_at", "2015-07-22 18:31:56.219177"], ["auth_token", "a08fd6cbb7e06930225d77379dd974ac"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:31:56.227730"], ["updated_at", "2015-07-22 18:31:56.227730"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 15:31:56 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f34b3ae2e6c116239a43ada458eb8331"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$BPosR3LppsYq.xcujmkPSOaQti9MH0d7LzpWsJvtIhhf6CFzYchWi"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:31:56.294762"], ["updated_at", "2015-07-22 18:31:56.294762"], ["auth_token", "f34b3ae2e6c116239a43ada458eb8331"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:31:56.299975"], ["updated_at", "2015-07-22 18:31:56.299975"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 15:31:56 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "783117b420d496ebbf08880cf4af5127"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$XyT6iw1oW/Xd6x.E/Hd4uuIITiqB8kNf1OSRWrFQCSLp2NTaUluYO"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:31:56.336746"], ["updated_at", "2015-07-22 18:31:56.336746"], ["auth_token", "783117b420d496ebbf08880cf4af5127"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:31:56.341624"], ["updated_at", "2015-07-22 18:31:56.341624"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 15:31:56 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0d8fabeb8a5a4ebe8ff5a5e3462ba57b"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$M.x4aXRVFJlvE8z/2hZ8YuHCu52JJold.6taaliTG66gJ3uNM8o7i"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:31:56.373845"], ["updated_at", "2015-07-22 18:31:56.373845"], ["auth_token", "0d8fabeb8a5a4ebe8ff5a5e3462ba57b"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:31:56.381542"], ["updated_at", "2015-07-22 18:31:56.381542"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 15:31:56 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "6add4f88431f4a1d03a2c632f9b7a652"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$eG8mFywVfZQkrNervuNdc.vynu.bdaVYpOjeD2iYVeNFjOlBy0dvC"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:31:56.414062"], ["updated_at", "2015-07-22 18:31:56.414062"], ["auth_token", "6add4f88431f4a1d03a2c632f9b7a652"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:31:56.417792"], ["updated_at", "2015-07-22 18:31:56.417792"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-22 15:31:56 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 18:40:20', '2015-07-22 18:40:20', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 18:40:20', '2015-07-22 18:40:20', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 18:40:20', '2015-07-22 18:40:20')
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 18:40:20', '2015-07-22 18:40:20')[0m
  [1m[35m (11.9ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.6ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.1ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.6ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (11.3ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 41ms (Views: 26.6ms | ActiveRecord: 8.4ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d7d2e39ad8f4cf6dc7e1059634f1950d"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$cOW0hLxAxp97cNFVdzrUee6zuwuI1s19MvsDgX0qWouV2GEdDSJ5e"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:40:20.868119"], ["updated_at", "2015-07-22 18:40:20.868119"], ["auth_token", "d7d2e39ad8f4cf6dc7e1059634f1950d"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:40:20.905217"], ["updated_at", "2015-07-22 18:40:20.905217"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 15:40:20 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e4707c4f6ffc75f00606aa31ce3f002f"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PlcQopbD5jT3aymX6dXKGePO0GiYsiAo4apEHdqAXzLyQ6igAHa.q"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:40:20.993653"], ["updated_at", "2015-07-22 18:40:20.993653"], ["auth_token", "e4707c4f6ffc75f00606aa31ce3f002f"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:40:20.999115"], ["updated_at", "2015-07-22 18:40:20.999115"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 15:40:21 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4bb460dfc03684a1c3d6a3f447639468"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$JHQNgPJJPPBK5DGCDqpiPOvY6VnzvUZEjN0HkAZJ37qMr2J8SS4DW"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:40:21.036975"], ["updated_at", "2015-07-22 18:40:21.036975"], ["auth_token", "4bb460dfc03684a1c3d6a3f447639468"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:40:21.041813"], ["updated_at", "2015-07-22 18:40:21.041813"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 15:40:21 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (3.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0fe79a3c2484aa30cb5b2cbd1ce302cc"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$vxtklES62JR9BiKhNYi7cOjSnRRon1gX.JYHSxFlcDfK8njRQ91Mq"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:40:21.079866"], ["updated_at", "2015-07-22 18:40:21.079866"], ["auth_token", "0fe79a3c2484aa30cb5b2cbd1ce302cc"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:40:21.086058"], ["updated_at", "2015-07-22 18:40:21.086058"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 15:40:21 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1382df4b7e5458776d3e43902170fe8a"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$NJ.ykJBsXwKl0m7hA9igsedML7ddPC1toMMFfW7p26E3XPblwlwsi"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 18:40:21.118832"], ["updated_at", "2015-07-22 18:40:21.118832"], ["auth_token", "1382df4b7e5458776d3e43902170fe8a"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 18:40:21.124520"], ["updated_at", "2015-07-22 18:40:21.124520"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-22 15:40:21 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.8ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 6.8ms | ActiveRecord: 2.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (50.1ms)
  Rendered circuits/new.html.erb within layouts/application (64.7ms)
Completed 500 Internal Server Error in 90ms (ActiveRecord: 1.4ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "deb2177fa04cbea4c553c0bfd7c989a6"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$QYBg.C26HXIgceO8kG3Z2.NvrjktVK7K4JbYJxz/nYh6Yo/c0mxQC"], ["created_at", "2015-07-22 18:59:20.786774"], ["updated_at", "2015-07-22 18:59:20.786774"], ["auth_token", "deb2177fa04cbea4c553c0bfd7c989a6"]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "99c6b445722b134edaecfa5285150a8f"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$iBzECub22pN0SF0JWM3QLORWFQdRVo0fW/O7zxFIgjCM11hArOmQW"], ["created_at", "2015-07-22 19:05:43.737047"], ["updated_at", "2015-07-22 19:05:43.737047"], ["auth_token", "99c6b445722b134edaecfa5285150a8f"]]
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" IS NULL LIMIT 1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "68eba1957d5fd1023f49d3fb76c87fce"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rSJJb2APBhD4T5mKmaCKnuDxfdgdWXlmmoE/62AbGaGrkaeHGG8Ty"], ["created_at", "2015-07-22 19:07:59.461860"], ["updated_at", "2015-07-22 19:07:59.461860"], ["auth_token", "68eba1957d5fd1023f49d3fb76c87fce"]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (20.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 19:12:23', '2015-07-22 19:12:23', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 19:12:23', '2015-07-22 19:12:23', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 19:12:23', '2015-07-22 19:12:23')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 19:12:23', '2015-07-22 19:12:23')[0m
  [1m[35m (12.8ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.5ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (10.6ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 30ms (Views: 20.7ms | ActiveRecord: 3.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b1e60bb7300c56305975098965d1db3d"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ewpLO1EThqkFSQrgaFpRMuLjR2jJ4lzkYjEc3AtcoD55WmYmDmE3S"], ["created_at", "2015-07-22 19:12:23.243433"], ["updated_at", "2015-07-22 19:12:23.243433"], ["auth_token", "b1e60bb7300c56305975098965d1db3d"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ewpLO1EThqkFSQrgaFpRMuLjR2jJ4lzkYjEc3AtcoD55WmYmDmE3S"], ["created_at", "2015-07-22 19:12:23.243433"], ["updated_at", "2015-07-22 19:12:23.243433"], ["auth_token", "b1e60bb7300c56305975098965d1db3d"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (1.0ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (122.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.4ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (96.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (49.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:12:23.808404"], ["updated_at", "2015-07-22 19:12:23.808404"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-22 16:12:23 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 6.8ms | ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (11.5ms)
  Rendered circuits/new.html.erb within layouts/application (12.5ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "fe35c3fbcec0ff60301630d91af85e86"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$SlmzvEAkuNKpwsF0queVzuuS7CodEoP.a1MAFcJ97PXQ/QZpvPmAK"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:12:23.959864"], ["updated_at", "2015-07-22 19:12:23.959864"], ["auth_token", "fe35c3fbcec0ff60301630d91af85e86"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:12:23.964514"], ["updated_at", "2015-07-22 19:12:23.964514"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 16:12:23 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "3054e030a32cd085cdbdb8873af0742c"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Nn90wc4jKzLS2ik7ut06xOhlpA8pMGmZMx0PXQi9R5sg5AU.Rz.WW"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:12:24.016534"], ["updated_at", "2015-07-22 19:12:24.016534"], ["auth_token", "3054e030a32cd085cdbdb8873af0742c"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:12:24.021385"], ["updated_at", "2015-07-22 19:12:24.021385"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 16:12:24 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (1.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "7b835518fe8ba8efd2d661d153e623b6"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$sWYLEwj4sD9pZSNCOnM6fOI996DtAoVPnOIiYSufA9O2hfYpbVvSy"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:12:24.065199"], ["updated_at", "2015-07-22 19:12:24.065199"], ["auth_token", "7b835518fe8ba8efd2d661d153e623b6"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:12:24.071276"], ["updated_at", "2015-07-22 19:12:24.071276"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 16:12:24 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d6b45f151bcccede4e86bea6e93a57d1"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$8vRPknsJiUZWA1yMWNMxCeKwXxUpEV40puCigL4W1mB33w3LF/48e"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:12:24.104152"], ["updated_at", "2015-07-22 19:12:24.104152"], ["auth_token", "d6b45f151bcccede4e86bea6e93a57d1"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:12:24.110083"], ["updated_at", "2015-07-22 19:12:24.110083"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 16:12:24 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "7caffff82abad4d995c8d67d21561fc8"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2NSSQPb7GM599rjt0WEgau7VyVaXAXOR/ljpYCMO287eNc8rZk71m"], ["created_at", "2015-07-22 19:13:16.356539"], ["updated_at", "2015-07-22 19:13:16.356539"], ["auth_token", "7caffff82abad4d995c8d67d21561fc8"]]
  [1m[35mSQL (1.2ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2NSSQPb7GM599rjt0WEgau7VyVaXAXOR/ljpYCMO287eNc8rZk71m"], ["created_at", "2015-07-22 19:13:16.356539"], ["updated_at", "2015-07-22 19:13:16.356539"], ["auth_token", "7caffff82abad4d995c8d67d21561fc8"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (1.3ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.6ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (96.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.3ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (42.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (85.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.5ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (45.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (26.0ms)[0m  COMMIT
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7caffff82abad4d995c8d67d21561fc8"]]
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (11.2ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 19:20:12', '2015-07-22 19:20:12', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 19:20:12', '2015-07-22 19:20:12', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 19:20:12', '2015-07-22 19:20:12')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 19:20:12', '2015-07-22 19:20:12')[0m
  [1m[35m (5.2ms)[0m  COMMIT
  [1m[36m (8.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.6ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.9ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.9ms)
  Rendered welcome/_month_status.html.erb (0.8ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (13.5ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 44ms (Views: 28.5ms | ActiveRecord: 8.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.2ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.1ms | ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (13.5ms)
  Rendered circuits/new.html.erb within layouts/application (15.5ms)
Completed 500 Internal Server Error in 24ms (ActiveRecord: 3.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "90e9cdcb7818ca7496b2e7c76141f42b"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$fjHUWSwWC08s9DraOVsIpOW3OhQr/V6JlmuEN9DKKN.TtMR2Edzwi"], ["created_at", "2015-07-22 19:20:12.811482"], ["updated_at", "2015-07-22 19:20:12.811482"], ["auth_token", "90e9cdcb7818ca7496b2e7c76141f42b"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$fjHUWSwWC08s9DraOVsIpOW3OhQr/V6JlmuEN9DKKN.TtMR2Edzwi"], ["created_at", "2015-07-22 19:20:12.811482"], ["updated_at", "2015-07-22 19:20:12.811482"], ["auth_token", "90e9cdcb7818ca7496b2e7c76141f42b"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (99.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (63.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (41.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (84.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (76.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (48.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (52.8ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:20:13.379218"], ["updated_at", "2015-07-22 19:20:13.379218"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/2/measures" for 127.0.0.1 at 2015-07-22 16:20:13 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>2}, "subdomain"=>"api", "circuit_id"=>"2"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "7ea942178421238ee147fdcb6ac8731b"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PXH9dELCU6K78tSdUQ9i9.WfVCnFukeoGdyuLr/l7QvuW.zQVngQ6"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:20:13.435623"], ["updated_at", "2015-07-22 19:20:13.435623"], ["auth_token", "7ea942178421238ee147fdcb6ac8731b"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:20:13.441453"], ["updated_at", "2015-07-22 19:20:13.441453"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 16:20:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1ba4a4795a63e21026e506560340749d"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$4gLdhkbFYgarZXcBTZ7fuuCdvnOYNOfurj/yolhjYsboURsKoXXPu"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:20:13.484952"], ["updated_at", "2015-07-22 19:20:13.484952"], ["auth_token", "1ba4a4795a63e21026e506560340749d"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:20:13.493764"], ["updated_at", "2015-07-22 19:20:13.493764"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 16:20:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "33e2c331d7f5ab4a141632632887e0ed"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VplZRH8UAydERa7fwMH13.aSPV0MFS3k38hpka59l.bt526ymtvc6"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:20:13.529295"], ["updated_at", "2015-07-22 19:20:13.529295"], ["auth_token", "33e2c331d7f5ab4a141632632887e0ed"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:20:13.533584"], ["updated_at", "2015-07-22 19:20:13.533584"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 16:20:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d6967151add6357252ce852ca76e6305"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Ycraw/vDMo36/VRcyxbJ9Oes4LktNg.Q86Ux7f5Ogvsz.RAlLMzHe"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 19:20:13.565782"], ["updated_at", "2015-07-22 19:20:13.565782"], ["auth_token", "d6967151add6357252ce852ca76e6305"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 19:20:13.574915"], ["updated_at", "2015-07-22 19:20:13.574915"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 16:20:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (10.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 20:53:23', '2015-07-22 20:53:23', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 20:53:23', '2015-07-22 20:53:23', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 20:53:23', '2015-07-22 20:53:23')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 20:53:23', '2015-07-22 20:53:23')[0m
  [1m[35m (9.7ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (2.5ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (13.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 37ms (Views: 24.6ms | ActiveRecord: 5.9ms)
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f1fdf80ea650c578aca2b5473f8dfe68"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$gAd8I.uPfkAATXKKbJSuo.TwVxcmD/KR.iQOqmSXAEOO0kPvfCMtK"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:53:23.812425"], ["updated_at", "2015-07-22 20:53:23.812425"], ["auth_token", "f1fdf80ea650c578aca2b5473f8dfe68"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:53:23.844084"], ["updated_at", "2015-07-22 20:53:23.844084"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 17:53:23 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7bdaa5774336bca56b7df457a70d94b0"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$upigGcq4zHoKTCE54sDzW.bdGpLRypTmnQyPJNHRKn5lfS174Yvm2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:53:23.908002"], ["updated_at", "2015-07-22 20:53:23.908002"], ["auth_token", "7bdaa5774336bca56b7df457a70d94b0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:53:23.912114"], ["updated_at", "2015-07-22 20:53:23.912114"]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 17:53:23 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1b5be98143267d16f2f267619057f880"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$.241Esi0kjgIlcyeVf4Ea.IyBy.8pvg41oFQqWZSCJhn7pxTF3CIS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:53:23.938727"], ["updated_at", "2015-07-22 20:53:23.938727"], ["auth_token", "1b5be98143267d16f2f267619057f880"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:53:23.942782"], ["updated_at", "2015-07-22 20:53:23.942782"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 17:53:23 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "703a46487866f892810b9e199a027d8a"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Rtj00z9QWmAfGXnE569YTOLoEuTcd7HlKnVRLvSTBF0RcXKn5s58q"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:53:23.971484"], ["updated_at", "2015-07-22 20:53:23.971484"], ["auth_token", "703a46487866f892810b9e199a027d8a"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:53:23.977388"], ["updated_at", "2015-07-22 20:53:23.977388"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 17:53:23 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 6.0ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (10.4ms)
  Rendered circuits/new.html.erb within layouts/application (11.6ms)
Completed 500 Internal Server Error in 17ms (ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.3ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "015c91fac4209a7429e2f20856a30e6f"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lDruNfEzDafzAfx0sMmFquvLYxmiv2LiMEG1Wf0xHiFQ6/fxu5v6m"], ["created_at", "2015-07-22 20:53:24.133045"], ["updated_at", "2015-07-22 20:53:24.133045"], ["auth_token", "015c91fac4209a7429e2f20856a30e6f"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lDruNfEzDafzAfx0sMmFquvLYxmiv2LiMEG1Wf0xHiFQ6/fxu5v6m"], ["created_at", "2015-07-22 20:53:24.133045"], ["updated_at", "2015-07-22 20:53:24.133045"], ["auth_token", "015c91fac4209a7429e2f20856a30e6f"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.6ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (104.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (76.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (48.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (94.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (61.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (49.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (51.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (1.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:53:24.731480"], ["updated_at", "2015-07-22 20:53:24.731480"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/3/measures" for 127.0.0.1 at 2015-07-22 17:53:24 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>3}, "subdomain"=>"api", "circuit_id"=>"3"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 3]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 3]]
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (1.1ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 20:54:39', '2015-07-22 20:54:39', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 20:54:39', '2015-07-22 20:54:39', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 20:54:39', '2015-07-22 20:54:39')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 20:54:39', '2015-07-22 20:54:39')[0m
  [1m[35m (13.2ms)[0m  COMMIT
  [1m[36m (8.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 20:54:39.731165"], ["updated_at", "2015-07-22 20:54:39.731165"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/4
Completed 302 Found in 17ms (ActiveRecord: 3.9ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (8.9ms)
  Rendered circuits/new.html.erb within layouts/application (13.7ms)
Completed 500 Internal Server Error in 26ms (ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (4.0ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_sidebar.html.erb (1.7ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 17ms (Views: 13.7ms | ActiveRecord: 1.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "4dab493eca6483694f7e7c227cea71c8"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Ge/Rm9SLF7RdfL7kUOyPuukQY808Zgpyvv1wxMGMzq1dsYH5EV8iu"], ["created_at", "2015-07-22 20:54:39.871752"], ["updated_at", "2015-07-22 20:54:39.871752"], ["auth_token", "4dab493eca6483694f7e7c227cea71c8"]]
  [1m[35mSQL (1.3ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Ge/Rm9SLF7RdfL7kUOyPuukQY808Zgpyvv1wxMGMzq1dsYH5EV8iu"], ["created_at", "2015-07-22 20:54:39.871752"], ["updated_at", "2015-07-22 20:54:39.871752"], ["auth_token", "4dab493eca6483694f7e7c227cea71c8"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (95.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (76.1ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (49.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (94.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (64.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (49.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:54:40.463062"], ["updated_at", "2015-07-22 20:54:40.463062"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/5/measures" for 127.0.0.1 at 2015-07-22 17:54:40 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>5}, "subdomain"=>"api", "circuit_id"=>"5"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (1.0ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 5]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 5]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.0ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (1.0ms)
  Rendered welcome/_bar_graph.html.erb (0.8ms)
  Rendered welcome/index.html.erb within layouts/application (10.4ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 24ms (Views: 14.2ms | ActiveRecord: 6.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "434e226aa7171f20b3b4fd9396d9b9cb"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$WJ8rSvQ0Lev0XYquDhE36.QWVAQ77Rl2s1qpzKkCYzWOpu9HYJRMq"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:54:40.558610"], ["updated_at", "2015-07-22 20:54:40.558610"], ["auth_token", "434e226aa7171f20b3b4fd9396d9b9cb"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:54:40.563698"], ["updated_at", "2015-07-22 20:54:40.563698"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 17:54:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "169f5f608777c28e4ec8d6af40b13871"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$lPuhoaXHtIWZLOsz1aGfg.hUI.txKXhNX4g7NBhrX3ZSE/4FpKRoq"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:54:40.603542"], ["updated_at", "2015-07-22 20:54:40.603542"], ["auth_token", "169f5f608777c28e4ec8d6af40b13871"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:54:40.609487"], ["updated_at", "2015-07-22 20:54:40.609487"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 17:54:40 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a87eafc9c4e4b8b326de90d18001caa7"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$YCaHMHJ3P3WskNpMipIrt.pDS5ZQqtXS38hgo6Zin4/1mb8jhYHvS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:54:40.643767"], ["updated_at", "2015-07-22 20:54:40.643767"], ["auth_token", "a87eafc9c4e4b8b326de90d18001caa7"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:54:40.648554"], ["updated_at", "2015-07-22 20:54:40.648554"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 17:54:40 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e486b4564244cfa2d39eb24905f6203c"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$C4RmQJX5PR4ydEVpI6Stc.dl26c/ifKqDgsNx/DjnFkrlVXOCUPUS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 20:54:40.678628"], ["updated_at", "2015-07-22 20:54:40.678628"], ["auth_token", "e486b4564244cfa2d39eb24905f6203c"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 20:54:40.684258"], ["updated_at", "2015-07-22 20:54:40.684258"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 17:54:40 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (25.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:00:06', '2015-07-22 21:00:06', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:00:06', '2015-07-22 21:00:06', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:00:06', '2015-07-22 21:00:06')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:00:06', '2015-07-22 21:00:06')[0m
  [1m[35m (12.3ms)[0m  COMMIT
  [1m[36m (8.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (35.1ms)
  Rendered circuits/new.html.erb within layouts/application (40.5ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 201ms (Views: 190.2ms | ActiveRecord: 3.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 6.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:00:07.313846"], ["updated_at", "2015-07-22 21:00:07.313846"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/6
Completed 302 Found in 7ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 3.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "578330deb8228294f42bcc28836b3d36"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5oWu0n3X.aitumROGi/Ufe14Y63sZKQHAsjTsxXkBKXLtxXpMOqhq"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:00:07.362741"], ["updated_at", "2015-07-22 21:00:07.362741"], ["auth_token", "578330deb8228294f42bcc28836b3d36"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:00:07.374861"], ["updated_at", "2015-07-22 21:00:07.374861"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:00:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "cd0c1607f3f5c04a78afc2835786ce48"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VultMMU2.RoojmYE0JtFJODpSAD14M55ToRTm4Ojsa3SxeiMAF8nS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:00:07.452809"], ["updated_at", "2015-07-22 21:00:07.452809"], ["auth_token", "cd0c1607f3f5c04a78afc2835786ce48"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:00:07.456674"], ["updated_at", "2015-07-22 21:00:07.456674"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:00:07 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "090cde84cd18db6f4fd5f0fa74b3930b"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$.JJzhjgjbItF8eWLnk4zQ.WPdzDPCGyQ/ASU8uiE/x6XN7SHL7g/e"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:00:07.486693"], ["updated_at", "2015-07-22 21:00:07.486693"], ["auth_token", "090cde84cd18db6f4fd5f0fa74b3930b"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:00:07.491142"], ["updated_at", "2015-07-22 21:00:07.491142"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:00:07 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "7e939dda7cbeb40f322de018b5dda7c1"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$lo4qsJz3csf65SjIR5yndOMMSeaNeKTJYanzwwv9VKlktrJ/IcqQ2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:00:07.518711"], ["updated_at", "2015-07-22 21:00:07.518711"], ["auth_token", "7e939dda7cbeb40f322de018b5dda7c1"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:00:07.523711"], ["updated_at", "2015-07-22 21:00:07.523711"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:00:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e2a8eb3b42ce37e49be30b4e2e857277"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$BnOZNJjV4oJcN.JYNYKLkOW6jFmHX6qDxuT/t2nm6J8zvOd3lQTRO"], ["created_at", "2015-07-22 21:00:07.550887"], ["updated_at", "2015-07-22 21:00:07.550887"], ["auth_token", "e2a8eb3b42ce37e49be30b4e2e857277"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$BnOZNJjV4oJcN.JYNYKLkOW6jFmHX6qDxuT/t2nm6J8zvOd3lQTRO"], ["created_at", "2015-07-22 21:00:07.550887"], ["updated_at", "2015-07-22 21:00:07.550887"], ["auth_token", "e2a8eb3b42ce37e49be30b4e2e857277"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.6ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (105.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (47.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (97.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (62.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.2ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (49.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.7ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:00:08.096428"], ["updated_at", "2015-07-22 21:00:08.096428"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/7/measures" for 127.0.0.1 at 2015-07-22 18:00:08 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>7}, "subdomain"=>"api", "circuit_id"=>"7"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.9ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 7]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 7]]
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.8ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.5ms)
  Rendered welcome/_month_status.html.erb (1.3ms)
  Rendered welcome/_bar_graph.html.erb (0.8ms)
  Rendered welcome/index.html.erb within layouts/application (8.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 25ms (Views: 13.4ms | ActiveRecord: 7.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (22.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:10:32', '2015-07-22 21:10:32', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:10:32', '2015-07-22 21:10:32', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:10:32', '2015-07-22 21:10:32')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:10:32', '2015-07-22 21:10:32')[0m
  [1m[35m (6.9ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.1ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (6.0ms)
  Rendered layouts/_header.html.erb (2.4ms)
  Rendered layouts/_sidebar.html.erb (1.6ms)
  Rendered layouts/_alerts.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 40ms (Views: 30.9ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:10:32.773464"], ["updated_at", "2015-07-22 21:10:32.773464"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/8
Completed 302 Found in 12ms (ActiveRecord: 2.3ms)
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (9.1ms)
  Rendered circuits/new.html.erb within layouts/application (11.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 174ms (Views: 169.6ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (1.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (5.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (1.1ms)
  Rendered welcome/_bar_graph.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (13.3ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 29ms (Views: 17.5ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0558adf08b8cb6fc344cf17a842b98a6"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$GmSgw0d2kfbKEiRbfFfC3eDQmFpl/HvrTTt3ekG8dIQzhSP5EcdlS"], ["created_at", "2015-07-22 21:10:33.034797"], ["updated_at", "2015-07-22 21:10:33.034797"], ["auth_token", "0558adf08b8cb6fc344cf17a842b98a6"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$GmSgw0d2kfbKEiRbfFfC3eDQmFpl/HvrTTt3ekG8dIQzhSP5EcdlS"], ["created_at", "2015-07-22 21:10:33.034797"], ["updated_at", "2015-07-22 21:10:33.034797"], ["auth_token", "0558adf08b8cb6fc344cf17a842b98a6"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.7ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (120.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (63.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (41.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (96.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (62.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (71.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (44.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:10:33.651110"], ["updated_at", "2015-07-22 21:10:33.651110"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/9/measures" for 127.0.0.1 at 2015-07-22 18:10:33 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>9}, "subdomain"=>"api", "circuit_id"=>"9"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.7ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 9]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 9]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 9]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b1b7f9407e1caea2c6d6bedf73a3a7ef"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$nwv0CF4X0Vtb4XBJFrn69.eFURbPILT9ir1Lg39ETQwqzRD2DcPD2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:10:33.728380"], ["updated_at", "2015-07-22 21:10:33.728380"], ["auth_token", "b1b7f9407e1caea2c6d6bedf73a3a7ef"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:10:33.734555"], ["updated_at", "2015-07-22 21:10:33.734555"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:10:33 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.9ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a5160111bddd7d245deb0a37e9a806d0"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$CP0W7F3HxeohHLW5Bd4mV.us45Xio6GFCgm8SXK2GzNvp3e4YhoQW"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:10:33.784511"], ["updated_at", "2015-07-22 21:10:33.784511"], ["auth_token", "a5160111bddd7d245deb0a37e9a806d0"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:10:33.789987"], ["updated_at", "2015-07-22 21:10:33.789987"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:10:33 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "78d70f1f22c48979a4ab657b3e95276a"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ioN.Y6/LRamI49xazQQX1O1bVezJvu5Db.oqdwOobwMRCC76pnX9q"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:10:33.831171"], ["updated_at", "2015-07-22 21:10:33.831171"], ["auth_token", "78d70f1f22c48979a4ab657b3e95276a"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:10:33.837313"], ["updated_at", "2015-07-22 21:10:33.837313"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:10:33 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "fe064a9dfed5659d9006edcb7e6ee235"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$1fNaZehcAkF6T3IVsTHNw.Z9MH86s9Fso4aFheNMK8zZEr.VZ3Ppm"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:10:33.880847"], ["updated_at", "2015-07-22 21:10:33.880847"], ["auth_token", "fe064a9dfed5659d9006edcb7e6ee235"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:10:33.886086"], ["updated_at", "2015-07-22 21:10:33.886086"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:10:33 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "06fe1f2d44be7ee2b93b5ca93c219035"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$.QQHOpjn.68MT7DoklHwcOModsTwII3YEfyARdrH/txNDbwWPQrTG"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:15:03.972999"], ["updated_at", "2015-07-22 21:15:03.972999"], ["auth_token", "06fe1f2d44be7ee2b93b5ca93c219035"]]
  [1m[35m (17.2ms)[0m  COMMIT
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "06fe1f2d44be7ee2b93b5ca93c219035"]]
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:20:46', '2015-07-22 21:20:46', 980190962)[0m
  [1m[35mFixture Insert (1.0ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:20:46', '2015-07-22 21:20:46', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:20:46', '2015-07-22 21:20:46')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:20:46', '2015-07-22 21:20:46')[0m
  [1m[35m (12.8ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.7ms)
  Rendered welcome/index.html.erb within layouts/application (11.6ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 43ms (Views: 28.3ms | ActiveRecord: 5.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2181a21529c935f923717326196234cf"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$tYSLD8elHIrSqD69GtmT.ew00lEeQPitGeJoK50cd8YTRALVWAtlG"], ["created_at", "2015-07-22 21:20:46.567635"], ["updated_at", "2015-07-22 21:20:46.567635"], ["auth_token", "2181a21529c935f923717326196234cf"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$tYSLD8elHIrSqD69GtmT.ew00lEeQPitGeJoK50cd8YTRALVWAtlG"], ["created_at", "2015-07-22 21:20:46.567635"], ["updated_at", "2015-07-22 21:20:46.567635"], ["auth_token", "2181a21529c935f923717326196234cf"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.9ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (90.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (41.5ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (96.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (52.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (39.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (42.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:20:47.104158"], ["updated_at", "2015-07-22 21:20:47.104158"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/10/measures" for 127.0.0.1 at 2015-07-22 18:20:47 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>10}, "subdomain"=>"api", "circuit_id"=>"10"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 10]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 10]]
  [1m[35mSQL (1.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 10]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f18d3c8ae4e54307fa99a7ad59314515"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$sI63zhj.rNoa33hg8zAtw.4.X1tyDWofii5KCChcEsr9FT3nbot4q"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:20:47.179854"], ["updated_at", "2015-07-22 21:20:47.179854"], ["auth_token", "f18d3c8ae4e54307fa99a7ad59314515"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:20:47.189509"], ["updated_at", "2015-07-22 21:20:47.189509"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:20:47 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c07d466a787a4b0b710418bb22ca5b44"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$bqhyF0.Ts26aOFaADuPwRevvu8KZF7OtdEbM0e7ok1XH1p/1f.8SC"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:20:47.244583"], ["updated_at", "2015-07-22 21:20:47.244583"], ["auth_token", "c07d466a787a4b0b710418bb22ca5b44"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:20:47.250986"], ["updated_at", "2015-07-22 21:20:47.250986"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:20:47 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c156039a1114b8933e442f2ebbeb2aea"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$cIe7yAqi8yHfe7XowREN.udGi7FclmjABjSHrJ6FCtnIlw2JAKkp2"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:20:47.292438"], ["updated_at", "2015-07-22 21:20:47.292438"], ["auth_token", "c156039a1114b8933e442f2ebbeb2aea"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:20:47.303143"], ["updated_at", "2015-07-22 21:20:47.303143"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:20:47 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c6c5df3a74bcb5e5457179810b4eb1d5"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Ptjvx3S5Lumu92lCXRCwO.VoJjxLSW129IE9UKka2e9yOkJ0kbBUu"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:20:47.330805"], ["updated_at", "2015-07-22 21:20:47.330805"], ["auth_token", "c6c5df3a74bcb5e5457179810b4eb1d5"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:20:47.335508"], ["updated_at", "2015-07-22 21:20:47.335508"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:20:47 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:20:47.391724"], ["updated_at", "2015-07-22 21:20:47.391724"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/11
Completed 302 Found in 11ms (ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (12.2ms)
  Rendered circuits/new.html.erb within layouts/application (14.5ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 139ms (Views: 131.6ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (1.0ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 2.6ms)
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (7.0ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 13.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:21:51', '2015-07-22 21:21:51', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:21:51', '2015-07-22 21:21:51', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:21:51', '2015-07-22 21:21:51')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:21:51', '2015-07-22 21:21:51')[0m
  [1m[35m (1.8ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (1.1ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (10.2ms)
  Rendered circuits/new.html.erb within layouts/application (15.6ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 169ms (Views: 156.0ms | ActiveRecord: 3.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 9.7ms | ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:21:51.811103"], ["updated_at", "2015-07-22 21:21:51.811103"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/12
Completed 302 Found in 13ms (ActiveRecord: 1.6ms)
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.4ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 12ms (ActiveRecord: 2.4ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d04e31234da1b636b1f6f6beb6b890c2"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$wDoxugZgPT4Ai6W0CnSxtOhqPivJ6VkKldYN55Tc4g0FP.kybktye"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:21:51.895618"], ["updated_at", "2015-07-22 21:21:51.895618"], ["auth_token", "d04e31234da1b636b1f6f6beb6b890c2"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:21:51.902779"], ["updated_at", "2015-07-22 21:21:51.902779"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:21:51 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "da828f8fad76f63ef10dffad0e066498"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$e2DRRhFqm.AFCob0ZFtUXOePsqFBPufWZeB.nIV1ACjaoLFYlE9cC"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:21:51.990418"], ["updated_at", "2015-07-22 21:21:51.990418"], ["auth_token", "da828f8fad76f63ef10dffad0e066498"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:21:52.002282"], ["updated_at", "2015-07-22 21:21:52.002282"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:21:52 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "51c0de6bd2d5ccea3af80e4264391171"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VhTo3EokBEWWVD5Yn5OaIuUlQLAVUmOyNk7ruDdbQ98sWFEjbfNIa"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:21:52.045720"], ["updated_at", "2015-07-22 21:21:52.045720"], ["auth_token", "51c0de6bd2d5ccea3af80e4264391171"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:21:52.054188"], ["updated_at", "2015-07-22 21:21:52.054188"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:21:52 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "92665ebaadc87c5c1b44cdc4e82ef4a2"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$P3uQycRNhE6JvrFEDohOIO5ZA43ZLA4gmZZjnSAQzYocNiMvDcnie"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:21:52.088943"], ["updated_at", "2015-07-22 21:21:52.088943"], ["auth_token", "92665ebaadc87c5c1b44cdc4e82ef4a2"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:21:52.093581"], ["updated_at", "2015-07-22 21:21:52.093581"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:21:52 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "70d735d313bbcd903167a88bd80a438e"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$WOP7Iw/d1xQiwX.pP83FWOCa1L01q2rNcxqn1pX5HAfPj932FRmmu"], ["created_at", "2015-07-22 21:21:52.132625"], ["updated_at", "2015-07-22 21:21:52.132625"], ["auth_token", "70d735d313bbcd903167a88bd80a438e"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$WOP7Iw/d1xQiwX.pP83FWOCa1L01q2rNcxqn1pX5HAfPj932FRmmu"], ["created_at", "2015-07-22 21:21:52.132625"], ["updated_at", "2015-07-22 21:21:52.132625"], ["auth_token", "70d735d313bbcd903167a88bd80a438e"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (88.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (63.8ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (50.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (75.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (50.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (68.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:21:52.723104"], ["updated_at", "2015-07-22 21:21:52.723104"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/13/measures" for 127.0.0.1 at 2015-07-22 18:21:52 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>13}, "subdomain"=>"api", "circuit_id"=>"13"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (1.1ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 13]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 13]]
  [1m[36mSQL (1.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.7ms)
  Rendered welcome/index.html.erb within layouts/application (8.4ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 13.5ms | ActiveRecord: 6.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (3.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:24:37', '2015-07-22 21:24:37', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:24:37', '2015-07-22 21:24:37', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:24:37', '2015-07-22 21:24:37')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:24:37', '2015-07-22 21:24:37')[0m
  [1m[35m (7.5ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.9ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.6ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (12.8ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (1.6ms)
  Rendered layouts/_alerts.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 44ms (Views: 28.7ms | ActiveRecord: 8.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e6d0edf89193385558caaeccc0c665f1"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$7GH0mYBh8knjCLSdQypZGeAU0rMZyQ2p1W6mdM21cqViZ86LIA8/K"], ["created_at", "2015-07-22 21:24:37.771062"], ["updated_at", "2015-07-22 21:24:37.771062"], ["auth_token", "e6d0edf89193385558caaeccc0c665f1"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$7GH0mYBh8knjCLSdQypZGeAU0rMZyQ2p1W6mdM21cqViZ86LIA8/K"], ["created_at", "2015-07-22 21:24:37.771062"], ["updated_at", "2015-07-22 21:24:37.771062"], ["auth_token", "e6d0edf89193385558caaeccc0c665f1"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.7ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.6ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (95.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (54.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (62.6ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (97.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (62.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (50.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (53.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (1.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:24:38.375708"], ["updated_at", "2015-07-22 21:24:38.375708"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/14/measures" for 127.0.0.1 at 2015-07-22 18:24:38 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>14}, "subdomain"=>"api", "circuit_id"=>"14"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 14]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 14]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 14]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bfed4b0362eaea7145fb13a59a5fdc80"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Qypvx96mx/lz76Xo/gpvVe83cSE75HbTEJQ3C4Oq1CL/dmqdOdDHO"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:24:38.440393"], ["updated_at", "2015-07-22 21:24:38.440393"], ["auth_token", "bfed4b0362eaea7145fb13a59a5fdc80"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:24:38.444854"], ["updated_at", "2015-07-22 21:24:38.444854"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:24:38 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1b406a038d48b1cbbdca79c4ecd3a310"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$.VfHrR/1JggXMlJcuRCQ1.isKz9ZUG3qJzUo7qdVBP2qXEBWgd/2i"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:24:38.496826"], ["updated_at", "2015-07-22 21:24:38.496826"], ["auth_token", "1b406a038d48b1cbbdca79c4ecd3a310"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:24:38.503164"], ["updated_at", "2015-07-22 21:24:38.503164"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:24:38 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "23acf8c7a5801f88a51b981aad31d5d6"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$wJDFKm.KM8.yuetdoQsai.025GAr5oq/kz2Gig5kA1tPmcAF3eT2W"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:24:38.548805"], ["updated_at", "2015-07-22 21:24:38.548805"], ["auth_token", "23acf8c7a5801f88a51b981aad31d5d6"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:24:38.557138"], ["updated_at", "2015-07-22 21:24:38.557138"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:24:38 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "81e0dbcca1a014a1252641a08b5be59e"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$b3dJbukvs719jbwtYYqmMex.ysMQS5O1snMU2XocoUbBwxgQONQ9i"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:24:38.587405"], ["updated_at", "2015-07-22 21:24:38.587405"], ["auth_token", "81e0dbcca1a014a1252641a08b5be59e"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:24:38.593167"], ["updated_at", "2015-07-22 21:24:38.593167"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:24:38 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (10.2ms)
  Rendered circuits/new.html.erb within layouts/application (12.2ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 149ms (Views: 144.0ms | ActiveRecord: 1.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.9ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.6ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 10ms (Views: 5.2ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.3ms)
  [1m[36m (0.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:24:38.897958"], ["updated_at", "2015-07-22 21:24:38.897958"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/15
Completed 302 Found in 15ms (ActiveRecord: 2.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:30:11', '2015-07-22 21:30:11', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:30:11', '2015-07-22 21:30:11', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:30:11', '2015-07-22 21:30:11')
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:30:11', '2015-07-22 21:30:11')[0m
  [1m[35m (12.1ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "eec539aefa2fa2e371f1fd5eed7e3926"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Unq4gzlUfVdSD7AhPEzf..84U5BIPF/yVu//a8AhEBaNqlUSLTypS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:30:11.209160"], ["updated_at", "2015-07-22 21:30:11.209160"], ["auth_token", "eec539aefa2fa2e371f1fd5eed7e3926"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:30:11.245127"], ["updated_at", "2015-07-22 21:30:11.245127"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:30:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "eec539aefa2fa2e371f1fd5eed7e3926"]]
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.3ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (1.0ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b3cddfa21fed906977c91c6720aad8d8"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$NqHZpTSU5N3cVdmHCV9cOeT0Y9ueL494hJy5gBESvtiMg3FfuM9eS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:30:11.356757"], ["updated_at", "2015-07-22 21:30:11.356757"], ["auth_token", "b3cddfa21fed906977c91c6720aad8d8"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:30:11.364289"], ["updated_at", "2015-07-22 21:30:11.364289"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:30:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b3cddfa21fed906977c91c6720aad8d8"]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b745eeb458c7ed82e59e1f566597e7bf"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$tOFo7DafwekIzvCmyPjV2OeydBS1nKu2/jztJPe3uA.qboz2kz8ie"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:30:11.417377"], ["updated_at", "2015-07-22 21:30:11.417377"], ["auth_token", "b745eeb458c7ed82e59e1f566597e7bf"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:30:11.425704"], ["updated_at", "2015-07-22 21:30:11.425704"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:30:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b745eeb458c7ed82e59e1f566597e7bf\"fake"]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 0.3ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "95999ea7d972382a288b8a6267d142cf"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$TQxsyZCJ9lw.UjrUwPmmUe4JUyceoeOvBImEB7O4hYtj8NHZgoF1y"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:30:11.467371"], ["updated_at", "2015-07-22 21:30:11.467371"], ["auth_token", "95999ea7d972382a288b8a6267d142cf"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:30:11.472231"], ["updated_at", "2015-07-22 21:30:11.472231"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:30:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "95999ea7d972382a288b8a6267d142cf"]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 13ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.7ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (1.7ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 24.1ms | ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:30:11.656881"], ["updated_at", "2015-07-22 21:30:11.656881"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/16
Completed 302 Found in 15ms (ActiveRecord: 2.6ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (11.2ms)
  Rendered circuits/new.html.erb within layouts/application (13.5ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 169ms (Views: 165.5ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (8.1ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 23ms (Views: 12.6ms | ActiveRecord: 6.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d61d5e15ce726b32bf3ca4de4d965fb9"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$j8k73mitb76g3YeLtHNQV.8e240VVJ1T7Xm60Y1WCxkiZ1IWexzDe"], ["created_at", "2015-07-22 21:30:11.885567"], ["updated_at", "2015-07-22 21:30:11.885567"], ["auth_token", "d61d5e15ce726b32bf3ca4de4d965fb9"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$j8k73mitb76g3YeLtHNQV.8e240VVJ1T7Xm60Y1WCxkiZ1IWexzDe"], ["created_at", "2015-07-22 21:30:11.885567"], ["updated_at", "2015-07-22 21:30:11.885567"], ["auth_token", "d61d5e15ce726b32bf3ca4de4d965fb9"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (89.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (81.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (55.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (107.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (63.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (52.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.4ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:30:12.476824"], ["updated_at", "2015-07-22 21:30:12.476824"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/17/measures" for 127.0.0.1 at 2015-07-22 18:30:12 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>17}, "subdomain"=>"api", "circuit_id"=>"17"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d61d5e15ce726b32bf3ca4de4d965fb9"]]
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 17]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 17]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:42:25', '2015-07-22 21:42:25', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:42:25', '2015-07-22 21:42:25', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:42:25', '2015-07-22 21:42:25')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:42:25', '2015-07-22 21:42:25')[0m
  [1m[35m (10.1ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (6.2ms)
  Rendered layouts/_header.html.erb (2.0ms)
  Rendered layouts/_sidebar.html.erb (2.4ms)
  Rendered layouts/_alerts.html.erb (0.9ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 38ms (Views: 29.6ms | ActiveRecord: 2.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:42:25.335509"], ["updated_at", "2015-07-22 21:42:25.335509"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/18
Completed 302 Found in 15ms (ActiveRecord: 4.4ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 120ms (Views: 116.6ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.0ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (8.9ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 20ms (Views: 11.7ms | ActiveRecord: 5.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2286c534b3d7b339763b8bfc86b6eb6a"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$f1vCtNfy.NDFg0Ug0eUec.ZtSDTV6mc/1yLeWdIEO4wmJ0fgoDPQe"], ["created_at", "2015-07-22 21:42:25.513295"], ["updated_at", "2015-07-22 21:42:25.513295"], ["auth_token", "2286c534b3d7b339763b8bfc86b6eb6a"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$f1vCtNfy.NDFg0Ug0eUec.ZtSDTV6mc/1yLeWdIEO4wmJ0fgoDPQe"], ["created_at", "2015-07-22 21:42:25.513295"], ["updated_at", "2015-07-22 21:42:25.513295"], ["auth_token", "2286c534b3d7b339763b8bfc86b6eb6a"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (117.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (55.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (141.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (54.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (81.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (51.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.9ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:42:26.183796"], ["updated_at", "2015-07-22 21:42:26.183796"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/19/measures" for 127.0.0.1 at 2015-07-22 18:42:26 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>19}, "subdomain"=>"api", "circuit_id"=>"19"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 19]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 19]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 19]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a4fbdfc90c90e815cf468b305ba98145"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5ce/Th8Rdw5wWkhaf3qeBOX.mVhk56IFGz1ptQ.0xwx36O2l1dStG"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:42:26.245790"], ["updated_at", "2015-07-22 21:42:26.245790"], ["auth_token", "a4fbdfc90c90e815cf468b305ba98145"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:42:26.249758"], ["updated_at", "2015-07-22 21:42:26.249758"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:42:26 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c3aafb08e5b8bee9e6e3d997aa12ade4"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$twuzIwQQ9/j.peMScXseneFW6wcrhYEl9dP.kJzFIcpjtaq3sfKY6"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:42:26.289094"], ["updated_at", "2015-07-22 21:42:26.289094"], ["auth_token", "c3aafb08e5b8bee9e6e3d997aa12ade4"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:42:26.295190"], ["updated_at", "2015-07-22 21:42:26.295190"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:42:26 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "661113b5695929f58e02235cee8b1a9b"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$nU4Cxgy/m9Rolc1MhDgP0OPGaExhX5LZ82CbrtuBFdK4D6MLaKYMG"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:42:26.321753"], ["updated_at", "2015-07-22 21:42:26.321753"], ["auth_token", "661113b5695929f58e02235cee8b1a9b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:42:26.326971"], ["updated_at", "2015-07-22 21:42:26.326971"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:42:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7bb677e2b09a07ea75058d4ef768a378"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$f0nfdqS7lIyQa7uxX.Q/au3qB0G.EzX7T1b8jWbWdm.VDU9BkSFAS"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:42:26.350883"], ["updated_at", "2015-07-22 21:42:26.350883"], ["auth_token", "7bb677e2b09a07ea75058d4ef768a378"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:42:26.355731"], ["updated_at", "2015-07-22 21:42:26.355731"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:42:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (23.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-22 21:43:25', '2015-07-22 21:43:25', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-22 21:43:25', '2015-07-22 21:43:25', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-22 21:43:25', '2015-07-22 21:43:25')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-22 21:43:25', '2015-07-22 21:43:25')[0m
  [1m[35m (9.9ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (2.9ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.5ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.9ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (13.2ms)
  Rendered layouts/_header.html.erb (1.6ms)
  Rendered layouts/_sidebar.html.erb (1.6ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 38ms (Views: 25.8ms | ActiveRecord: 5.5ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d7f03724da000b5aecfbbfe0a9552c9d"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Jn4U0rcTdmsMlaDyzVVe0.DassEcpJKmLd8GEvkER5mbdjNxD3tDy"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:43:25.644530"], ["updated_at", "2015-07-22 21:43:25.644530"], ["auth_token", "d7f03724da000b5aecfbbfe0a9552c9d"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:43:25.675992"], ["updated_at", "2015-07-22 21:43:25.675992"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-22 18:43:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8b5fb1dfd42b2a8263989c0252871cc7"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$gGmDv0bmQNT5PJGYljF6Fuzwa6QVasrtD7sA0Ycp8msgC0vI.HMEu"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:43:25.751837"], ["updated_at", "2015-07-22 21:43:25.751837"], ["auth_token", "8b5fb1dfd42b2a8263989c0252871cc7"]]
  [1m[36m (1.0ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:43:25.757330"], ["updated_at", "2015-07-22 21:43:25.757330"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-22 18:43:25 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8685c82ce4068e62d8be492a1fbbf949"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$bUFJHQ41.2OAVfrWgwY49eFjUr/oxp6YMZRUxE1SOcnb3t9DQ/DBe"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:43:25.790015"], ["updated_at", "2015-07-22 21:43:25.790015"], ["auth_token", "8685c82ce4068e62d8be492a1fbbf949"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:43:25.794265"], ["updated_at", "2015-07-22 21:43:25.794265"]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-22 18:43:25 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (1.0ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (1.9ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "97f465a061be45064c09908e60d01525"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$s7iapjBh4nM/3I.LncZrteCTIz4lwpRMMIEkguw5hjOHFyjsyO9Ke"], ["schema_name", "prv_1"], ["created_at", "2015-07-22 21:43:25.835763"], ["updated_at", "2015-07-22 21:43:25.835763"], ["auth_token", "97f465a061be45064c09908e60d01525"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:43:25.840001"], ["updated_at", "2015-07-22 21:43:25.840001"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-22 18:43:25 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-22 21:43:25.906682"], ["updated_at", "2015-07-22 21:43:25.906682"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/20
Completed 302 Found in 16ms (ActiveRecord: 3.2ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (5.5ms)
  Rendered layouts/_header.html.erb (1.7ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 11.8ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (1.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (8.4ms)
  Rendered circuits/new.html.erb within layouts/application (10.7ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 122ms (Views: 118.0ms | ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e40bda2ca170008fea55fe2eda9d4aea"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$YtHVQdnKo/Lde6J7LJElYOpAi7GvpWIa7mkgOTmsCDlCSUHdU89pe"], ["created_at", "2015-07-22 21:43:26.102003"], ["updated_at", "2015-07-22 21:43:26.102003"], ["auth_token", "e40bda2ca170008fea55fe2eda9d4aea"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$YtHVQdnKo/Lde6J7LJElYOpAi7GvpWIa7mkgOTmsCDlCSUHdU89pe"], ["created_at", "2015-07-22 21:43:26.102003"], ["updated_at", "2015-07-22 21:43:26.102003"], ["auth_token", "e40bda2ca170008fea55fe2eda9d4aea"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (106.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (70.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (45.4ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (108.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (66.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (47.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (61.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (52.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-22 21:43:26.722070"], ["updated_at", "2015-07-22 21:43:26.722070"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/21/measures" for 127.0.0.1 at 2015-07-22 18:43:26 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>21}, "subdomain"=>"api", "circuit_id"=>"21"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 21]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 21]]
  [1m[35mSQL (1.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 21]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (26.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (75.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (16.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (12.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:13:12', '2015-07-23 18:13:12', 980190962)[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:13:12', '2015-07-23 18:13:12', 298486374)
  [1m[36mFixture Delete (31.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.8ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:13:13', '2015-07-23 18:13:13')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:13:13', '2015-07-23 18:13:13')[0m
  [1m[35m (15.1ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c5ef513174abcee43766076b12ad9bbc"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Juf2Z7I4WaYHoXOrfc87HuDfgEWgo/gaAU1PRshorRouSWInZyBU6"], ["created_at", "2015-07-23 18:13:13.259914"], ["updated_at", "2015-07-23 18:13:13.259914"], ["auth_token", "c5ef513174abcee43766076b12ad9bbc"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Juf2Z7I4WaYHoXOrfc87HuDfgEWgo/gaAU1PRshorRouSWInZyBU6"], ["created_at", "2015-07-23 18:13:13.259914"], ["updated_at", "2015-07-23 18:13:13.259914"], ["auth_token", "c5ef513174abcee43766076b12ad9bbc"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (51.0ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (19.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (267.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.2ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.2ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (131.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (12.5ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (52.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.9ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:13:14.136452"], ["updated_at", "2015-07-23 18:13:14.136452"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:13:14 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c5ef513174abcee43766076b12ad9bbc"]]
Completed 500 Internal Server Error in 39ms (ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (8.8ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (52.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (2.8ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (3.7ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (1.0ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (79.7ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 259ms (Views: 177.6ms | ActiveRecord: 57.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (5.0ms)
  Rendered layouts/_header.html.erb (0.9ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 18.8ms | ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (29.4ms)
  Rendered circuits/new.html.erb within layouts/application (50.5ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 206ms (Views: 202.5ms | ActiveRecord: 0.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.3ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (11.8ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:13:15.023054"], ["updated_at", "2015-07-23 18:13:15.023054"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/22
Completed 302 Found in 25ms (ActiveRecord: 13.6ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8e1d753604145056e9e9e8b93dc60d9f"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$sTd5WSzpAjKd9w1gMun2ZeRjYXzIr0tXC13QYk7Mtg4Q7pEuZo6ae"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:13:15.083753"], ["updated_at", "2015-07-23 18:13:15.083753"], ["auth_token", "8e1d753604145056e9e9e8b93dc60d9f"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:13:15.089633"], ["updated_at", "2015-07-23 18:13:15.089633"]]
  [1m[36m (0.6ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:13:15 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8e1d753604145056e9e9e8b93dc60d9f"]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "206d914f3b7da25ce65b2b0fb4f128cf"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$AJO546m4ePVCcHDhy6rFLeLfkWhiE3OpoXzazehAe9ozvh7OIhRR2"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:13:15.174434"], ["updated_at", "2015-07-23 18:13:15.174434"], ["auth_token", "206d914f3b7da25ce65b2b0fb4f128cf"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:13:15.179042"], ["updated_at", "2015-07-23 18:13:15.179042"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:13:15 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "206d914f3b7da25ce65b2b0fb4f128cf"]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "41ca43a5fcf9153169fa03cac64ec5e3"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$eeXwyqS0FzgRKIsci5U5Pe2bjKYr32wqkC/GxgS.K80bTdWWaxwrK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:13:15.225542"], ["updated_at", "2015-07-23 18:13:15.225542"], ["auth_token", "41ca43a5fcf9153169fa03cac64ec5e3"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:13:15.235085"], ["updated_at", "2015-07-23 18:13:15.235085"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:13:15 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "41ca43a5fcf9153169fa03cac64ec5e3"]]
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e92df0c9e4b5b21d75d949aaf13e35b0"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$1g0c5ZBG5wjIpAASyLoUGukHIi2/45pEiNnvBs2gvP594BTc6w7fG"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:13:15.277882"], ["updated_at", "2015-07-23 18:13:15.277882"], ["auth_token", "e92df0c9e4b5b21d75d949aaf13e35b0"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:13:15.283267"], ["updated_at", "2015-07-23 18:13:15.283267"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-23 15:13:15 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e92df0c9e4b5b21d75d949aaf13e35b0\"fake"]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.4ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190967]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:15:11', '2015-07-23 18:15:11', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:15:11', '2015-07-23 18:15:11', 298486374)
  [1m[36mFixture Delete (1.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:15:11', '2015-07-23 18:15:11')
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:15:11', '2015-07-23 18:15:11')[0m
  [1m[35m (10.3ms)[0m  COMMIT
  [1m[36m (8.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "51d3383d48bc98ef830ab6da89345cf1"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JCISMZOJYwZZIJL481dkXuaTcJuGelWcJlyS7G4ykoIq75E/odKdm"], ["created_at", "2015-07-23 18:15:12.046215"], ["updated_at", "2015-07-23 18:15:12.046215"], ["auth_token", "51d3383d48bc98ef830ab6da89345cf1"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JCISMZOJYwZZIJL481dkXuaTcJuGelWcJlyS7G4ykoIq75E/odKdm"], ["created_at", "2015-07-23 18:15:12.046215"], ["updated_at", "2015-07-23 18:15:12.046215"], ["auth_token", "51d3383d48bc98ef830ab6da89345cf1"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (0.6ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (113.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.6ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (30.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (107.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:15:12.632820"], ["updated_at", "2015-07-23 18:15:12.632820"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:15:12 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "51d3383d48bc98ef830ab6da89345cf1"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.9ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-07-23 18:15:12.679536"], ["updated_at", "2015-07-23 18:15:12.679536"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(980190963) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 20ms (ActiveRecord: 3.6ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (2.5ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (1.9ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (9.1ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 37ms (Views: 24.5ms | ActiveRecord: 5.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (3.7ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.3ms | ActiveRecord: 1.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (9.2ms)
  Rendered circuits/new.html.erb within layouts/application (11.5ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 151ms (Views: 146.7ms | ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:15:12.948698"], ["updated_at", "2015-07-23 18:15:12.948698"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/23
Completed 302 Found in 14ms (ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (1.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "280a7abf0b7eba6ac37504696a9cd15f"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$DKaUwCk9chqPIQaHG7upDeGYsrhL1J0abMh0sOQJAkvWrUt6VSyGu"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:15:13.037743"], ["updated_at", "2015-07-23 18:15:13.037743"], ["auth_token", "280a7abf0b7eba6ac37504696a9cd15f"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:15:13.042267"], ["updated_at", "2015-07-23 18:15:13.042267"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:15:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "280a7abf0b7eba6ac37504696a9cd15f"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 1.2ms | ActiveRecord: 1.5ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "810dbddb365bf3eb801d624ae3a5400d"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ndcDOASmgSOy2xi7eEfNee0AIaQXKYzXVqWn.asxmtYEFdBsvDlZK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:15:13.076552"], ["updated_at", "2015-07-23 18:15:13.076552"], ["auth_token", "810dbddb365bf3eb801d624ae3a5400d"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:15:13.082626"], ["updated_at", "2015-07-23 18:15:13.082626"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:15:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "810dbddb365bf3eb801d624ae3a5400d\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "49f6f8728f08ee22446f01e77dbf7883"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$rLUKRu7uL95PeNyj/2MtM.e7urpgthfNBHOLsaOAFeS4eI44ZKdmW"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:15:13.135483"], ["updated_at", "2015-07-23 18:15:13.135483"], ["auth_token", "49f6f8728f08ee22446f01e77dbf7883"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:15:13.142986"], ["updated_at", "2015-07-23 18:15:13.142986"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:15:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "49f6f8728f08ee22446f01e77dbf7883"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 1.6ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.7ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e8dc85b5fc7935ed237af1d7f74dbb93"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Y06H1H1KVJIjZlFYEilWsuD0aIGt.c1KlPIb0nzc/g6dNDbSb.sGy"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:15:13.177054"], ["updated_at", "2015-07-23 18:15:13.177054"], ["auth_token", "e8dc85b5fc7935ed237af1d7f74dbb93"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:15:13.183470"], ["updated_at", "2015-07-23 18:15:13.183470"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-23 15:15:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e8dc85b5fc7935ed237af1d7f74dbb93"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190967]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 1.2ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:17:19', '2015-07-23 18:17:19', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:17:19', '2015-07-23 18:17:19', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:17:19', '2015-07-23 18:17:19')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:17:19', '2015-07-23 18:17:19')[0m
  [1m[35m (8.0ms)[0m  COMMIT
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 23ms (Views: 18.3ms | ActiveRecord: 2.1ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:17:19.790962"], ["updated_at", "2015-07-23 18:17:19.790962"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/24
Completed 302 Found in 18ms (ActiveRecord: 3.8ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (9.0ms)
  Rendered circuits/new.html.erb within layouts/application (10.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 139ms (Views: 134.4ms | ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "fe6c7bcb4e813664e7ec099d80378a68"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZCG4YC2tTmCU1MBdWKWHleDFmDFkQyPn7NJj5JwWXQ5HtvrBD0EXi"], ["created_at", "2015-07-23 18:17:19.977839"], ["updated_at", "2015-07-23 18:17:19.977839"], ["auth_token", "fe6c7bcb4e813664e7ec099d80378a68"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZCG4YC2tTmCU1MBdWKWHleDFmDFkQyPn7NJj5JwWXQ5HtvrBD0EXi"], ["created_at", "2015-07-23 18:17:19.977839"], ["updated_at", "2015-07-23 18:17:19.977839"], ["auth_token", "fe6c7bcb4e813664e7ec099d80378a68"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (1.3ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (129.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (65.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.6ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (58.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (44.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.0ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.9ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:20.563005"], ["updated_at", "2015-07-23 18:17:20.563005"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/25/measures" for 127.0.0.1 at 2015-07-23 15:17:20 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>25}, "subdomain"=>"api", "circuit_id"=>"25"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 25]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 25]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "05561a444eb731943c500a7ecca01b60"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ZCkRUb2jYN5RbEok98p8ReESPg45jNmtEd6dhr3Nu4gh2.ri01kpi"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:20.635017"], ["updated_at", "2015-07-23 18:17:20.635017"], ["auth_token", "05561a444eb731943c500a7ecca01b60"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:20.644217"], ["updated_at", "2015-07-23 18:17:20.644217"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:17:20 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e021b88b1f257b84e2abb9e6de2f05b3"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$XIL/aWum4VosLSFu2MrCdu9vtN457wtocUd.UT6COGaGnjp/rlTbK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:20.702360"], ["updated_at", "2015-07-23 18:17:20.702360"], ["auth_token", "e021b88b1f257b84e2abb9e6de2f05b3"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:20.706976"], ["updated_at", "2015-07-23 18:17:20.706976"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:17:20 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "af9b741ed89ef97bbc76c7d7f1f07074"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$K5tfS9Eb1OAqALjfEig8eOVxO89fXcZTPp.3vbUgIVO23iseKTu3m"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:20.737472"], ["updated_at", "2015-07-23 18:17:20.737472"], ["auth_token", "af9b741ed89ef97bbc76c7d7f1f07074"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:20.741732"], ["updated_at", "2015-07-23 18:17:20.741732"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:17:20 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8189ad8669ab8e1b72833203eeae5106"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$H66IkY7mKlDYTHNbfC8DK./bJ.MmTcHKE./4j8l1ngYa.KIBhaJ3y"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:20.783190"], ["updated_at", "2015-07-23 18:17:20.783190"], ["auth_token", "8189ad8669ab8e1b72833203eeae5106"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:20.788999"], ["updated_at", "2015-07-23 18:17:20.788999"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:17:20 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (1.5ms)
  Rendered welcome/_bar_graph.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (10.7ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 25ms (Views: 13.7ms | ActiveRecord: 7.1ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (15.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:17:59', '2015-07-23 18:17:59', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:17:59', '2015-07-23 18:17:59', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:17:59', '2015-07-23 18:17:59')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:17:59', '2015-07-23 18:17:59')[0m
  [1m[35m (7.1ms)[0m  COMMIT
  [1m[36m (10.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:17:59.151463"], ["updated_at", "2015-07-23 18:17:59.151463"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/26
Completed 302 Found in 20ms (ActiveRecord: 4.4ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.9ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.4ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 23ms (Views: 19.3ms | ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (10.6ms)
  Rendered circuits/new.html.erb within layouts/application (13.0ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 145ms (Views: 141.3ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e69f11939ee69dff2c0d37a4f3dff21d"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$l9nBldtw4aAf0Qe4Yt/SU.Xevpe.F5NKiISIyA6g6SkgY1l1ijbQm"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:59.431110"], ["updated_at", "2015-07-23 18:17:59.431110"], ["auth_token", "e69f11939ee69dff2c0d37a4f3dff21d"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:59.438543"], ["updated_at", "2015-07-23 18:17:59.438543"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:17:59 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "65d9b50f4399e53fe5a1081e5cb81a50"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$TLLA.0uNbf7LSv1Z8SMqiO.MVCs/oV6es1.JuAjhyghNyUNdiV7YC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:59.523341"], ["updated_at", "2015-07-23 18:17:59.523341"], ["auth_token", "65d9b50f4399e53fe5a1081e5cb81a50"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:59.531000"], ["updated_at", "2015-07-23 18:17:59.531000"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:17:59 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "4127d54d61e60432aa42d6f17136684e"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$/loqSy8V3UIhMq2QIWSK0.0renliudto268rOUiQUW6/68BqA4Ooy"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:59.565809"], ["updated_at", "2015-07-23 18:17:59.565809"], ["auth_token", "4127d54d61e60432aa42d6f17136684e"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:59.570639"], ["updated_at", "2015-07-23 18:17:59.570639"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:17:59 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "325a82ddc4fb8ec9aea59ac6538cd977"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$a0wYuDD27Vlk1hyoB0m4uOxlGTLYLcDrqymoYzJX4S/T3/.GzFJwO"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:17:59.606079"], ["updated_at", "2015-07-23 18:17:59.606079"], ["auth_token", "325a82ddc4fb8ec9aea59ac6538cd977"]]
  [1m[35m (0.5ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:17:59.615719"], ["updated_at", "2015-07-23 18:17:59.615719"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:17:59 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.2ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.2ms)
  Rendered welcome/_month_status.html.erb (1.2ms)
  Rendered welcome/_bar_graph.html.erb (0.7ms)
  Rendered welcome/index.html.erb within layouts/application (7.9ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 22ms (Views: 12.3ms | ActiveRecord: 5.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "59f8e0868d21bbe17fa03642fa0d75b2"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$NvK9oR953CeujgRDHsKJkuo7QU8dHIG2BKKkGXt1pvfvSOJiNSZwq"], ["created_at", "2015-07-23 18:17:59.679630"], ["updated_at", "2015-07-23 18:17:59.679630"], ["auth_token", "59f8e0868d21bbe17fa03642fa0d75b2"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$NvK9oR953CeujgRDHsKJkuo7QU8dHIG2BKKkGXt1pvfvSOJiNSZwq"], ["created_at", "2015-07-23 18:17:59.679630"], ["updated_at", "2015-07-23 18:17:59.679630"], ["auth_token", "59f8e0868d21bbe17fa03642fa0d75b2"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.7ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (87.4ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (54.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.4ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (97.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (107.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (52.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (60.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:00.290708"], ["updated_at", "2015-07-23 18:18:00.290708"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/27/measures" for 127.0.0.1 at 2015-07-23 15:18:00 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>27}, "subdomain"=>"api", "circuit_id"=>"27"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 27]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 27]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 27]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.4ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.0ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.4ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:18:10', '2015-07-23 18:18:10', 980190962)[0m
  [1m[35mFixture Insert (0.1ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:18:10', '2015-07-23 18:18:10', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:18:10', '2015-07-23 18:18:10')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:18:10', '2015-07-23 18:18:10')[0m
  [1m[35m (10.8ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (10.3ms)
  Rendered circuits/new.html.erb within layouts/application (16.6ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 164ms (Views: 153.6ms | ActiveRecord: 2.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.8ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.7ms | ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:18:10.597434"], ["updated_at", "2015-07-23 18:18:10.597434"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/28
Completed 302 Found in 10ms (ActiveRecord: 2.4ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d05e2bca73f81cec3532622c3d0848c2"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$4.lI8ebYLxXg6WyaSNoLgOXAa9sqj2ndk0Jwrkz4L64eGgKSF72ZW"], ["created_at", "2015-07-23 18:18:10.639087"], ["updated_at", "2015-07-23 18:18:10.639087"], ["auth_token", "d05e2bca73f81cec3532622c3d0848c2"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$4.lI8ebYLxXg6WyaSNoLgOXAa9sqj2ndk0Jwrkz4L64eGgKSF72ZW"], ["created_at", "2015-07-23 18:18:10.639087"], ["updated_at", "2015-07-23 18:18:10.639087"], ["auth_token", "d05e2bca73f81cec3532622c3d0848c2"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (0.6ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (104.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.8ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (52.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (63.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.5ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (37.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:11.190781"], ["updated_at", "2015-07-23 18:18:11.190781"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/29/measures" for 127.0.0.1 at 2015-07-23 15:18:11 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>29}, "subdomain"=>"api", "circuit_id"=>"29"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 29]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 29]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 29]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (2.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.7ms)
  Rendered welcome/_month_status.html.erb (1.1ms)
  Rendered welcome/_bar_graph.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (12.7ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 28ms (Views: 17.3ms | ActiveRecord: 5.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "543468cf0528651dec9c4cc006de859a"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$XmpkqEgubcrQoIkYi4gvUOe.T2Mv6x/IhyizNjRWHtLjQ4NOrhyI."], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:18:11.299630"], ["updated_at", "2015-07-23 18:18:11.299630"], ["auth_token", "543468cf0528651dec9c4cc006de859a"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:11.306418"], ["updated_at", "2015-07-23 18:18:11.306418"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:18:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "eb57c95731b51a77f346522288a952d0"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$yt3nji8GCySAhhU2HE10HOGrhoDvmvbI9Ru8vUTfFqVBZuDPmNZd6"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:18:11.347130"], ["updated_at", "2015-07-23 18:18:11.347130"], ["auth_token", "eb57c95731b51a77f346522288a952d0"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:11.351998"], ["updated_at", "2015-07-23 18:18:11.351998"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:18:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "19b05cbb2cabdbf316198e84d4c0723b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jC0Q.7FBhoXgAN87M.HdjOIKxht9JSifBdqL8Q1DIAkmHieNmqS7a"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:18:11.386296"], ["updated_at", "2015-07-23 18:18:11.386296"], ["auth_token", "19b05cbb2cabdbf316198e84d4c0723b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:11.391621"], ["updated_at", "2015-07-23 18:18:11.391621"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:18:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1a0d61b37abce9e75bd2ca3bc56a998c"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$PtHLh9KDYcpt8YchghdlBuxR.L43.XjW0IKHglOw3swIz4/TIBRq2"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:18:11.428731"], ["updated_at", "2015-07-23 18:18:11.428731"], ["auth_token", "1a0d61b37abce9e75bd2ca3bc56a998c"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:18:11.435955"], ["updated_at", "2015-07-23 18:18:11.435955"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:18:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:21:09', '2015-07-23 18:21:09', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:21:09', '2015-07-23 18:21:09', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:21:09', '2015-07-23 18:21:09')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:21:09', '2015-07-23 18:21:09')[0m
  [1m[35m (11.0ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f755e28747febdad38ef198ed4847d93"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lxeWtULvbs40GAubliTkJez/bBn2ED/J8XLjgD/o9N8l0B/opZ0JG"], ["created_at", "2015-07-23 18:21:09.599369"], ["updated_at", "2015-07-23 18:21:09.599369"], ["auth_token", "f755e28747febdad38ef198ed4847d93"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lxeWtULvbs40GAubliTkJez/bBn2ED/J8XLjgD/o9N8l0B/opZ0JG"], ["created_at", "2015-07-23 18:21:09.599369"], ["updated_at", "2015-07-23 18:21:09.599369"], ["auth_token", "f755e28747febdad38ef198ed4847d93"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (0.7ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (102.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (52.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (41.5ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (85.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (52.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.0ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:21:10.162662"], ["updated_at", "2015-07-23 18:21:10.162662"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:21:10 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>980190963}, "subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f755e28747febdad38ef198ed4847d93"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.4ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 980190963], ["watts", 65], ["created_at", "2015-07-23 18:21:10.219811"], ["updated_at", "2015-07-23 18:21:10.219811"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(980190963) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 23ms (ActiveRecord: 3.1ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2b823247e6c8b10c28241025c1d44231"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$2IzKjxJ.NitafSYdMZHtQufjJkQGAe2gwJS5jFAkpTG2.Fd1DYTTC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:21:10.242871"], ["updated_at", "2015-07-23 18:21:10.242871"], ["auth_token", "2b823247e6c8b10c28241025c1d44231"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:21:10.249686"], ["updated_at", "2015-07-23 18:21:10.249686"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:21:10 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2b823247e6c8b10c28241025c1d44231\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.2ms | ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e4bb7dd0bdd6e198662ce0fbdc067e4c"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$/TlXJcRTRbkQhgKzaawH.uwuhb1EbXRwVJCh1oq0JRH1E032/hpbW"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:21:10.312035"], ["updated_at", "2015-07-23 18:21:10.312035"], ["auth_token", "e4bb7dd0bdd6e198662ce0fbdc067e4c"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:21:10.316979"], ["updated_at", "2015-07-23 18:21:10.316979"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:21:10 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e4bb7dd0bdd6e198662ce0fbdc067e4c"]]
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 2.2ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7ca54942253121775dbea4f70425ab1b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$DkLKBu2eP941ynHEnzCg7e9BaHprfQvfyLbxzUB0XRaS88PhjI.02"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:21:10.348518"], ["updated_at", "2015-07-23 18:21:10.348518"], ["auth_token", "7ca54942253121775dbea4f70425ab1b"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:21:10.355208"], ["updated_at", "2015-07-23 18:21:10.355208"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:21:10 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7ca54942253121775dbea4f70425ab1b"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 1.5ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "2076995c82a7d69aebc35e9d34464c3d"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$gPabxzymKqpvbH3n/U4Ny.8DgHCG1qTAfivfFLrzR7sbUzQVGCjiy"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:21:10.382294"], ["updated_at", "2015-07-23 18:21:10.382294"], ["auth_token", "2076995c82a7d69aebc35e9d34464c3d"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:21:10.392592"], ["updated_at", "2015-07-23 18:21:10.392592"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190967/measures" for 127.0.0.1 at 2015-07-23 15:21:10 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190967"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "2076995c82a7d69aebc35e9d34464c3d"]]
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190967]]
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 1.2ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.0ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.5ms)
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (2.0ms)
  Rendered layouts/_alerts.html.erb (0.6ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 21.1ms | ActiveRecord: 1.3ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:21:10.524097"], ["updated_at", "2015-07-23 18:21:10.524097"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/30
Completed 302 Found in 9ms (ActiveRecord: 1.9ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (8.3ms)
  Rendered circuits/new.html.erb within layouts/application (10.3ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 133ms (Views: 129.5ms | ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.0ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (4.3ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (8.6ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (0.9ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 24ms (Views: 12.9ms | ActiveRecord: 7.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:23:11', '2015-07-23 18:23:11', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:23:11', '2015-07-23 18:23:11', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:23:11', '2015-07-23 18:23:11')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:23:11', '2015-07-23 18:23:11')[0m
  [1m[35m (2.7ms)[0m  COMMIT
  [1m[36m (9.4ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (5.3ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (1.5ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (15.4ms)
  Rendered layouts/_header.html.erb (1.4ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 52ms (Views: 36.0ms | ActiveRecord: 8.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_header.html.erb (0.7ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 8.2ms | ActiveRecord: 2.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (13.3ms)
  Rendered circuits/new.html.erb within layouts/application (15.3ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 154ms (Views: 146.5ms | ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.9ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (1.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:23:11.951700"], ["updated_at", "2015-07-23 18:23:11.951700"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/31
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.7ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b414e9ee8adda96011013a633bd97d3a"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$qU.pjytKWyvO0NWvlPhB0uR4Bas0vyCFz8SABNl5LHXSFBvkWlEWC"], ["created_at", "2015-07-23 18:23:11.991409"], ["updated_at", "2015-07-23 18:23:11.991409"], ["auth_token", "b414e9ee8adda96011013a633bd97d3a"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$qU.pjytKWyvO0NWvlPhB0uR4Bas0vyCFz8SABNl5LHXSFBvkWlEWC"], ["created_at", "2015-07-23 18:23:11.991409"], ["updated_at", "2015-07-23 18:23:11.991409"], ["auth_token", "b414e9ee8adda96011013a633bd97d3a"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (1.2ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (106.3ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (110.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (61.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (62.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (51.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:12.580283"], ["updated_at", "2015-07-23 18:23:12.580283"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/32/measures" for 127.0.0.1 at 2015-07-23 15:23:12 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>32}, "subdomain"=>"api", "circuit_id"=>"32"}
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 32]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 32]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 32]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "476710d0b861b6e47c33e110c419e322"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$dVxspQbPFiMKyHRGkrpgH.Qdji4hikJHLv1x1z7ANPP7rgEKGutPm"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:12.651065"], ["updated_at", "2015-07-23 18:23:12.651065"], ["auth_token", "476710d0b861b6e47c33e110c419e322"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:12.665561"], ["updated_at", "2015-07-23 18:23:12.665561"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:23:12 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "727a713099c01203188e6d3d7543b846"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$fZQmBSg0NsQtMKR9pNc/qeKKaDnqCiGjsGN3TVY8ADsV8FFQzjorK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:12.709868"], ["updated_at", "2015-07-23 18:23:12.709868"], ["auth_token", "727a713099c01203188e6d3d7543b846"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:12.717050"], ["updated_at", "2015-07-23 18:23:12.717050"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:23:12 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "04b1a467cc82189bf96542cd1536188f"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$U.F.flwAWMwWG.Uu6lv2CukL0dpDx4eT2prMQsk0kzPlk.qRyJziO"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:12.758903"], ["updated_at", "2015-07-23 18:23:12.758903"], ["auth_token", "04b1a467cc82189bf96542cd1536188f"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:12.766808"], ["updated_at", "2015-07-23 18:23:12.766808"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:23:12 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "609a4f14b7288a400b79341c7c561e67"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Zmy/5wUKqQ5SJ94zoDafTO8nyfWXGhoNDZbhy3skg9B.1JEkgTc.2"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:12.809075"], ["updated_at", "2015-07-23 18:23:12.809075"], ["auth_token", "609a4f14b7288a400b79341c7c561e67"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:12.814225"], ["updated_at", "2015-07-23 18:23:12.814225"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:23:12 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.8ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.4ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.5ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:23:33', '2015-07-23 18:23:33', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:23:33', '2015-07-23 18:23:33', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:23:33', '2015-07-23 18:23:33')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:23:33', '2015-07-23 18:23:33')[0m
  [1m[35m (6.7ms)[0m  COMMIT
  [1m[36m (8.8ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "70421a1aed6c67b6bbcc3faa3e9db5c1"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$wqTWfAyoO.WZtN9bqX0Yh.ryqT.MBS1ZbjJkIz0J511iWpA5HOrY6"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:33.794832"], ["updated_at", "2015-07-23 18:23:33.794832"], ["auth_token", "70421a1aed6c67b6bbcc3faa3e9db5c1"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:33.829245"], ["updated_at", "2015-07-23 18:23:33.829245"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:23:33 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "70421a1aed6c67b6bbcc3faa3e9db5c1"]]
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 18ms (Views: 1.6ms | ActiveRecord: 2.1ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "76dd91339bd8641475a97cb513eda476"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$oEg2yfYqXPueRpINWTnnUucNieZH4Kl6W./I11yZ2x75n3WTUmclC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:33.898369"], ["updated_at", "2015-07-23 18:23:33.898369"], ["auth_token", "76dd91339bd8641475a97cb513eda476"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:33.906592"], ["updated_at", "2015-07-23 18:23:33.906592"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:23:33 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "76dd91339bd8641475a97cb513eda476"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "606e2459733dcbf18ec197aa1543525f"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$h82/5ie7ec93.f0kpHnnh./NTlXdL/vjaDnOHoDVVG0q9G9rVMKri"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:33.937226"], ["updated_at", "2015-07-23 18:23:33.937226"], ["auth_token", "606e2459733dcbf18ec197aa1543525f"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:33.942001"], ["updated_at", "2015-07-23 18:23:33.942001"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:23:33 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "606e2459733dcbf18ec197aa1543525f"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 6ms (Views: 1.6ms | ActiveRecord: 1.7ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2ce70dbfa484f684bf273b0ab9bcbc6c"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Cb0WOKDSnWbvWBAl2rv00eHckwqN6/W4TjMUwXqZsOnZDZ9E9u76K"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:23:33.971400"], ["updated_at", "2015-07-23 18:23:33.971400"], ["auth_token", "2ce70dbfa484f684bf273b0ab9bcbc6c"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:33.976470"], ["updated_at", "2015-07-23 18:23:33.976470"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:23:33 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2ce70dbfa484f684bf273b0ab9bcbc6c\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8c29a4d667d5a4b77cc2cf9b964c292f"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Tj78r9VnOqbkaCo8yPofg.K52PLOsoXm6qEyv/vKVzLiRYaAswZDG"], ["created_at", "2015-07-23 18:23:34.035108"], ["updated_at", "2015-07-23 18:23:34.035108"], ["auth_token", "8c29a4d667d5a4b77cc2cf9b964c292f"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Tj78r9VnOqbkaCo8yPofg.K52PLOsoXm6qEyv/vKVzLiRYaAswZDG"], ["created_at", "2015-07-23 18:23:34.035108"], ["updated_at", "2015-07-23 18:23:34.035108"], ["auth_token", "8c29a4d667d5a4b77cc2cf9b964c292f"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (0.9ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (111.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (55.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (51.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (87.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (52.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (61.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.9ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:23:34.597079"], ["updated_at", "2015-07-23 18:23:34.597079"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/33/measures" for 127.0.0.1 at 2015-07-23 15:23:34 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>33}, "subdomain"=>"api", "circuit_id"=>"33"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8c29a4d667d5a4b77cc2cf9b964c292f"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.2ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 33], ["watts", 65], ["created_at", "2015-07-23 18:23:34.610492"], ["updated_at", "2015-07-23 18:23:34.610492"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(33) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 12ms (ActiveRecord: 4.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 11ms (ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (4.8ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 22ms (Views: 19.2ms | ActiveRecord: 1.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (8.3ms)
  Rendered circuits/new.html.erb within layouts/application (10.1ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 139ms (Views: 133.1ms | ActiveRecord: 1.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.2ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:23:34.910274"], ["updated_at", "2015-07-23 18:23:34.910274"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/34
Completed 302 Found in 8ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (2.4ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (3.5ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.6ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (10.7ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 27ms (Views: 14.5ms | ActiveRecord: 6.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (6.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:24:13', '2015-07-23 18:24:13', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:24:13', '2015-07-23 18:24:13', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:24:13', '2015-07-23 18:24:13')
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:24:13', '2015-07-23 18:24:13')[0m
  [1m[35m (10.0ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "998382f00533408491e8c7baaed1a087"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$CObhNMj6iX4l0/oOhfzwkOqqRRTNkYPgTEilhmXIzuoxhU6UJq4tq"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:13.610982"], ["updated_at", "2015-07-23 18:24:13.610982"], ["auth_token", "998382f00533408491e8c7baaed1a087"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:13.655839"], ["updated_at", "2015-07-23 18:24:13.655839"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:24:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "998382f00533408491e8c7baaed1a087"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 16ms (Views: 1.2ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "65fc9ee12676c99f66254f066db1e162"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$mlp2RLy1.I8edy42DI1iT.uaiJhw6R/YZyBxOv2CMwgDclHfJl6E6"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:13.728487"], ["updated_at", "2015-07-23 18:24:13.728487"], ["auth_token", "65fc9ee12676c99f66254f066db1e162"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:13.737192"], ["updated_at", "2015-07-23 18:24:13.737192"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:24:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "65fc9ee12676c99f66254f066db1e162\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (1.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "9f8a7feabc8a1f1c11ec2d6c0d251ac5"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$iTrJGRglCzIJBg7fQjsGt.aUilTmYNtxgLukKQBftka6EVtgRWaZ."], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:13.794207"], ["updated_at", "2015-07-23 18:24:13.794207"], ["auth_token", "9f8a7feabc8a1f1c11ec2d6c0d251ac5"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:13.801204"], ["updated_at", "2015-07-23 18:24:13.801204"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:24:13 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "9f8a7feabc8a1f1c11ec2d6c0d251ac5"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.6ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "576f5b3102950f45d2d6318d94078c7e"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$L2/euZwYpLZIuS9hmDY1turKpPrl1Kzj4MmIqHDUkVGAVMMx2NFq."], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:13.827674"], ["updated_at", "2015-07-23 18:24:13.827674"], ["auth_token", "576f5b3102950f45d2d6318d94078c7e"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:13.833899"], ["updated_at", "2015-07-23 18:24:13.833899"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:24:13 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "576f5b3102950f45d2d6318d94078c7e"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 1.3ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 15ms (ActiveRecord: 1.7ms)
  [1m[36m (0.8ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (10.8ms)
  Rendered circuits/new.html.erb within layouts/application (17.1ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 155ms (Views: 151.9ms | ActiveRecord: 0.7ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:24:14.083531"], ["updated_at", "2015-07-23 18:24:14.083531"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/35
Completed 302 Found in 14ms (ActiveRecord: 2.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (2.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 6.2ms | ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.9ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (1.0ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (8.6ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 23ms (Views: 11.7ms | ActiveRecord: 5.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9d4394e76987a0439a124ef4f64e2091"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$.TMk/C.BEtme1i53EY/VSeDnGK6vwYVFc2aHHdk1UhzjC.S/0LkDC"], ["created_at", "2015-07-23 18:24:14.196387"], ["updated_at", "2015-07-23 18:24:14.196387"], ["auth_token", "9d4394e76987a0439a124ef4f64e2091"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$.TMk/C.BEtme1i53EY/VSeDnGK6vwYVFc2aHHdk1UhzjC.S/0LkDC"], ["created_at", "2015-07-23 18:24:14.196387"], ["updated_at", "2015-07-23 18:24:14.196387"], ["auth_token", "9d4394e76987a0439a124ef4f64e2091"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (112.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (51.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (104.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (46.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (49.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (42.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:14.749410"], ["updated_at", "2015-07-23 18:24:14.749410"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/36/measures" for 127.0.0.1 at 2015-07-23 15:24:14 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>36}, "subdomain"=>"api", "circuit_id"=>"36"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9d4394e76987a0439a124ef4f64e2091"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (3.8ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 36], ["watts", 65], ["created_at", "2015-07-23 18:24:14.767686"], ["updated_at", "2015-07-23 18:24:14.767686"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(36) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 18ms (ActiveRecord: 5.7ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (12.4ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (1.6ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:24:32', '2015-07-23 18:24:32', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:24:32', '2015-07-23 18:24:32', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:24:32', '2015-07-23 18:24:32')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:24:32', '2015-07-23 18:24:32')[0m
  [1m[35m (6.5ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 10ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:24:32.409539"], ["updated_at", "2015-07-23 18:24:32.409539"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/37
Completed 302 Found in 19ms (ActiveRecord: 3.0ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (8.5ms)
  Rendered circuits/new.html.erb within layouts/application (12.8ms)
  Rendered layouts/_header.html.erb (3.0ms)
  Rendered layouts/_sidebar.html.erb (2.4ms)
  Rendered layouts/_alerts.html.erb (0.7ms)
  Rendered layouts/_footer.html.erb (0.7ms)
Completed 200 OK in 173ms (Views: 168.4ms | ActiveRecord: 1.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (5.5ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 14ms (Views: 9.4ms | ActiveRecord: 2.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "ef18011f915a32ef1786b3cd11286b95"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$p76iNmmu1IaM02Q/p6AyM.KOr..AjDIXu/5.SO3bi4tL4rTtbS4Ya"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:32.681304"], ["updated_at", "2015-07-23 18:24:32.681304"], ["auth_token", "ef18011f915a32ef1786b3cd11286b95"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:32.692458"], ["updated_at", "2015-07-23 18:24:32.692458"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:24:32 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190963]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c0b0e016d122bac1cad92f03ac2d5e5c"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$jwK0tiwnS8.Fy/S./e8AIeW33DSSUK5Bl6vm6WblR4H.1iT//ZL9a"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:32.781974"], ["updated_at", "2015-07-23 18:24:32.781974"], ["auth_token", "c0b0e016d122bac1cad92f03ac2d5e5c"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:32.788198"], ["updated_at", "2015-07-23 18:24:32.788198"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:24:32 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "15e7594be798a7c72908306e7213ce0b"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$94L.66HSj5i2ucs9Inwd.em3jcZIGizuKY8Oi6JPmXoFEwa6/xntK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:32.826847"], ["updated_at", "2015-07-23 18:24:32.826847"], ["auth_token", "15e7594be798a7c72908306e7213ce0b"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:32.833536"], ["updated_at", "2015-07-23 18:24:32.833536"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:24:32 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "6f292e40d9aae64d70cd12b4790292e1"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$xADhv/4jEcnGs5f02sQIsuaHjgD2S.lu0jVeR2LpZ55TocGK70YoC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:24:32.874846"], ["updated_at", "2015-07-23 18:24:32.874846"], ["auth_token", "6f292e40d9aae64d70cd12b4790292e1"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:32.879041"], ["updated_at", "2015-07-23 18:24:32.879041"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:24:32 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (1.0ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (2.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.5ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (7.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 11.3ms | ActiveRecord: 4.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "ca4b448e2113087875538e2d7009396b"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$wbDfT4TiUpjsut3g4CHuH.WjPbXLbGly1VUk1Z83shgEyG7Mk/HWC"], ["created_at", "2015-07-23 18:24:32.945096"], ["updated_at", "2015-07-23 18:24:32.945096"], ["auth_token", "ca4b448e2113087875538e2d7009396b"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$wbDfT4TiUpjsut3g4CHuH.WjPbXLbGly1VUk1Z83shgEyG7Mk/HWC"], ["created_at", "2015-07-23 18:24:32.945096"], ["updated_at", "2015-07-23 18:24:32.945096"], ["auth_token", "ca4b448e2113087875538e2d7009396b"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.6ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (92.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (107.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (39.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (47.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:24:33.471321"], ["updated_at", "2015-07-23 18:24:33.471321"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/38/measures" for 127.0.0.1 at 2015-07-23 15:24:33 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>38}, "subdomain"=>"api", "circuit_id"=>"38"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 38]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 38]]
  [1m[35mSQL (2.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 38]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.7ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:30:30', '2015-07-23 18:30:30', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:30:30', '2015-07-23 18:30:30', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:30:30', '2015-07-23 18:30:30')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:30:30', '2015-07-23 18:30:30')[0m
  [1m[35m (8.2ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.1ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.2ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (9.2ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.5ms)
Completed 200 OK in 37ms (Views: 23.3ms | ActiveRecord: 7.3ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "64f03c08283df83a95ff0494d50a1b91"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$eZIn0Zop1fi.5FbSbXT4nORlQPrUqIHm7wc.fCTUFu68h5tdR8m.e"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:30:30.620130"], ["updated_at", "2015-07-23 18:30:30.620130"], ["auth_token", "64f03c08283df83a95ff0494d50a1b91"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:30:30.652857"], ["updated_at", "2015-07-23 18:30:30.652857"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:30:30 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "64f03c08283df83a95ff0494d50a1b91"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 25ms (Views: 0.9ms | ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1c26e6ef0e771cc7a9ec8cf44ae9c633"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$B4HLmikfoQEyYWhUKmifNeaEqQK9Jgyh4aGnFmRdjX1YmBN9BZZ6C"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:30:30.717886"], ["updated_at", "2015-07-23 18:30:30.717886"], ["auth_token", "1c26e6ef0e771cc7a9ec8cf44ae9c633"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:30:30.723150"], ["updated_at", "2015-07-23 18:30:30.723150"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:30:30 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1c26e6ef0e771cc7a9ec8cf44ae9c633\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 3ms (Views: 0.1ms | ActiveRecord: 0.3ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c6ce2b090d826172217acd990823a37e"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$GkIVrcmfwfI34ZLIh73oleX1P/miTaCE4nUSafJ4mTgqib8JuAt6C"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:30:30.773019"], ["updated_at", "2015-07-23 18:30:30.773019"], ["auth_token", "c6ce2b090d826172217acd990823a37e"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:30:30.777988"], ["updated_at", "2015-07-23 18:30:30.777988"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:30:30 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c6ce2b090d826172217acd990823a37e"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 7ms (Views: 1.5ms | ActiveRecord: 1.5ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "71e80377d7098067993b3c838be8d26e"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5fh94AQBWak.PBtaEW73RuHnRMIeQVik84QUjJZHx0J.TI8HYajUe"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:30:30.804241"], ["updated_at", "2015-07-23 18:30:30.804241"], ["auth_token", "71e80377d7098067993b3c838be8d26e"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:30:30.808143"], ["updated_at", "2015-07-23 18:30:30.808143"]]
  [1m[36m (0.9ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:30:30 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "71e80377d7098067993b3c838be8d26e"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.8ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.8ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "52dce5eecde475cffe1d8e2597f89765"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Lu18nJqnGvQc9yLoXiSvlu/YT6NiPYwtR0zv6/wGp4CbJiUexkxBy"], ["created_at", "2015-07-23 18:30:30.841382"], ["updated_at", "2015-07-23 18:30:30.841382"], ["auth_token", "52dce5eecde475cffe1d8e2597f89765"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Lu18nJqnGvQc9yLoXiSvlu/YT6NiPYwtR0zv6/wGp4CbJiUexkxBy"], ["created_at", "2015-07-23 18:30:30.841382"], ["updated_at", "2015-07-23 18:30:30.841382"], ["auth_token", "52dce5eecde475cffe1d8e2597f89765"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.6ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (106.4ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (95.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (58.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (35.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (4.5ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (46.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (52.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:30:31.391653"], ["updated_at", "2015-07-23 18:30:31.391653"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/39/measures" for 127.0.0.1 at 2015-07-23 15:30:31 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>39}, "subdomain"=>"api", "circuit_id"=>"39"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "52dce5eecde475cffe1d8e2597f89765"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 39], ["watts", 65], ["created_at", "2015-07-23 18:30:31.403194"], ["updated_at", "2015-07-23 18:30:31.403194"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(39) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 10ms (ActiveRecord: 2.4ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.6ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (1.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (9.8ms)
  Rendered circuits/new.html.erb within layouts/application (13.4ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 140ms (Views: 133.6ms | ActiveRecord: 2.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (2.6ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 9ms (Views: 5.1ms | ActiveRecord: 2.0ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:30:31.643196"], ["updated_at", "2015-07-23 18:30:31.643196"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/40
Completed 302 Found in 10ms (ActiveRecord: 2.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.6ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.1ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.5ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:31:20', '2015-07-23 18:31:20', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:31:20', '2015-07-23 18:31:20', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:31:20', '2015-07-23 18:31:20')
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:31:20', '2015-07-23 18:31:20')[0m
  [1m[35m (10.2ms)[0m  COMMIT
  [1m[36m (9.7ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b82ef7e58f15e73bfdf6559893442f3e"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$8CX7whBVxSg4yn9SyBCT4.Zwn7HqflcIxbwAvqqeM0ojYmMKLWCSu"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:31:20.270020"], ["updated_at", "2015-07-23 18:31:20.270020"], ["auth_token", "b82ef7e58f15e73bfdf6559893442f3e"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:31:20.303853"], ["updated_at", "2015-07-23 18:31:20.303853"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:31:20 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b82ef7e58f15e73bfdf6559893442f3e"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 15ms (Views: 1.3ms | ActiveRecord: 1.8ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "69f8625a2f24737479ef46fadf183599"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$6W6DIW26veIIxMOZXirlGOR7XDk2AaM/lvZ7XzgCQxdkfhIRck1LS"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:31:20.374121"], ["updated_at", "2015-07-23 18:31:20.374121"], ["auth_token", "69f8625a2f24737479ef46fadf183599"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:31:20.380264"], ["updated_at", "2015-07-23 18:31:20.380264"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:31:20 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "69f8625a2f24737479ef46fadf183599"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.8ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1b67580fddd7b24f73e0ee13494da7d8"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$3qpRgKm.mIL42Pdocfc6VuSM79oexj/ILKtcldq48kZfWQF4cdgl2"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:31:20.406593"], ["updated_at", "2015-07-23 18:31:20.406593"], ["auth_token", "1b67580fddd7b24f73e0ee13494da7d8"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:31:20.412416"], ["updated_at", "2015-07-23 18:31:20.412416"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:31:20 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1b67580fddd7b24f73e0ee13494da7d8"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 5ms (Views: 1.3ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5de327c6b84eeaa1439e3b7447125356"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$XioF3jRQIKuRxFnSdbRj6OAW3LCbbFlzJkA048DHXbtCHkIOwcjOm"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:31:20.442564"], ["updated_at", "2015-07-23 18:31:20.442564"], ["auth_token", "5de327c6b84eeaa1439e3b7447125356"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:31:20.450110"], ["updated_at", "2015-07-23 18:31:20.450110"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:31:20 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5de327c6b84eeaa1439e3b7447125356\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "fcf92ff1131c8aa218bd303a10b82da1"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eidCA73iHXypfmfIL5iRNeRDapw80LPOEmiap8.Eu4itqK4NoAse."], ["created_at", "2015-07-23 18:31:20.501921"], ["updated_at", "2015-07-23 18:31:20.501921"], ["auth_token", "fcf92ff1131c8aa218bd303a10b82da1"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eidCA73iHXypfmfIL5iRNeRDapw80LPOEmiap8.Eu4itqK4NoAse."], ["created_at", "2015-07-23 18:31:20.501921"], ["updated_at", "2015-07-23 18:31:20.501921"], ["auth_token", "fcf92ff1131c8aa218bd303a10b82da1"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (3.0ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (90.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (41.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (97.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (70.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:31:21.052620"], ["updated_at", "2015-07-23 18:31:21.052620"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/41/measures" for 127.0.0.1 at 2015-07-23 15:31:21 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>41}, "subdomain"=>"api", "circuit_id"=>"41"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "fcf92ff1131c8aa218bd303a10b82da1"]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.3ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 41], ["watts", 65], ["created_at", "2015-07-23 18:31:21.074327"], ["updated_at", "2015-07-23 18:31:21.074327"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(41) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.2ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 17ms (ActiveRecord: 4.2ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (4.5ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 29ms (Views: 19.4ms | ActiveRecord: 1.5ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (9.2ms)
  Rendered circuits/new.html.erb within layouts/application (10.8ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 133ms (Views: 125.4ms | ActiveRecord: 1.2ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 9ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:31:21.341922"], ["updated_at", "2015-07-23 18:31:21.341922"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/42
Completed 302 Found in 10ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 2.2ms)
  [1m[35m (0.6ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (3.6ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (1.7ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (0.8ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (7.8ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 19ms (Views: 11.0ms | ActiveRecord: 5.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 18:32:51', '2015-07-23 18:32:51', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 18:32:51', '2015-07-23 18:32:51', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 18:32:51', '2015-07-23 18:32:51')
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 18:32:51', '2015-07-23 18:32:51')[0m
  [1m[35m (3.5ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.2ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.6ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (9.7ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.2ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 37ms (Views: 22.4ms | ActiveRecord: 5.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "746d43833183a30a81caac8964758111"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$kUmK0rheBHRjhE8F9w8Ef.kqG7Phhu7PBenwMWcBjVzniv1Q2.8aC"], ["created_at", "2015-07-23 18:32:51.134607"], ["updated_at", "2015-07-23 18:32:51.134607"], ["auth_token", "746d43833183a30a81caac8964758111"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$kUmK0rheBHRjhE8F9w8Ef.kqG7Phhu7PBenwMWcBjVzniv1Q2.8aC"], ["created_at", "2015-07-23 18:32:51.134607"], ["updated_at", "2015-07-23 18:32:51.134607"], ["auth_token", "746d43833183a30a81caac8964758111"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.7ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (86.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (59.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (47.4ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (86.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (65.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (41.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:32:51.703300"], ["updated_at", "2015-07-23 18:32:51.703300"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/43/measures" for 127.0.0.1 at 2015-07-23 15:32:51 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>43}, "subdomain"=>"api", "circuit_id"=>"43"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "746d43833183a30a81caac8964758111"]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 43], ["watts", 65], ["created_at", "2015-07-23 18:32:51.753009"], ["updated_at", "2015-07-23 18:32:51.753009"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(43) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 31ms (ActiveRecord: 4.7ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e2efebd5e926405ad09f05f2a610c433"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$mUR4C/DDQXQoj/JUnvJc/OxXtlE7Hmd3UofjDnVmbbuR2MebnyGYi"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:32:51.785895"], ["updated_at", "2015-07-23 18:32:51.785895"], ["auth_token", "e2efebd5e926405ad09f05f2a610c433"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:32:51.790766"], ["updated_at", "2015-07-23 18:32:51.790766"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 15:32:51 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e2efebd5e926405ad09f05f2a610c433"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 7ms (Views: 1.4ms | ActiveRecord: 1.6ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "438dad2be4c74429275440d7719380aa"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$uNJ.LQ35v5I94uJup.TxEumE4txJ89J/uBH1yy03e/V39IRVd2L/."], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:32:51.822343"], ["updated_at", "2015-07-23 18:32:51.822343"], ["auth_token", "438dad2be4c74429275440d7719380aa"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:32:51.828153"], ["updated_at", "2015-07-23 18:32:51.828153"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 15:32:51 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "438dad2be4c74429275440d7719380aa\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[35mMeasure Load (0.9ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5266c16924cd9bc06a923462e3283f5f"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$J9c18tM7j0l5k3tbGAOB1OqgWgE5tLRd59hSAiG816TPiBL2g6p7C"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:32:51.865393"], ["updated_at", "2015-07-23 18:32:51.865393"], ["auth_token", "5266c16924cd9bc06a923462e3283f5f"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:32:51.870610"], ["updated_at", "2015-07-23 18:32:51.870610"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 15:32:51 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5266c16924cd9bc06a923462e3283f5f"]]
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 1.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7a8b88e3a8d90f1e90905833f61c6221"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$AK.MW07MT33zFF/TvhxCN.LM.f5B./O4Wg.3Cd8oanSz2uTMhRwYa"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 18:32:51.890400"], ["updated_at", "2015-07-23 18:32:51.890400"], ["auth_token", "7a8b88e3a8d90f1e90905833f61c6221"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 18:32:51.894643"], ["updated_at", "2015-07-23 18:32:51.894643"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 15:32:51 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7a8b88e3a8d90f1e90905833f61c6221"]]
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 1.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 18:32:51.940780"], ["updated_at", "2015-07-23 18:32:51.940780"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/44
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (10.4ms)
  Rendered circuits/new.html.erb within layouts/application (13.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 138ms (Views: 132.1ms | ActiveRecord: 1.3ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 2.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.2ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 13ms (Views: 9.0ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (4.3ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (1.1ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.9ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 19:01:05', '2015-07-23 19:01:05', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 19:01:05', '2015-07-23 19:01:05', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 19:01:05', '2015-07-23 19:01:05')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 19:01:05', '2015-07-23 19:01:05')[0m
  [1m[35m (12.9ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 19:01:05.369228"], ["updated_at", "2015-07-23 19:01:05.369228"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/45
Completed 302 Found in 14ms (ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (3.9ms)
  Rendered layouts/_header.html.erb (1.3ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 22ms (Views: 17.7ms | ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (7.8ms)
  Rendered circuits/new.html.erb within layouts/application (9.6ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 129ms (Views: 125.7ms | ActiveRecord: 1.3ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.9ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (3.7ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (3.4ms)
  Rendered welcome/_month_status.html.erb (1.0ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (14.6ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 27ms (Views: 17.3ms | ActiveRecord: 6.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "16726d9b57760a8909094fed91bc6f39"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$DDpU0CElIDQM5lUNsUkE6e5eFJOkCegDHx9oIN5l7UHH/YLRXX1RS"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 19:01:05.634179"], ["updated_at", "2015-07-23 19:01:05.634179"], ["auth_token", "16726d9b57760a8909094fed91bc6f39"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 19:01:05.643601"], ["updated_at", "2015-07-23 19:01:05.643601"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 16:01:05 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "16726d9b57760a8909094fed91bc6f39"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 16ms (Views: 1.0ms | ActiveRecord: 1.5ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f318694fea1defa1e780a2c8587aac25"]]
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$62EqTFY5.6zvP/iM7oqDBOQeu3R3h/TLgnkWvWi8dWqVLHo1k02Hu"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 19:01:05.704661"], ["updated_at", "2015-07-23 19:01:05.704661"], ["auth_token", "f318694fea1defa1e780a2c8587aac25"]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 19:01:05.712325"], ["updated_at", "2015-07-23 19:01:05.712325"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 16:01:05 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f318694fea1defa1e780a2c8587aac25"]]
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 1.7ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7de625f7146b340f8a83842c7ad855c8"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$LTjwWUgZ0ytIKo2hDUNy1OjmCPnSe6sAQvVs.oUk/avUBHTTfsFzG"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 19:01:05.744752"], ["updated_at", "2015-07-23 19:01:05.744752"], ["auth_token", "7de625f7146b340f8a83842c7ad855c8"]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 19:01:05.749910"], ["updated_at", "2015-07-23 19:01:05.749910"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 16:01:05 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7de625f7146b340f8a83842c7ad855c8\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a98e7ba8288daff9b11cf0b5d877db88"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$D4CpWZC4P/ZIDNZPYDr3zuGpSSQCmAT1g4bGCmBrMHKu/dEC67nIy"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 19:01:05.797989"], ["updated_at", "2015-07-23 19:01:05.797989"], ["auth_token", "a98e7ba8288daff9b11cf0b5d877db88"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 19:01:05.804644"], ["updated_at", "2015-07-23 19:01:05.804644"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 16:01:05 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a98e7ba8288daff9b11cf0b5d877db88"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f2be141eed7eeacedb3e121f2c22ec5a"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$DEblClF9ksp83k7wNk5LPe1FPdyPxXaxu6yxvmDH798bI60qFohAG"], ["created_at", "2015-07-23 19:01:05.830583"], ["updated_at", "2015-07-23 19:01:05.830583"], ["auth_token", "f2be141eed7eeacedb3e121f2c22ec5a"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$DEblClF9ksp83k7wNk5LPe1FPdyPxXaxu6yxvmDH798bI60qFohAG"], ["created_at", "2015-07-23 19:01:05.830583"], ["updated_at", "2015-07-23 19:01:05.830583"], ["auth_token", "f2be141eed7eeacedb3e121f2c22ec5a"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (98.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (74.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (54.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (108.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (64.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (50.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (43.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 19:01:06.417678"], ["updated_at", "2015-07-23 19:01:06.417678"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/46/measures" for 127.0.0.1 at 2015-07-23 16:01:06 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>46}, "subdomain"=>"api", "circuit_id"=>"46"}
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f2be141eed7eeacedb3e121f2c22ec5a"]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.4ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 46], ["watts", 65], ["created_at", "2015-07-23 19:01:06.433514"], ["updated_at", "2015-07-23 19:01:06.433514"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(46) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.3ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 14ms (ActiveRecord: 4.9ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.8ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 20:06:10', '2015-07-23 20:06:10', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 20:06:10', '2015-07-23 20:06:10', 298486374)
  [1m[36mFixture Delete (0.9ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 20:06:10', '2015-07-23 20:06:10')
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 20:06:10', '2015-07-23 20:06:10')[0m
  [1m[35m (3.8ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.9ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.1ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.1ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 24ms (Views: 16.1ms | ActiveRecord: 2.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 8ms (ActiveRecord: 1.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (9.3ms)
  Rendered circuits/new.html.erb within layouts/application (11.1ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 136ms (Views: 126.5ms | ActiveRecord: 3.4ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.5ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 20:06:10.515356"], ["updated_at", "2015-07-23 20:06:10.515356"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/47
Completed 302 Found in 10ms (ActiveRecord: 1.4ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5ecd6e6dbe378f5c79b9a26bb1f4b08f"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lRxhp2vM/ndJASeAaQX3ke0cS/CFEIA3BaKLS/uzIULvuefkMQMMW"], ["created_at", "2015-07-23 20:06:10.560309"], ["updated_at", "2015-07-23 20:06:10.560309"], ["auth_token", "5ecd6e6dbe378f5c79b9a26bb1f4b08f"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lRxhp2vM/ndJASeAaQX3ke0cS/CFEIA3BaKLS/uzIULvuefkMQMMW"], ["created_at", "2015-07-23 20:06:10.560309"], ["updated_at", "2015-07-23 20:06:10.560309"], ["auth_token", "5ecd6e6dbe378f5c79b9a26bb1f4b08f"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (1.2ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (98.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.4ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (61.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (57.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.5ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (43.1ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:06:11.110491"], ["updated_at", "2015-07-23 20:06:11.110491"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/48/measures" for 127.0.0.1 at 2015-07-23 17:06:11 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>48}, "subdomain"=>"api", "circuit_id"=>"48"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5ecd6e6dbe378f5c79b9a26bb1f4b08f"]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (2.6ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 48], ["watts", 65], ["created_at", "2015-07-23 20:06:11.157249"], ["updated_at", "2015-07-23 20:06:11.157249"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(48) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.3ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 25ms (ActiveRecord: 4.8ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (4.5ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.7ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (2.5ms)
  Rendered welcome/_month_status.html.erb (1.9ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (12.4ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 26ms (Views: 14.8ms | ActiveRecord: 8.1ms)
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "611419b0347965a8a9858f9b6abf1dc1"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$d6e3acOl0famRnaLRhmmT.mS7xSlCsPF0iRkApsrSrSJDC7xYzd9O"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:06:11.219205"], ["updated_at", "2015-07-23 20:06:11.219205"], ["auth_token", "611419b0347965a8a9858f9b6abf1dc1"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:06:11.224371"], ["updated_at", "2015-07-23 20:06:11.224371"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 17:06:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "611419b0347965a8a9858f9b6abf1dc1"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 1.8ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "830893a58e5c13e65f73c257afd7ec60"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$REy8Up3A37q4W6HW03kLHOzNtelGpm3FWiVHmzoW2HJzpoA9ycYdC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:06:11.249961"], ["updated_at", "2015-07-23 20:06:11.249961"], ["auth_token", "830893a58e5c13e65f73c257afd7ec60"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:06:11.254890"], ["updated_at", "2015-07-23 20:06:11.254890"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 17:06:11 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "830893a58e5c13e65f73c257afd7ec60"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a983352ba397807aab645e0027846655"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$SXZGCxou.VWYKKfq6jzwy.YfGbk8XUh1D3TRE89nCR1n6jCS08b0."], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:06:11.284068"], ["updated_at", "2015-07-23 20:06:11.284068"], ["auth_token", "a983352ba397807aab645e0027846655"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:06:11.288536"], ["updated_at", "2015-07-23 20:06:11.288536"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 17:06:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a983352ba397807aab645e0027846655"]]
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.5ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0a4877df4775017a622b602d1ab3a7ea"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5cBT0nBoHHXtfMQQ/v/9oenXVGhOXGwhIQDUrsjjGq7ZHtNetkRPO"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:06:11.310551"], ["updated_at", "2015-07-23 20:06:11.310551"], ["auth_token", "0a4877df4775017a622b602d1ab3a7ea"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:06:11.315855"], ["updated_at", "2015-07-23 20:06:11.315855"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 17:06:11 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0a4877df4775017a622b602d1ab3a7ea\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190966]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (2.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "755e29cb3d6c7e69d14397da29190f47"]]
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$gjh8/xAPk/KC8BwNUkyvT.fxPHgL4DIPHHdtXGFNcP1zJ.8Xcm6Hi"], ["created_at", "2015-07-23 20:19:43.394752"], ["updated_at", "2015-07-23 20:19:43.394752"], ["auth_token", "755e29cb3d6c7e69d14397da29190f47"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$gjh8/xAPk/KC8BwNUkyvT.fxPHgL4DIPHHdtXGFNcP1zJ.8Xcm6Hi"], ["created_at", "2015-07-23 20:19:43.394752"], ["updated_at", "2015-07-23 20:19:43.394752"], ["auth_token", "755e29cb3d6c7e69d14397da29190f47"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (1.3ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
PG::DuplicateSchema: ERROR:  schema "prv_8" already exists
: CREATE SCHEMA "prv_8"
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "32a25a091206c21e766ae49bc27e4b5a"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lZ/r3.Mhv02NyeD66ZpD5ugGCOVHfFX898fJTQ4bamqVjP5h7n4W2"], ["created_at", "2015-07-23 20:21:01.978758"], ["updated_at", "2015-07-23 20:21:01.978758"], ["auth_token", "32a25a091206c21e766ae49bc27e4b5a"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$lZ/r3.Mhv02NyeD66ZpD5ugGCOVHfFX898fJTQ4bamqVjP5h7n4W2"], ["created_at", "2015-07-23 20:21:01.978758"], ["updated_at", "2015-07-23 20:21:01.978758"], ["auth_token", "32a25a091206c21e766ae49bc27e4b5a"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[36m (1.3ms)[0m  [1mCREATE SCHEMA "prv_9"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (106.0ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (52.6ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (87.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (5.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (46.1ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (21.6ms)[0m  COMMIT
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:22:41.942079"], ["updated_at", "2015-07-23 20:22:41.942079"]]
  [1m[36m (16.2ms)[0m  [1mCOMMIT[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (8.6ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-23 20:26:26', '2015-07-23 20:26:26', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-23 20:26:26', '2015-07-23 20:26:26', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-23 20:26:26', '2015-07-23 20:26:26')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-23 20:26:26', '2015-07-23 20:26:26')[0m
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (8.8ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 40ms (Views: 24.8ms | ActiveRecord: 8.8ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8bfcafbc9101d16b1701baa4a511ed72"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$RxnqWOKN7iqm.5Gp.sAFQ.eMa2SDMNeWQCbhn3yrwBk6OZqLZVJji"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:26:26.528437"], ["updated_at", "2015-07-23 20:26:26.528437"], ["auth_token", "8bfcafbc9101d16b1701baa4a511ed72"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:26:26.560232"], ["updated_at", "2015-07-23 20:26:26.560232"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-23 17:26:26 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8bfcafbc9101d16b1701baa4a511ed72"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 17ms (Views: 1.2ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "47a9ad467b170375311c33efc8180271"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$LbhOyLRgMHwuWrZrfV2Y8OkSOZHu1mTq03PIm.rT5dUGM3M.gJ9kC"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:26:26.618254"], ["updated_at", "2015-07-23 20:26:26.618254"], ["auth_token", "47a9ad467b170375311c33efc8180271"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:26:26.623838"], ["updated_at", "2015-07-23 20:26:26.623838"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-23 17:26:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "47a9ad467b170375311c33efc8180271\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190964]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "dbd1379374c652a9881e3651f08d7e07"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$tyr9maMFQA357sedM2SOFuVtLURN8TI.FA1/j1PYCjruWYjq6HhKy"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:26:26.666062"], ["updated_at", "2015-07-23 20:26:26.666062"], ["auth_token", "dbd1379374c652a9881e3651f08d7e07"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:26:26.671301"], ["updated_at", "2015-07-23 20:26:26.671301"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-23 17:26:26 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "dbd1379374c652a9881e3651f08d7e07"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5a29d3dc91a1a5bc4b10cc5c3cbc6907"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$luTAbFYPjFcsjrM1zE0Up.bAj0YaluXovMCFwicUXJtfJ7WFmEnpK"], ["schema_name", "prv_1"], ["created_at", "2015-07-23 20:26:26.691276"], ["updated_at", "2015-07-23 20:26:26.691276"], ["auth_token", "5a29d3dc91a1a5bc4b10cc5c3cbc6907"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:26:26.696146"], ["updated_at", "2015-07-23 20:26:26.696146"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-23 17:26:26 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5a29d3dc91a1a5bc4b10cc5c3cbc6907"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 7ms (Views: 1.6ms | ActiveRecord: 1.8ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.9ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-23 20:26:26.759412"], ["updated_at", "2015-07-23 20:26:26.759412"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/49
Completed 302 Found in 8ms (ActiveRecord: 2.4ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.0ms)
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (7.6ms)
  Rendered circuits/new.html.erb within layouts/application (9.4ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 119ms (Views: 115.4ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.4ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 5.2ms | ActiveRecord: 1.6ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6bfba9e7db969fad091ac3d86fd5e2e8"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bxFdpzQsOhN26t1oTmbvCegs/O/QqBzZUq4KNWhnmDgu5islEwhBG"], ["created_at", "2015-07-23 20:26:26.945833"], ["updated_at", "2015-07-23 20:26:26.945833"], ["auth_token", "6bfba9e7db969fad091ac3d86fd5e2e8"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bxFdpzQsOhN26t1oTmbvCegs/O/QqBzZUq4KNWhnmDgu5islEwhBG"], ["created_at", "2015-07-23 20:26:26.945833"], ["updated_at", "2015-07-23 20:26:26.945833"], ["auth_token", "6bfba9e7db969fad091ac3d86fd5e2e8"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.3ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (101.3ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (49.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (106.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (42.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.2ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (51.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (64.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-23 20:26:27.528596"], ["updated_at", "2015-07-23 20:26:27.528596"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/50/measures" for 127.0.0.1 at 2015-07-23 17:26:27 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>50}, "subdomain"=>"api", "circuit_id"=>"50"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6bfba9e7db969fad091ac3d86fd5e2e8"]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 50], ["watts", 65], ["created_at", "2015-07-23 20:26:27.543271"], ["updated_at", "2015-07-23 20:26:27.543271"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(50) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.2ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 13ms (ActiveRecord: 4.5ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.8ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (33.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (208.9ms)[0m  ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (161.0ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (113.8ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 13:04:11', '2015-07-24 13:04:11', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 13:04:11', '2015-07-24 13:04:11', 298486374)
  [1m[36mFixture Delete (585.3ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (128.2ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 13:04:13', '2015-07-24 13:04:13')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 13:04:13', '2015-07-24 13:04:13')[0m
  [1m[35m (182.8ms)[0m  COMMIT
  [1m[36m (106.0ms)[0m  [1mALTER TABLE "users" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "schema_migrations" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (168.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (49.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 262ms (ActiveRecord: 49.8ms)
  [1m[36m (49.0ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.7ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (4.3ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.6ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 326ms (Views: 324.0ms | ActiveRecord: 0.8ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 6ms (ActiveRecord: 1.6ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.0ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (21.6ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 13:04:15.891160"], ["updated_at", "2015-07-24 13:04:15.891160"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/51
Completed 302 Found in 56ms (ActiveRecord: 23.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.1ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (36.2ms)
  Rendered circuits/new.html.erb within layouts/application (53.4ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 413ms (Views: 409.1ms | ActiveRecord: 0.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "299a45fc8ff83cfaba74d1f3d0c7ebf5"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$S7sVP.APB6HSRtra4EzEi.5LIE3/hLQwHFuNwLXFUoT10n1cmqFPC"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:04:16.427010"], ["updated_at", "2015-07-24 13:04:16.427010"], ["auth_token", "299a45fc8ff83cfaba74d1f3d0c7ebf5"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:04:16.434441"], ["updated_at", "2015-07-24 13:04:16.434441"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 10:04:16 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "299a45fc8ff83cfaba74d1f3d0c7ebf5"]]
  [1m[36mMeasure Load (33.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 144ms (Views: 1.2ms | ActiveRecord: 34.0ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4c984aa6962cb95422ba2e1872e989b4"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$LZveSeyTzQo/V3zIm8ZbkOE21wP/Z2J7L6lmI5QDfeYkb5Xu1At.a"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:04:16.661597"], ["updated_at", "2015-07-24 13:04:16.661597"], ["auth_token", "4c984aa6962cb95422ba2e1872e989b4"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:04:16.665788"], ["updated_at", "2015-07-24 13:04:16.665788"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 10:04:16 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4c984aa6962cb95422ba2e1872e989b4\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.4ms)
  [1m[35mMeasure Load (2.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (3.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0236d678580417b6519db637a9cccc86"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$h4jXeKe8rU.7lsNHR9Wdr.wPQRJ5cfm8mPDQSBJKkGdms/4M59uua"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:04:16.711213"], ["updated_at", "2015-07-24 13:04:16.711213"], ["auth_token", "0236d678580417b6519db637a9cccc86"]]
  [1m[35m (0.9ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:04:16.717218"], ["updated_at", "2015-07-24 13:04:16.717218"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 10:04:16 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0236d678580417b6519db637a9cccc86"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 1.0ms | ActiveRecord: 1.3ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e076e8ce2f9ec6b9919a6defda92e75f"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$T.WBn29l3bR2QOmhlpjv7OYERsF4Z0j2Fo/y.psgpVujFA7vVWc52"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:04:16.739182"], ["updated_at", "2015-07-24 13:04:16.739182"], ["auth_token", "e076e8ce2f9ec6b9919a6defda92e75f"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:04:16.743246"], ["updated_at", "2015-07-24 13:04:16.743246"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 10:04:16 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e076e8ce2f9ec6b9919a6defda92e75f"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a03a3c22df2906c57a1d30f3f241d5ce"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$FBiU7QrFne72sRbrgY.8u.LoHhfzDyIY7KtZEidog9VnXMg8371I2"], ["created_at", "2015-07-24 13:04:16.763424"], ["updated_at", "2015-07-24 13:04:16.763424"], ["auth_token", "a03a3c22df2906c57a1d30f3f241d5ce"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$FBiU7QrFne72sRbrgY.8u.LoHhfzDyIY7KtZEidog9VnXMg8371I2"], ["created_at", "2015-07-24 13:04:16.763424"], ["updated_at", "2015-07-24 13:04:16.763424"], ["auth_token", "a03a3c22df2906c57a1d30f3f241d5ce"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (310.0ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (175.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (1269.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (278.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (205.0ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (432.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (133.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (164.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (529.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (149.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (209.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:04:20.933112"], ["updated_at", "2015-07-24 13:04:20.933112"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/52/measures" for 127.0.0.1 at 2015-07-24 10:04:20 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>52}, "subdomain"=>"api", "circuit_id"=>"52"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "a03a3c22df2906c57a1d30f3f241d5ce"]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.6ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 52], ["watts", 65], ["created_at", "2015-07-24 13:04:20.949076"], ["updated_at", "2015-07-24 13:04:20.949076"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(52) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[36m (0.1ms)[0m  [1mROLLBACK TO SAVEPOINT active_record_1[0m
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.1ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (1.4ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (1.1ms)
  Rendered welcome/_bar_graph.html.erb (0.5ms)
  Rendered welcome/index.html.erb within layouts/application (147.3ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 182ms (Views: 176.8ms | ActiveRecord: 2.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36m (274.5ms)[0m  [1mDROP DATABASE IF EXISTS "solar_test"[0m
  [1m[35m (912.1ms)[0m  CREATE DATABASE "solar_test" ENCODING = 'unicode'
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (108.1ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (86.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (63.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (110.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (49.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (9.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (51.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (62.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (1.0ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (9.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (10.9ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (10.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (11.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (11.0ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (10.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (10.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "measures"
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits"[0m
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "public"."users"
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'example@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('example@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5255bb591529a8395ff936e1f10bacb4"]]
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "example"], ["email", "example@trile.cl"], ["encrypted_password", "$2a$04$MOzsQStleGCbUYQqmsc6Z.TZpIzg99oxcpaVRznH3.aLdzzQVomfe"], ["created_at", "2015-07-24 13:10:52.692492"], ["updated_at", "2015-07-24 13:10:52.692492"], ["auth_token", "5255bb591529a8395ff936e1f10bacb4"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "example"], ["email", "example@trile.cl"], ["encrypted_password", "$2a$04$MOzsQStleGCbUYQqmsc6Z.TZpIzg99oxcpaVRznH3.aLdzzQVomfe"], ["created_at", "2015-07-24 13:10:52.692492"], ["updated_at", "2015-07-24 13:10:52.692492"], ["auth_token", "5255bb591529a8395ff936e1f10bacb4"], ["id", 1], ["schema_name", "prv_1"], ["id", 1]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_1"[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (85.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (71.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (86.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.5ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (60.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (21.0ms)[0m  COMMIT
  [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (4.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.0ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.4ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.6ms)[0m  SELECT "public"."users"."schema_name" FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSELECT "public"."users"."schema_name" FROM "public"."users"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.4ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveUserIdFromCircuits (20150720183845)
  [1m[35m (0.1ms)[0m  BEGIN
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to RemoveUserIdFromCircuits (20150720183845)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "circuits" ADD "user_id" integer[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150720183845"]]
  [1m[36m (17.7ms)[0m  [1mCOMMIT[0m
Migrating to AddSchemaNameToUser (20150720181315)
  [1m[35m (0.2ms)[0m  BEGIN
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "users" DROP "schema_name"[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1  [["version", "20150720181315"]]
  [1m[36m (5.1ms)[0m  [1mCOMMIT[0m
Migrating to SetAlarmsInCircuits (20150612152327)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20150612152327"]]
  [1m[35m (6.7ms)[0m  COMMIT
Migrating to AddAlarmTimeToCircuits (20150612150456)
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "circuits" DROP "alarm_time"
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20150612150456"]]
  [1m[35m (4.6ms)[0m  COMMIT
Migrating to Measure (20150522130847)
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35m (7.5ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (1.1ms)[0m  [1mALTER TABLE "measures" DROP CONSTRAINT "fk_rails_0d9a1dd04c"[0m
  [1m[35m (1.7ms)[0m  DROP TABLE "measures"
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "schema_migrations" WHERE "schema_migrations"."version" = $1[0m  [["version", "20150522130847"]]
  [1m[35m (5.8ms)[0m  COMMIT
Migrating to CreateCircuits (20150513183751)
  [1m[36m (0.6ms)[0m  [1mBEGIN[0m
  [1m[35m (5.8ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (0.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (1.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.6ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateCircuits (20150513183751)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (9.0ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.5ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to Measure (20150522130847)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (52.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures"  ("circuit_id")
  [1m[36m (4.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35mSQL (1.0ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150522130847"]]
  [1m[36m (13.9ms)[0m  [1mCOMMIT[0m
Migrating to AddAlarmTimeToCircuits (20150612150456)
  [1m[35m (0.5ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "circuits" ADD "alarm_time" integer[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150612150456"]]
  [1m[36m (12.6ms)[0m  [1mCOMMIT[0m
Migrating to SetAlarmsInCircuits (20150612152327)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150612152327"]]
  [1m[36m (11.1ms)[0m  [1mCOMMIT[0m
Migrating to AddSchemaNameToUser (20150720181315)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "users" ADD "schema_name" character varying[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150720181315"]]
  [1m[36m (12.5ms)[0m  [1mCOMMIT[0m
Migrating to RemoveUserIdFromCircuits (20150720183845)
  [1m[35m (0.3ms)[0m  BEGIN
  [1m[36m (1.0ms)[0m  [1mALTER TABLE "circuits" DROP "user_id"[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES ($1)  [["version", "20150720183845"]]
  [1m[36m (12.0ms)[0m  [1mCOMMIT[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.5ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (6.2ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'circuits'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (4.3ms)[0m  SELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'measures'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname

  [1m[36m (3.6ms)[0m  [1mSELECT t2.oid::regclass::text AS to_table, a1.attname AS column, a2.attname AS primary_key, c.conname AS name, c.confupdtype AS on_update, c.confdeltype AS on_delete
FROM pg_constraint c
JOIN pg_class t1 ON c.conrelid = t1.oid
JOIN pg_class t2 ON c.confrelid = t2.oid
JOIN pg_attribute a1 ON a1.attnum = c.conkey[1] AND a1.attrelid = t1.oid
JOIN pg_attribute a2 ON a2.attnum = c.confkey[1] AND a2.attrelid = t2.oid
JOIN pg_namespace t3 ON c.connamespace = t3.oid
WHERE c.contype = 'f'
  AND t1.relname = 'users'
  AND t3.nspname = ANY (current_schemas(false))
ORDER BY c.conname
[0m
  [1m[35m (0.6ms)[0m  SELECT "public"."users"."schema_name" FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSELECT "public"."users"."schema_name" FROM "public"."users"[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mSELECT "schema_migrations"."version" FROM "schema_migrations"[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 13:32:24', '2015-07-24 13:32:24', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 13:32:24', '2015-07-24 13:32:24', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 13:32:24', '2015-07-24 13:32:24')
  [1m[36mFixture Insert (0.2ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 13:32:24', '2015-07-24 13:32:24')[0m
  [1m[35m (4.5ms)[0m  COMMIT
  [1m[36m (10.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e832b86faf9d7a609aa68f6474f44f80"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$JVkA6B1.xxW6sIyrXhF5keULcPE6dtI.3CrpI2odV6cr2HKq972Jy"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:32:24.599478"], ["updated_at", "2015-07-24 13:32:24.599478"], ["auth_token", "e832b86faf9d7a609aa68f6474f44f80"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:32:24.626735"], ["updated_at", "2015-07-24 13:32:24.626735"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 10:32:24 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e832b86faf9d7a609aa68f6474f44f80\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a0aac30a7873ad843624d5993799c77f"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$2eYTbqgikXlklUxTMsCWreultv.GiXLhNr/tmBSQ8f1U/JZA/CTFi"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:32:24.697552"], ["updated_at", "2015-07-24 13:32:24.697552"], ["auth_token", "a0aac30a7873ad843624d5993799c77f"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:32:24.701064"], ["updated_at", "2015-07-24 13:32:24.701064"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 10:32:24 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a0aac30a7873ad843624d5993799c77f"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 3ms (Views: 0.8ms | ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b021c7cd157f797299478e34cfed2f22"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$xVL5jh9kUZ0Iz9q0GLVogunNgfSM01ZmbV0OfgSiWTnRexr6neTua"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:32:24.717411"], ["updated_at", "2015-07-24 13:32:24.717411"], ["auth_token", "b021c7cd157f797299478e34cfed2f22"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:32:24.722910"], ["updated_at", "2015-07-24 13:32:24.722910"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 10:32:24 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b021c7cd157f797299478e34cfed2f22"]]
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.8ms | ActiveRecord: 0.9ms)
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2794ad6e93528bd0e8b950910c08be11"]]
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$T2gBuDldna5DVJ0YgzPlj.gKFRxDtGtcXhlQxTu34ctWuMx91W0Ye"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:32:24.744208"], ["updated_at", "2015-07-24 13:32:24.744208"], ["auth_token", "2794ad6e93528bd0e8b950910c08be11"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:32:24.749056"], ["updated_at", "2015-07-24 13:32:24.749056"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 10:32:24 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2794ad6e93528bd0e8b950910c08be11"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.6ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.5ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.2ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (9.1ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 27ms (Views: 19.3ms | ActiveRecord: 2.9ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bcbe2818a254720f8555ff967a0e5061"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$H96hFK5W5RtlLNQL2MTXr.rwtC/GYZCxLX84ga7b.6Tm2F6pKYZsa"], ["created_at", "2015-07-24 13:32:24.804786"], ["updated_at", "2015-07-24 13:32:24.804786"], ["auth_token", "bcbe2818a254720f8555ff967a0e5061"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$H96hFK5W5RtlLNQL2MTXr.rwtC/GYZCxLX84ga7b.6Tm2F6pKYZsa"], ["created_at", "2015-07-24 13:32:24.804786"], ["updated_at", "2015-07-24 13:32:24.804786"], ["auth_token", "bcbe2818a254720f8555ff967a0e5061"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (90.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (57.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (84.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (43.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (43.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (54.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:32:25.293503"], ["updated_at", "2015-07-24 13:32:25.293503"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 10:32:25 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bcbe2818a254720f8555ff967a0e5061"]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 13:32:25.303498"], ["updated_at", "2015-07-24 13:32:25.303498"]]
PG::ForeignKeyViolation: ERROR:  insert or update on table "measures" violates foreign key constraint "fk_rails_0d9a1dd04c"
DETAIL:  Key (circuit_id)=(1) is not present in table "circuits".
: INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"
  [1m[35m (0.1ms)[0m  ROLLBACK TO SAVEPOINT active_record_1
Completed 500 Internal Server Error in 8ms (ActiveRecord: 2.1ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 0.9ms)
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.0ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.2ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 3ms (ActiveRecord: 0.8ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (2.4ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 7ms (Views: 5.1ms | ActiveRecord: 0.8ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 13:32:25.376441"], ["updated_at", "2015-07-24 13:32:25.376441"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/2
Completed 302 Found in 7ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.1ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.1ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (6.5ms)
  Rendered circuits/new.html.erb within layouts/application (8.1ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 124ms (Views: 121.5ms | ActiveRecord: 0.5ms)
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.2ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 13:48:50', '2015-07-24 13:48:50', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 13:48:50', '2015-07-24 13:48:50', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 13:48:50', '2015-07-24 13:48:50')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 13:48:50', '2015-07-24 13:48:50')[0m
  [1m[35m (5.8ms)[0m  COMMIT
  [1m[36m (9.8ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f1f7afa1b65f0a43f27f72300eade5c8"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$25JC.weg9AVnwD/w7/U97uwc/HnJIgvir3XvTxcVxUpWEAC6EVgJ6"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:48:50.593709"], ["updated_at", "2015-07-24 13:48:50.593709"], ["auth_token", "f1f7afa1b65f0a43f27f72300eade5c8"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:48:50.628379"], ["updated_at", "2015-07-24 13:48:50.628379"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 10:48:50 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f1f7afa1b65f0a43f27f72300eade5c8\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 11ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190963]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4e68912ca158ec7f4a335ad57402cb98"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$nDxOjURiNkAiySFdSYDknuIdlUipx6cJZVG.QA5Q9DWjCBFJ..IzK"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:48:50.712416"], ["updated_at", "2015-07-24 13:48:50.712416"], ["auth_token", "4e68912ca158ec7f4a335ad57402cb98"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:48:50.717139"], ["updated_at", "2015-07-24 13:48:50.717139"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 10:48:50 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4e68912ca158ec7f4a335ad57402cb98"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 1.1ms | ActiveRecord: 2.1ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.8ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "dce5d434344f82ee88d2bebdd535a566"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VgOrPCQmr8RoxXGRMwPxL.ffgjzPBJwQwG4C/MkawrnlyMuy7Wm42"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:48:50.747262"], ["updated_at", "2015-07-24 13:48:50.747262"], ["auth_token", "dce5d434344f82ee88d2bebdd535a566"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:48:50.752408"], ["updated_at", "2015-07-24 13:48:50.752408"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 10:48:50 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "dce5d434344f82ee88d2bebdd535a566"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.7ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f78ce4280f3ca05459938df3a0fe0ec5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$X1v8fsPSor9tGYOMO5cUau2UPfWezC.89Js9tUPAMVVWhfZPiyM5K"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:48:50.778010"], ["updated_at", "2015-07-24 13:48:50.778010"], ["auth_token", "f78ce4280f3ca05459938df3a0fe0ec5"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:48:50.786526"], ["updated_at", "2015-07-24 13:48:50.786526"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 10:48:50 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f78ce4280f3ca05459938df3a0fe0ec5"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 11ms (ActiveRecord: 1.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 13:48:50.863716"], ["updated_at", "2015-07-24 13:48:50.863716"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/3
Completed 302 Found in 10ms (ActiveRecord: 2.8ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (6.7ms)
  Rendered circuits/new.html.erb within layouts/application (11.3ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 127ms (Views: 122.7ms | ActiveRecord: 1.4ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (2.3ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 8ms (Views: 4.8ms | ActiveRecord: 1.6ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e6e42b5e75254f6dd894b4de4c01cce4"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$mTYbKxJQ1JecLV2SyNtzEePSLJpOzaz2JtJuMG4lpcJb6dP32/062"], ["created_at", "2015-07-24 13:48:51.056602"], ["updated_at", "2015-07-24 13:48:51.056602"], ["auth_token", "e6e42b5e75254f6dd894b4de4c01cce4"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$mTYbKxJQ1JecLV2SyNtzEePSLJpOzaz2JtJuMG4lpcJb6dP32/062"], ["created_at", "2015-07-24 13:48:51.056602"], ["updated_at", "2015-07-24 13:48:51.056602"], ["auth_token", "e6e42b5e75254f6dd894b4de4c01cce4"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (1.1ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (114.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (38.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (54.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (37.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:48:51.594174"], ["updated_at", "2015-07-24 13:48:51.594174"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/4/measures" for 127.0.0.1 at 2015-07-24 10:48:51 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>4}, "subdomain"=>"api", "circuit_id"=>"4"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "e6e42b5e75254f6dd894b4de4c01cce4"]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 4]]
Completed 404 Not Found in 9ms (ActiveRecord: 2.3ms)
  [1m[35m (4.0ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (2.6ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.5ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (2.1ms)
  Rendered welcome/_month_status.html.erb (1.1ms)
  Rendered welcome/_bar_graph.html.erb (0.8ms)
  Rendered welcome/index.html.erb within layouts/application (10.5ms)
  Rendered layouts/_header.html.erb (0.8ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 23ms (Views: 13.7ms | ActiveRecord: 5.6ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 13:52:59', '2015-07-24 13:52:59', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 13:52:59', '2015-07-24 13:52:59', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 13:52:59', '2015-07-24 13:52:59')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 13:52:59', '2015-07-24 13:52:59')[0m
  [1m[35m (5.9ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8aaa8a595b6a1118b0181ba49ecd5f5e"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ucbrugbP2QJ/fRbh2Eo2/OQ0whHbE0yMB6UJ7A4FJDDTt4.NS9aQi"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:52:59.404343"], ["updated_at", "2015-07-24 13:52:59.404343"], ["auth_token", "8aaa8a595b6a1118b0181ba49ecd5f5e"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:52:59.437049"], ["updated_at", "2015-07-24 13:52:59.437049"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 10:52:59 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8aaa8a595b6a1118b0181ba49ecd5f5e"]]
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 15ms (Views: 1.5ms | ActiveRecord: 2.3ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c9021cb0f63b65cbeed873567d1754e6"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$l7IkOW7IYvSkGm.DCRSC4.4JQPNW0p41WzH9UmJSiF0.dk11xnqDC"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:52:59.501527"], ["updated_at", "2015-07-24 13:52:59.501527"], ["auth_token", "c9021cb0f63b65cbeed873567d1754e6"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:52:59.507848"], ["updated_at", "2015-07-24 13:52:59.507848"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 10:52:59 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c9021cb0f63b65cbeed873567d1754e6"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b5365248e04a184678084bd34e759ea5"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$chgxygGwufra.jYyK.OR/ePU0atjuGZvx3S4NkKv4okqxxVHv/uVe"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:52:59.532563"], ["updated_at", "2015-07-24 13:52:59.532563"], ["auth_token", "b5365248e04a184678084bd34e759ea5"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:52:59.537672"], ["updated_at", "2015-07-24 13:52:59.537672"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 10:52:59 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b5365248e04a184678084bd34e759ea5\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.8ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f7912e3c5839dc872ee0fb51d155b6dd"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$/9fOTnGQJEYFlrXyuD914uXk78ick7EWId4wsItqg4v1n3ewexP3m"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:52:59.582194"], ["updated_at", "2015-07-24 13:52:59.582194"], ["auth_token", "f7912e3c5839dc872ee0fb51d155b6dd"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:52:59.588470"], ["updated_at", "2015-07-24 13:52:59.588470"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 10:52:59 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f7912e3c5839dc872ee0fb51d155b6dd"]]
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 2.2ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (1.0ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.6ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.7ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.5ms)
  Rendered welcome/_month_status.html.erb (0.5ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (11.2ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.0ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 40ms (Views: 25.0ms | ActiveRecord: 8.0ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3ad5721e5f41c7e31ab9c7c82df1f58e"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JaRvKvGwoL/E/dTNWB6uGefuNoyAm0NEWLvE6YfElyu/kdNIuxvR6"], ["created_at", "2015-07-24 13:52:59.669767"], ["updated_at", "2015-07-24 13:52:59.669767"], ["auth_token", "3ad5721e5f41c7e31ab9c7c82df1f58e"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JaRvKvGwoL/E/dTNWB6uGefuNoyAm0NEWLvE6YfElyu/kdNIuxvR6"], ["created_at", "2015-07-24 13:52:59.669767"], ["updated_at", "2015-07-24 13:52:59.669767"], ["auth_token", "3ad5721e5f41c7e31ab9c7c82df1f58e"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.0ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (107.5ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.5ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (118.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (48.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.5ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (63.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (4.0ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  Rendered circuits/_form.html.erb (8.6ms)
  Rendered circuits/new.html.erb within layouts/application (10.8ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 120ms (Views: 115.7ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.2ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.1ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.8ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (2.4ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 8ms (Views: 4.9ms | ActiveRecord: 1.7ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 13:53:00.471447"], ["updated_at", "2015-07-24 13:53:00.471447"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/5
Completed 302 Found in 8ms (ActiveRecord: 2.0ms)
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (21.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 13:53:49', '2015-07-24 13:53:49', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 13:53:49', '2015-07-24 13:53:49', 298486374)
  [1m[36mFixture Delete (1.1ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.7ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 13:53:49', '2015-07-24 13:53:49')
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 13:53:49', '2015-07-24 13:53:49')[0m
  [1m[35m (10.7ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "57a1d00367785b29f2a3e0be80391784"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$P9hXdjSXDnkibPlzdI3aFet8xGrPlrkEoIAP14a8dH.LuPFkZWgIu"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:53:49.679446"], ["updated_at", "2015-07-24 13:53:49.679446"], ["auth_token", "57a1d00367785b29f2a3e0be80391784"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:53:49.718129"], ["updated_at", "2015-07-24 13:53:49.718129"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 10:53:49 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "57a1d00367785b29f2a3e0be80391784"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 14ms (Views: 1.2ms | ActiveRecord: 1.3ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9c7f55610eccba635bb1273d4723100c"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$EKY6LhSalvuHJ4HYeFJrfuTujym7njoq7JqhiOFzMpf4HDyMwljnm"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:53:49.784825"], ["updated_at", "2015-07-24 13:53:49.784825"], ["auth_token", "9c7f55610eccba635bb1273d4723100c"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:53:49.791844"], ["updated_at", "2015-07-24 13:53:49.791844"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 10:53:49 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "9c7f55610eccba635bb1273d4723100c"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 3ms (Views: 0.6ms | ActiveRecord: 0.9ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.1ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f18208ab5b81a4850fe1d0851681d808"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$1YVFzKtyv2lFMsKFZrUX9.G/wfxCxBzbx.odI1dC4KqtYa7KpBuUu"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:53:49.811282"], ["updated_at", "2015-07-24 13:53:49.811282"], ["auth_token", "f18208ab5b81a4850fe1d0851681d808"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:53:49.814943"], ["updated_at", "2015-07-24 13:53:49.814943"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 10:53:49 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f18208ab5b81a4850fe1d0851681d808\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.2ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "649f05ee1d8d1902a93a75a499a141fc"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$SjKDmO459Ndf83Spnu8KG.QGpwzv0gNSLJprrpB5hWHunf28.9AfO"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 13:53:49.853241"], ["updated_at", "2015-07-24 13:53:49.853241"], ["auth_token", "649f05ee1d8d1902a93a75a499a141fc"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:53:49.858619"], ["updated_at", "2015-07-24 13:53:49.858619"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 10:53:49 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "649f05ee1d8d1902a93a75a499a141fc"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 2.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (6.6ms)
  Rendered circuits/new.html.erb within layouts/application (12.0ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 141ms (Views: 131.8ms | ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.9ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.7ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 13:53:50.078894"], ["updated_at", "2015-07-24 13:53:50.078894"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/6
Completed 302 Found in 9ms (ActiveRecord: 2.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.8ms)[0m  SELECT "circuits".* FROM "circuits"
  Rendered circuits/index.html.erb within layouts/application (6.2ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.2ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 17ms (Views: 13.2ms | ActiveRecord: 2.1ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 4ms (ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.7ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.5ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.5ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (2.3ms)
  Rendered welcome/_month_status.html.erb (1.2ms)
  Rendered welcome/_bar_graph.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (11.0ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 24ms (Views: 14.0ms | ActiveRecord: 7.4ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "91db86d1c40c3e5302a7322a4ebd8ead"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$5Xt9/dbN57M3WzATSC8hB.cPSysDrn7ZtHPLnHlnikMnKxMWoOGpa"], ["created_at", "2015-07-24 13:53:50.178607"], ["updated_at", "2015-07-24 13:53:50.178607"], ["auth_token", "91db86d1c40c3e5302a7322a4ebd8ead"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$5Xt9/dbN57M3WzATSC8hB.cPSysDrn7ZtHPLnHlnikMnKxMWoOGpa"], ["created_at", "2015-07-24 13:53:50.178607"], ["updated_at", "2015-07-24 13:53:50.178607"], ["auth_token", "91db86d1c40c3e5302a7322a4ebd8ead"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.6ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.6ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (406.6ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (38.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (105.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (75.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (52.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 13:53:51.045228"], ["updated_at", "2015-07-24 13:53:51.045228"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 10:53:51 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "91db86d1c40c3e5302a7322a4ebd8ead"]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 13:53:51.061036"], ["updated_at", "2015-07-24 13:53:51.061036"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 12ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.2ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (19.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 14:25:28', '2015-07-24 14:25:28', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 14:25:28', '2015-07-24 14:25:28', 298486374)
  [1m[36mFixture Delete (0.7ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 14:25:28', '2015-07-24 14:25:28')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 14:25:28', '2015-07-24 14:25:28')[0m
  [1m[35m (9.5ms)[0m  COMMIT
  [1m[36m (9.3ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.4ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.9ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (3.2ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.6ms)
  Rendered welcome/_month_status.html.erb (0.7ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (14.6ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 41ms (Views: 25.6ms | ActiveRecord: 9.2ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.0ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bc62a6f765dddaa0cf575a945eb93e90"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$o1DyEdJLS8Gnh5kLXmA7LO6lJJ3B28s6dfiAK.BprcwSBVTY8LbYa"], ["created_at", "2015-07-24 14:25:28.319694"], ["updated_at", "2015-07-24 14:25:28.319694"], ["auth_token", "bc62a6f765dddaa0cf575a945eb93e90"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$o1DyEdJLS8Gnh5kLXmA7LO6lJJ3B28s6dfiAK.BprcwSBVTY8LbYa"], ["created_at", "2015-07-24 14:25:28.319694"], ["updated_at", "2015-07-24 14:25:28.319694"], ["auth_token", "bc62a6f765dddaa0cf575a945eb93e90"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.6ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (135.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (44.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (106.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (50.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (50.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (48.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (50.8ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:25:28.956973"], ["updated_at", "2015-07-24 14:25:28.956973"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 11:25:28 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bc62a6f765dddaa0cf575a945eb93e90"]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 14:25:29.004992"], ["updated_at", "2015-07-24 14:25:29.004992"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 27ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  Rendered circuits/_form.html.erb (8.2ms)
  Rendered circuits/new.html.erb within layouts/application (9.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 118ms (Views: 114.4ms | ActiveRecord: 1.3ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "MyText"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 14:25:29.180671"], ["updated_at", "2015-07-24 14:25:29.180671"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/7
Completed 302 Found in 9ms (ActiveRecord: 2.3ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.9ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"980190962"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.9ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35mCircuit Load (0.6ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"MyText", "type"=>"Demand"}, "id"=>"980190962"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 5ms (ActiveRecord: 1.8ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 980190962]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  Rendered circuits/index.html.erb within layouts/application (3.5ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 10ms (Views: 7.0ms | ActiveRecord: 1.7ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"980190962"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 980190962]]
Attempt to access invalid circuit 980190962
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 2.0ms)
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "870523fc6cb47e4bb322a665ac284efb"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$D1FiomE/piNAQQ3oq.cnAe0cIiWTXj6nCDs1rPKdPRkCM5ySCtcoq"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:25:29.278388"], ["updated_at", "2015-07-24 14:25:29.278388"], ["auth_token", "870523fc6cb47e4bb322a665ac284efb"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:25:29.282769"], ["updated_at", "2015-07-24 14:25:29.282769"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 11:25:29 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "870523fc6cb47e4bb322a665ac284efb"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 6ms (Views: 1.2ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7aa096d56485c102ab9e9e229036e7c5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ZhVqSm6JDAZC8Tjohypzi.I1s7mIF7ITUXE76EtueFzLb6VbCbg2u"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:25:29.311777"], ["updated_at", "2015-07-24 14:25:29.311777"], ["auth_token", "7aa096d56485c102ab9e9e229036e7c5"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:25:29.317119"], ["updated_at", "2015-07-24 14:25:29.317119"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 11:25:29 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7aa096d56485c102ab9e9e229036e7c5\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190964]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f205da2c13be05271bbb9b612e096cde"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$KYRacOYj5nrYzkT0nVuviO25pAOrvHk8d4uI.S8LPkjCTAvGLZ8Ny"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:25:29.359330"], ["updated_at", "2015-07-24 14:25:29.359330"], ["auth_token", "f205da2c13be05271bbb9b612e096cde"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:25:29.366864"], ["updated_at", "2015-07-24 14:25:29.366864"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 11:25:29 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f205da2c13be05271bbb9b612e096cde"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.8ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "13a749742adf027f5835731f4e4c41fa"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$APx5wFYsCc.efplF0JO9auHsYDrUKB9IHbScyWyQ3vLUJYZk4NR2y"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:25:29.390911"], ["updated_at", "2015-07-24 14:25:29.390911"], ["auth_token", "13a749742adf027f5835731f4e4c41fa"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:25:29.395967"], ["updated_at", "2015-07-24 14:25:29.395967"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 11:25:29 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "13a749742adf027f5835731f4e4c41fa"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (11.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.7ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 14:51:28', '2015-07-24 14:51:28', 980190962)[0m
  [1m[35mFixture Insert (0.2ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 14:51:28', '2015-07-24 14:51:28', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 14:51:28', '2015-07-24 14:51:28')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 14:51:28', '2015-07-24 14:51:28')[0m
  [1m[35m (11.7ms)[0m  COMMIT
  [1m[36m (9.0ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.3ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.7ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (12.2ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 37ms (Views: 23.5ms | ActiveRecord: 7.0ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.9ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (1.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0ca85d9dcba554f8da3fd453760b56b8"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$hqnLCvPhxFHfQj/5/zkxY.JhpumEJaZd3KFO/ruSrXDj9RYogjQB2"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:51:28.732453"], ["updated_at", "2015-07-24 14:51:28.732453"], ["auth_token", "0ca85d9dcba554f8da3fd453760b56b8"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:28.763110"], ["updated_at", "2015-07-24 14:51:28.763110"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 11:51:28 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0ca85d9dcba554f8da3fd453760b56b8"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 17ms (Views: 1.1ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "97b3a502ef71f122b42c9dc74d87b77f"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Hi4NwI6X51CffRyzbU6JzuQyVeeBD46QIqmmYWrzkGwfJGuj6OlG6"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:51:28.823264"], ["updated_at", "2015-07-24 14:51:28.823264"], ["auth_token", "97b3a502ef71f122b42c9dc74d87b77f"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:28.829298"], ["updated_at", "2015-07-24 14:51:28.829298"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 11:51:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "97b3a502ef71f122b42c9dc74d87b77f"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0c9bc06c5dc4a334171b8b724f4f746c"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$evzFpSiOefHRrUfkHIwSveSs1dvQGSQAMsY0EHoOC8EKu1VcJKhw."], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:51:28.855418"], ["updated_at", "2015-07-24 14:51:28.855418"], ["auth_token", "0c9bc06c5dc4a334171b8b724f4f746c"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:28.859935"], ["updated_at", "2015-07-24 14:51:28.859935"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 11:51:28 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0c9bc06c5dc4a334171b8b724f4f746c\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5f53629075852019588fdfa38f56414c"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$WqcgA2zZ6VC2zIpuiOl5beBJcV.VolgDmJPxkPoTZe17/n3mVrBQu"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:51:28.906513"], ["updated_at", "2015-07-24 14:51:28.906513"], ["auth_token", "5f53629075852019588fdfa38f56414c"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:28.910801"], ["updated_at", "2015-07-24 14:51:28.910801"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 11:51:28 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5f53629075852019588fdfa38f56414c"]]
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.5ms | ActiveRecord: 1.7ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "62144fc97b126da91bb026fc4328aa70"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$MQ9ZDj/PbCicNIin7LM/zeZY85VSnOP5BHAs.DCWKx7HaDmJmgESa"], ["created_at", "2015-07-24 14:51:28.932086"], ["updated_at", "2015-07-24 14:51:28.932086"], ["auth_token", "62144fc97b126da91bb026fc4328aa70"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$MQ9ZDj/PbCicNIin7LM/zeZY85VSnOP5BHAs.DCWKx7HaDmJmgESa"], ["created_at", "2015-07-24 14:51:28.932086"], ["updated_at", "2015-07-24 14:51:28.932086"], ["auth_token", "62144fc97b126da91bb026fc4328aa70"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (1.3ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (85.5ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (59.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (38.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (95.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (49.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (63.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.5ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (49.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (50.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:29.495466"], ["updated_at", "2015-07-24 14:51:29.495466"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "2d9f3cc802d8b7c2b5d5ad7c59d8185c"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$OcpwV0NsCL9cG17D791kou184ZTZa6.o9Pl/xkwImCrevrHdL5v0q"], ["created_at", "2015-07-24 14:51:29.527114"], ["updated_at", "2015-07-24 14:51:29.527114"], ["auth_token", "2d9f3cc802d8b7c2b5d5ad7c59d8185c"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$OcpwV0NsCL9cG17D791kou184ZTZa6.o9Pl/xkwImCrevrHdL5v0q"], ["created_at", "2015-07-24 14:51:29.527114"], ["updated_at", "2015-07-24 14:51:29.527114"], ["auth_token", "2d9f3cc802d8b7c2b5d5ad7c59d8185c"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (93.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (72.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (99.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:30.071496"], ["updated_at", "2015-07-24 14:51:30.071496"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "b84646022fdb25130a7d06609f2d58be"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$CpOujWqfWkUKy2C.llrEiu.yeZPtJ67.P3/rhlwJjY9pX5.VM9Ocu"], ["created_at", "2015-07-24 14:51:30.090236"], ["updated_at", "2015-07-24 14:51:30.090236"], ["auth_token", "b84646022fdb25130a7d06609f2d58be"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$CpOujWqfWkUKy2C.llrEiu.yeZPtJ67.P3/rhlwJjY9pX5.VM9Ocu"], ["created_at", "2015-07-24 14:51:30.090236"], ["updated_at", "2015-07-24 14:51:30.090236"], ["auth_token", "b84646022fdb25130a7d06609f2d58be"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[35m (0.3ms)[0m  CREATE SCHEMA "prv_9"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (82.1ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (108.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (50.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (54.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:30.604792"], ["updated_at", "2015-07-24 14:51:30.604792"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "fee5c6320afc9215fb76758c988c32d9"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bCKv2wjaq7AMORrMqfjriOcL.PbUpBICkcraWC0C4WsfPUKc72b92"], ["created_at", "2015-07-24 14:51:30.634579"], ["updated_at", "2015-07-24 14:51:30.634579"], ["auth_token", "fee5c6320afc9215fb76758c988c32d9"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bCKv2wjaq7AMORrMqfjriOcL.PbUpBICkcraWC0C4WsfPUKc72b92"], ["created_at", "2015-07-24 14:51:30.634579"], ["updated_at", "2015-07-24 14:51:30.634579"], ["auth_token", "fee5c6320afc9215fb76758c988c32d9"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (85.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (54.8ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (76.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (54.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (50.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (65.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:31.217379"], ["updated_at", "2015-07-24 14:51:31.217379"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 10]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "215ecc0956774a87c8604e3d0a9cb388"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$J0ADysZqLkEWIJfqPMQFWOtR7Ga53Q0/WcgxTmFnwrT9q1sLtBTzq"], ["created_at", "2015-07-24 14:51:31.241219"], ["updated_at", "2015-07-24 14:51:31.241219"], ["auth_token", "215ecc0956774a87c8604e3d0a9cb388"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$J0ADysZqLkEWIJfqPMQFWOtR7Ga53Q0/WcgxTmFnwrT9q1sLtBTzq"], ["created_at", "2015-07-24 14:51:31.241219"], ["updated_at", "2015-07-24 14:51:31.241219"], ["auth_token", "215ecc0956774a87c8604e3d0a9cb388"], ["id", 11], ["schema_name", "prv_11"], ["id", 11]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_11"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (86.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.6ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (98.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.2ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (57.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:31.739079"], ["updated_at", "2015-07-24 14:51:31.739079"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "292368ddeb7f9b20fbdd85e1ab7a8fd0"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$7wzxilsLzM7iLaZI.zMkj.V60IUyd1kT1gbJdto7aGBu.6nwp3SHm"], ["created_at", "2015-07-24 14:51:31.764089"], ["updated_at", "2015-07-24 14:51:31.764089"], ["auth_token", "292368ddeb7f9b20fbdd85e1ab7a8fd0"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$7wzxilsLzM7iLaZI.zMkj.V60IUyd1kT1gbJdto7aGBu.6nwp3SHm"], ["created_at", "2015-07-24 14:51:31.764089"], ["updated_at", "2015-07-24 14:51:31.764089"], ["auth_token", "292368ddeb7f9b20fbdd85e1ab7a8fd0"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_12"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (89.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.1ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (65.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (80.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (52.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (60.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (53.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:32.324020"], ["updated_at", "2015-07-24 14:51:32.324020"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 12]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5c4d2e7c59b0303eaccfb91486c75b28"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$v.DbrS6RaKhmcTKMHci3FeSNjHf0KjikF2.W6.rmkRiVneHSMgqFK"], ["created_at", "2015-07-24 14:51:32.350273"], ["updated_at", "2015-07-24 14:51:32.350273"], ["auth_token", "5c4d2e7c59b0303eaccfb91486c75b28"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$v.DbrS6RaKhmcTKMHci3FeSNjHf0KjikF2.W6.rmkRiVneHSMgqFK"], ["created_at", "2015-07-24 14:51:32.350273"], ["updated_at", "2015-07-24 14:51:32.350273"], ["auth_token", "5c4d2e7c59b0303eaccfb91486c75b28"], ["id", 13], ["schema_name", "prv_13"], ["id", 13]]
  [1m[35m (0.2ms)[0m  CREATE SCHEMA "prv_13"
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (91.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (71.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (98.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (42.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (61.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.8ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:32.903405"], ["updated_at", "2015-07-24 14:51:32.903405"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0e1668ec94218d36328c861c216a351d"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3uY6MQ5jn95c3OeHQmvjRudzZOfGf6rF0gF..wNPpkU8K7XsAqTMu"], ["created_at", "2015-07-24 14:51:32.931700"], ["updated_at", "2015-07-24 14:51:32.931700"], ["auth_token", "0e1668ec94218d36328c861c216a351d"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3uY6MQ5jn95c3OeHQmvjRudzZOfGf6rF0gF..wNPpkU8K7XsAqTMu"], ["created_at", "2015-07-24 14:51:32.931700"], ["updated_at", "2015-07-24 14:51:32.931700"], ["auth_token", "0e1668ec94218d36328c861c216a351d"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_14"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (90.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (115.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (79.0ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (42.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (67.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (37.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:51:33.555032"], ["updated_at", "2015-07-24 14:51:33.555032"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 11:51:33 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0e1668ec94218d36328c861c216a351d"]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 14:51:33.575237"], ["updated_at", "2015-07-24 14:51:33.575237"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 17ms (Views: 0.4ms | ActiveRecord: 4.3ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "measures" WHERE "measures"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (13.5ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 14:53:01', '2015-07-24 14:53:01', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 14:53:01', '2015-07-24 14:53:01', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 14:53:01', '2015-07-24 14:53:01')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 14:53:01', '2015-07-24 14:53:01')[0m
  [1m[35m (10.4ms)[0m  COMMIT
  [1m[36m (9.1ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (1.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.0ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.5ms)
  Rendered welcome/_month_status.html.erb (0.5ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (10.5ms)
  Rendered layouts/_header.html.erb (1.1ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 30ms (Views: 20.9ms | ActiveRecord: 3.4ms)
  [1m[35m (0.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "355f8638a11512c40a5f049375f5fb80"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Hf8l.ggPe/POHxbO8mOZKOan.7B5SQ/qfH1s38BeYb9B0pSt0LaXy"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:53:01.191452"], ["updated_at", "2015-07-24 14:53:01.191452"], ["auth_token", "355f8638a11512c40a5f049375f5fb80"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:01.216868"], ["updated_at", "2015-07-24 14:53:01.216868"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 11:53:01 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "355f8638a11512c40a5f049375f5fb80"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190963]]
Completed 200 OK in 17ms (Views: 1.0ms | ActiveRecord: 1.6ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "6e61de3789a544429623977c38155ef2"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$pPx93VF8Up7J4BZV6OkDLe9uBFx5t45ChYOasT2arPMrsJZ4ZxLHC"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:53:01.271042"], ["updated_at", "2015-07-24 14:53:01.271042"], ["auth_token", "6e61de3789a544429623977c38155ef2"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:01.276490"], ["updated_at", "2015-07-24 14:53:01.276490"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 11:53:01 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "6e61de3789a544429623977c38155ef2"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190964]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.7ms)
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "98b4f083cacf05509c78c44e37d5bdad"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$TF2m4rdurqTpB/kUvUNn7.HzPSpFdfJ2SK3c0AJK689LoZBEqdw3q"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:53:01.299126"], ["updated_at", "2015-07-24 14:53:01.299126"], ["auth_token", "98b4f083cacf05509c78c44e37d5bdad"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:01.304165"], ["updated_at", "2015-07-24 14:53:01.304165"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 11:53:01 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "98b4f083cacf05509c78c44e37d5bdad\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[35mMeasure Load (0.8ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190962]]
  [1m[36mSQL (1.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190962]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1[0m  [["id", 298486374]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190965]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 980190965]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "4edd8ec0bd3a059abfc061ac559bac59"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$X8yiVomT1zCk./wHqI7N3eHPNyVCNmp0FJp2Z/4BnqunBHTsKstmu"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:53:01.341936"], ["updated_at", "2015-07-24 14:53:01.341936"], ["auth_token", "4edd8ec0bd3a059abfc061ac559bac59"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:01.346008"], ["updated_at", "2015-07-24 14:53:01.346008"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 11:53:01 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "4edd8ec0bd3a059abfc061ac559bac59"]]
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1bf5d0d52ae43b2c2ced51390e6f07ff"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RtCX7BzN3wGh4YVp0Y00SeRK86C8X7JNeqO3yhCs6YXL/9HIRF.la"], ["created_at", "2015-07-24 14:53:01.369420"], ["updated_at", "2015-07-24 14:53:01.369420"], ["auth_token", "1bf5d0d52ae43b2c2ced51390e6f07ff"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RtCX7BzN3wGh4YVp0Y00SeRK86C8X7JNeqO3yhCs6YXL/9HIRF.la"], ["created_at", "2015-07-24 14:53:01.369420"], ["updated_at", "2015-07-24 14:53:01.369420"], ["auth_token", "1bf5d0d52ae43b2c2ced51390e6f07ff"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.8ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (91.9ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (70.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (44.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (94.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (52.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.3ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (48.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (51.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:01.940090"], ["updated_at", "2015-07-24 14:53:01.940090"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 11:53:01 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "1bf5d0d52ae43b2c2ced51390e6f07ff"]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 14:53:01.961998"], ["updated_at", "2015-07-24 14:53:01.961998"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 15ms (Views: 0.4ms | ActiveRecord: 3.8ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5070b28415fa9972f9f9b9e5a39f3833"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$sJs52wJofZXDRcnGo.KnYuM2xMII36XfyzS6HWJkmzbJ1s9zrcE8e"], ["created_at", "2015-07-24 14:53:01.998014"], ["updated_at", "2015-07-24 14:53:01.998014"], ["auth_token", "5070b28415fa9972f9f9b9e5a39f3833"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$sJs52wJofZXDRcnGo.KnYuM2xMII36XfyzS6HWJkmzbJ1s9zrcE8e"], ["created_at", "2015-07-24 14:53:01.998014"], ["updated_at", "2015-07-24 14:53:01.998014"], ["auth_token", "5070b28415fa9972f9f9b9e5a39f3833"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (91.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (54.3ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (75.2ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (49.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:02.558895"], ["updated_at", "2015-07-24 14:53:02.558895"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 8]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (6.3ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 14ms (Views: 8.9ms | ActiveRecord: 1.9ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b753e2313f9be51b1c4a6f0cdc6a6fd9"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JLAXdyG0G3SsO38GG1JmDeYKZKqrkI/zZg91e0vZU8zl2k6jf25qm"], ["created_at", "2015-07-24 14:53:02.603098"], ["updated_at", "2015-07-24 14:53:02.603098"], ["auth_token", "b753e2313f9be51b1c4a6f0cdc6a6fd9"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$JLAXdyG0G3SsO38GG1JmDeYKZKqrkI/zZg91e0vZU8zl2k6jf25qm"], ["created_at", "2015-07-24 14:53:02.603098"], ["updated_at", "2015-07-24 14:53:02.603098"], ["auth_token", "b753e2313f9be51b1c4a6f0cdc6a6fd9"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_9"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (84.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (50.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (98.0ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (67.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (36.1ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:03.128067"], ["updated_at", "2015-07-24 14:53:03.128067"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 9]]
  Rendered circuits/_form.html.erb (8.0ms)
  Rendered circuits/new.html.erb within layouts/application (9.8ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 134ms (Views: 130.2ms | ActiveRecord: 1.2ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c37f67e0ef3583f83de7191a77f23c01"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$nKO53TrS2LT5V0NBxRQMTeAJFfbc3yKKA9gL9TXEXfFOHFSzaYVNy"], ["created_at", "2015-07-24 14:53:03.289726"], ["updated_at", "2015-07-24 14:53:03.289726"], ["auth_token", "c37f67e0ef3583f83de7191a77f23c01"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$nKO53TrS2LT5V0NBxRQMTeAJFfbc3yKKA9gL9TXEXfFOHFSzaYVNy"], ["created_at", "2015-07-24 14:53:03.289726"], ["updated_at", "2015-07-24 14:53:03.289726"], ["auth_token", "c37f67e0ef3583f83de7191a77f23c01"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (91.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (45.6ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (51.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (120.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (30.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:03.811645"], ["updated_at", "2015-07-24 14:53:03.811645"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 10]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/1
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.4ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "2b43b8052badd678c25c184ca0c50e22"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$aDP9g7N1Y5g7R50eLH/OWOEG0hC6fAfmPe1QPCuzpShLae4YwN7di"], ["created_at", "2015-07-24 14:53:03.854748"], ["updated_at", "2015-07-24 14:53:03.854748"], ["auth_token", "2b43b8052badd678c25c184ca0c50e22"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$aDP9g7N1Y5g7R50eLH/OWOEG0hC6fAfmPe1QPCuzpShLae4YwN7di"], ["created_at", "2015-07-24 14:53:03.854748"], ["updated_at", "2015-07-24 14:53:03.854748"], ["auth_token", "2b43b8052badd678c25c184ca0c50e22"], ["id", 11], ["schema_name", "prv_11"], ["id", 11]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_11"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (97.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.5ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (94.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (57.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (43.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (42.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:04.388259"], ["updated_at", "2015-07-24 14:53:04.388259"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 11]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
Completed 500 Internal Server Error in 7ms (ActiveRecord: 2.2ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "2076eceacaf08fa119094cf43fb70862"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Ew7vgxtpQpCvF2ZNgCI0QeiA823apIJlL4C4xp55DPylvnYBR2EKe"], ["created_at", "2015-07-24 14:53:04.424468"], ["updated_at", "2015-07-24 14:53:04.424468"], ["auth_token", "2076eceacaf08fa119094cf43fb70862"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Ew7vgxtpQpCvF2ZNgCI0QeiA823apIJlL4C4xp55DPylvnYBR2EKe"], ["created_at", "2015-07-24 14:53:04.424468"], ["updated_at", "2015-07-24 14:53:04.424468"], ["auth_token", "2076eceacaf08fa119094cf43fb70862"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_12"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (100.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (77.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (108.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (52.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (43.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:04.991078"], ["updated_at", "2015-07-24 14:53:04.991078"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 12]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 14:53:05.001999"], ["updated_at", "2015-07-24 14:53:05.001999"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/2
Completed 302 Found in 9ms (ActiveRecord: 2.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "22899e651e5cf39ebaf88052af665a69"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$QHzn9is2RAcFNG.514nUQ.xdnFSE3t49./X.P.qclaEn9JrgN.sdO"], ["created_at", "2015-07-24 14:53:05.033867"], ["updated_at", "2015-07-24 14:53:05.033867"], ["auth_token", "22899e651e5cf39ebaf88052af665a69"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$QHzn9is2RAcFNG.514nUQ.xdnFSE3t49./X.P.qclaEn9JrgN.sdO"], ["created_at", "2015-07-24 14:53:05.033867"], ["updated_at", "2015-07-24 14:53:05.033867"], ["auth_token", "22899e651e5cf39ebaf88052af665a69"], ["id", 13], ["schema_name", "prv_13"], ["id", 13]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_13"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (87.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.3ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.0ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (108.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (42.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (70.7ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:05.570664"], ["updated_at", "2015-07-24 14:53:05.570664"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 13]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 12ms (ActiveRecord: 4.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4166aae55049d4273e1ec4b37b471678"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RqPRNkuIIq3na/RYx5Zfsu6uD9BayAHcP7Wk7fvYG523BYmgDnxp2"], ["created_at", "2015-07-24 14:53:05.608610"], ["updated_at", "2015-07-24 14:53:05.608610"], ["auth_token", "4166aae55049d4273e1ec4b37b471678"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RqPRNkuIIq3na/RYx5Zfsu6uD9BayAHcP7Wk7fvYG523BYmgDnxp2"], ["created_at", "2015-07-24 14:53:05.608610"], ["updated_at", "2015-07-24 14:53:05.608610"], ["auth_token", "4166aae55049d4273e1ec4b37b471678"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.6ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (89.3ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (71.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (45.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (98.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.1ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (42.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (42.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.3ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:53:06.154267"], ["updated_at", "2015-07-24 14:53:06.154267"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 14]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.5ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (15.8ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 38ms (Views: 30.1ms | ActiveRecord: 3.2ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.7ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.6ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 14:56:01', '2015-07-24 14:56:01', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 14:56:01', '2015-07-24 14:56:01', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 14:56:01', '2015-07-24 14:56:01')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 14:56:01', '2015-07-24 14:56:01')[0m
  [1m[35m (2.0ms)[0m  COMMIT
  [1m[36m (9.2ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (1.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.5ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (10.2ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 39ms (Views: 25.1ms | ActiveRecord: 8.1ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3afaf3a5fb3a637c78b9eaa8bfc3f581"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$f3EKS6ijl46ez/gD6vrk.ujnbXzaeEShv/8ThmWNJMkUZ1hz0BIM2"], ["created_at", "2015-07-24 14:56:01.705606"], ["updated_at", "2015-07-24 14:56:01.705606"], ["auth_token", "3afaf3a5fb3a637c78b9eaa8bfc3f581"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$f3EKS6ijl46ez/gD6vrk.ujnbXzaeEShv/8ThmWNJMkUZ1hz0BIM2"], ["created_at", "2015-07-24 14:56:01.705606"], ["updated_at", "2015-07-24 14:56:01.705606"], ["auth_token", "3afaf3a5fb3a637c78b9eaa8bfc3f581"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (1.1ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (96.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (65.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (98.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.4ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (48.8ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:02.269238"], ["updated_at", "2015-07-24 14:56:02.269238"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 11:56:02 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3afaf3a5fb3a637c78b9eaa8bfc3f581"]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (1.3ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 14:56:02.319298"], ["updated_at", "2015-07-24 14:56:02.319298"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 28ms (Views: 0.4ms | ActiveRecord: 4.5ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d871843df92f69d088ddcfcc2eb41633"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ndvBEhR4xcv88mkouP1Xv.uEe7yAufKNqtYxmQlgmFa95xIxZMDi2"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:56:02.361202"], ["updated_at", "2015-07-24 14:56:02.361202"], ["auth_token", "d871843df92f69d088ddcfcc2eb41633"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:02.371898"], ["updated_at", "2015-07-24 14:56:02.371898"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190963/measures" for 127.0.0.1 at 2015-07-24 11:56:02 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190963"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d871843df92f69d088ddcfcc2eb41633"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190963]]
Completed 200 OK in 5ms (Views: 1.0ms | ActiveRecord: 2.2ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "392efdf34555f3013c56104846569520"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$hRsKNuoMEj2aXeROA62dyeNXdzCNEg8J/fKJuHnPwG/mjnyvYvPdm"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:56:02.400428"], ["updated_at", "2015-07-24 14:56:02.400428"], ["auth_token", "392efdf34555f3013c56104846569520"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:02.407124"], ["updated_at", "2015-07-24 14:56:02.407124"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190964/measures" for 127.0.0.1 at 2015-07-24 11:56:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190964"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "392efdf34555f3013c56104846569520"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190964]]
Completed 200 OK in 5ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f201f9702208a6ef7634ed132e340cbb"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$S3pFQULcKh0c9RpgVfPsZeWdpqmFl5QgG41Fj4z9T7BndxFXAY2b."], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:56:02.431816"], ["updated_at", "2015-07-24 14:56:02.431816"], ["auth_token", "f201f9702208a6ef7634ed132e340cbb"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:02.436843"], ["updated_at", "2015-07-24 14:56:02.436843"]]
  [1m[36m (0.5ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/980190965/measures" for 127.0.0.1 at 2015-07-24 11:56:02 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190965"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f201f9702208a6ef7634ed132e340cbb\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[36mMeasure Load (0.9ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 298486374]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190962]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190962]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 298486374]]
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Generation') AND "circuits"."id" = $1  [["id", 298486374]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 980190965]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 980190965]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "74d023a36811be769144b3d313d9b510"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$7Y0E2UK0V76zkjdNqKdm8uh9GfwG72fW.Iqb7vL/IyWHI24YUPLLe"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 14:56:02.482287"], ["updated_at", "2015-07-24 14:56:02.482287"], ["auth_token", "74d023a36811be769144b3d313d9b510"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:02.486843"], ["updated_at", "2015-07-24 14:56:02.486843"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/980190966/measures" for 127.0.0.1 at 2015-07-24 11:56:02 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"980190966"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "74d023a36811be769144b3d313d9b510"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 980190966]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "41b565d9be4a29a68a9efff65ef57d19"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$5CVZbpi/b7VkGdhANbYKHODPapNL.b1AN4S5iaOTQr3LgDdlP53gi"], ["created_at", "2015-07-24 14:56:02.514219"], ["updated_at", "2015-07-24 14:56:02.514219"], ["auth_token", "41b565d9be4a29a68a9efff65ef57d19"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$5CVZbpi/b7VkGdhANbYKHODPapNL.b1AN4S5iaOTQr3LgDdlP53gi"], ["created_at", "2015-07-24 14:56:02.514219"], ["updated_at", "2015-07-24 14:56:02.514219"], ["auth_token", "41b565d9be4a29a68a9efff65ef57d19"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (104.9ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (40.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (72.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.8ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:03.073585"], ["updated_at", "2015-07-24 14:56:03.073585"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 8]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (14.0ms)
  Rendered circuits/edit.html.erb within layouts/application (15.6ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 127ms (Views: 119.9ms | ActiveRecord: 2.4ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b99d9c7f7a6a06f8d57b9eca961bdf4a"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$HF9UikQqMcGlOyzJCmDkDew6iEbjCdLc5ldzSBofCajIMi5/q/spC"], ["created_at", "2015-07-24 14:56:03.232372"], ["updated_at", "2015-07-24 14:56:03.232372"], ["auth_token", "b99d9c7f7a6a06f8d57b9eca961bdf4a"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$HF9UikQqMcGlOyzJCmDkDew6iEbjCdLc5ldzSBofCajIMi5/q/spC"], ["created_at", "2015-07-24 14:56:03.232372"], ["updated_at", "2015-07-24 14:56:03.232372"], ["auth_token", "b99d9c7f7a6a06f8d57b9eca961bdf4a"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_9"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (106.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (45.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (41.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (97.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (69.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (34.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:03.772624"], ["updated_at", "2015-07-24 14:56:03.772624"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 14:56:03.784205"], ["updated_at", "2015-07-24 14:56:03.784205"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/2
Completed 302 Found in 9ms (ActiveRecord: 2.2ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "ef54c943ae836a3baf1819cf4efc700d"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$OcEKM7MX7IQ.1HeEIJ271eg7TDxuB7ZVOiU1F1BCD33uTL5ls.Ema"], ["created_at", "2015-07-24 14:56:03.816140"], ["updated_at", "2015-07-24 14:56:03.816140"], ["auth_token", "ef54c943ae836a3baf1819cf4efc700d"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$OcEKM7MX7IQ.1HeEIJ271eg7TDxuB7ZVOiU1F1BCD33uTL5ls.Ema"], ["created_at", "2015-07-24 14:56:03.816140"], ["updated_at", "2015-07-24 14:56:03.816140"], ["auth_token", "ef54c943ae836a3baf1819cf4efc700d"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (88.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (119.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (71.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:04.387926"], ["updated_at", "2015-07-24 14:56:04.387926"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 10]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (5.3ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.2ms | ActiveRecord: 2.4ms)
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b14b7a529e544d1cd9da91dff10cd271"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$/0/sr94YzMLUlq12k2F76e4jO/f5GPLpBsBHDkS1GvaNLY93EVN4."], ["created_at", "2015-07-24 14:56:04.426243"], ["updated_at", "2015-07-24 14:56:04.426243"], ["auth_token", "b14b7a529e544d1cd9da91dff10cd271"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$/0/sr94YzMLUlq12k2F76e4jO/f5GPLpBsBHDkS1GvaNLY93EVN4."], ["created_at", "2015-07-24 14:56:04.426243"], ["updated_at", "2015-07-24 14:56:04.426243"], ["auth_token", "b14b7a529e544d1cd9da91dff10cd271"], ["id", 11], ["schema_name", "prv_11"], ["id", 11]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_11"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (109.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (62.0ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (97.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (58.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (43.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (42.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.5ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:04.986181"], ["updated_at", "2015-07-24 14:56:04.986181"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 11]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/1
Completed 302 Found in 7ms (ActiveRecord: 1.6ms)
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "9ec55863a728d3a19ab0aa0fa733eb15"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$97NUN1Xii40PJtG4VjiWj.r7ZmkiyPPEC4yTBLm8KlbzqubQcGYNq"], ["created_at", "2015-07-24 14:56:05.019942"], ["updated_at", "2015-07-24 14:56:05.019942"], ["auth_token", "9ec55863a728d3a19ab0aa0fa733eb15"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$97NUN1Xii40PJtG4VjiWj.r7ZmkiyPPEC4yTBLm8KlbzqubQcGYNq"], ["created_at", "2015-07-24 14:56:05.019942"], ["updated_at", "2015-07-24 14:56:05.019942"], ["auth_token", "9ec55863a728d3a19ab0aa0fa733eb15"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_12"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (88.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (107.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (27.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (52.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (38.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (61.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:05.543418"], ["updated_at", "2015-07-24 14:56:05.543418"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 12]]
  [1m[35mCircuit Load (0.1ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 7ms (ActiveRecord: 1.6ms)
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 12]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "81addf6ffdf7e05584439bbc5a7805c8"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$xcrtBA4oCOtrzaS6J2AKhedwIWclDeBNLcuMsIwPRnrGg.8q4LsZ2"], ["created_at", "2015-07-24 14:56:05.567504"], ["updated_at", "2015-07-24 14:56:05.567504"], ["auth_token", "81addf6ffdf7e05584439bbc5a7805c8"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$xcrtBA4oCOtrzaS6J2AKhedwIWclDeBNLcuMsIwPRnrGg.8q4LsZ2"], ["created_at", "2015-07-24 14:56:05.567504"], ["updated_at", "2015-07-24 14:56:05.567504"], ["auth_token", "81addf6ffdf7e05584439bbc5a7805c8"], ["id", 13], ["schema_name", "prv_13"], ["id", 13]]
  [1m[35m (0.3ms)[0m  CREATE SCHEMA "prv_13"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (90.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.5ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (83.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (58.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (42.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (56.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (43.8ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.9ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:06.093423"], ["updated_at", "2015-07-24 14:56:06.093423"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 13]]
  Rendered circuits/_form.html.erb (2.0ms)
  Rendered circuits/new.html.erb within layouts/application (3.9ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 15ms (Views: 10.3ms | ActiveRecord: 1.3ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.0ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "d52a62ea65ff337d4d7972d6d58ab005"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$0KXhJRd1Fd3s3MhwExKd6esqqn1.nuDT1rMbCmm1jtVAHOL1J9Ma6"], ["created_at", "2015-07-24 14:56:06.136208"], ["updated_at", "2015-07-24 14:56:06.136208"], ["auth_token", "d52a62ea65ff337d4d7972d6d58ab005"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$0KXhJRd1Fd3s3MhwExKd6esqqn1.nuDT1rMbCmm1jtVAHOL1J9Ma6"], ["created_at", "2015-07-24 14:56:06.136208"], ["updated_at", "2015-07-24 14:56:06.136208"], ["auth_token", "d52a62ea65ff337d4d7972d6d58ab005"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.6ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (91.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (107.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (43.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (54.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 14:56:06.659634"], ["updated_at", "2015-07-24 14:56:06.659634"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 14]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.4ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (4.4ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 6.3ms | ActiveRecord: 3.6ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  ROLLBACK
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (17.9ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 15:07:39', '2015-07-24 15:07:39', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 15:07:39', '2015-07-24 15:07:39', 298486374)
  [1m[36mFixture Delete (0.5ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 15:07:39', '2015-07-24 15:07:39')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 15:07:39', '2015-07-24 15:07:39')[0m
  [1m[35m (4.3ms)[0m  COMMIT
  [1m[36m (9.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.8ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.6ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (3.0ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.6ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (13.6ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 38ms (Views: 23.8ms | ActiveRecord: 8.3ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5381244d8243f9cfaf59a68a44f1468e"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$BZPx21HHXHPCIBgF7YH8HeNQByRp9pUe6v0PHwJLWzzg.kvwuIeqa"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:07:39.921979"], ["updated_at", "2015-07-24 15:07:39.921979"], ["auth_token", "5381244d8243f9cfaf59a68a44f1468e"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:39.952361"], ["updated_at", "2015-07-24 15:07:39.952361"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f94e5de30093c488468ddfbfbd804b2d"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rj4SVY5/vqWMo8t9z47rwux7xcRSvRM93BgUC2IuHQ7Ni9yjTI2hW"], ["created_at", "2015-07-24 15:07:39.959191"], ["updated_at", "2015-07-24 15:07:39.959191"], ["auth_token", "f94e5de30093c488468ddfbfbd804b2d"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rj4SVY5/vqWMo8t9z47rwux7xcRSvRM93BgUC2IuHQ7Ni9yjTI2hW"], ["created_at", "2015-07-24 15:07:39.959191"], ["updated_at", "2015-07-24 15:07:39.959191"], ["auth_token", "f94e5de30093c488468ddfbfbd804b2d"], ["id", 4], ["schema_name", "prv_4"], ["id", 4]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_4"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (102.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.2ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (87.0ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.2ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (39.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (54.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/8/measures" for 127.0.0.1 at 2015-07-24 12:07:40 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"8"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "5381244d8243f9cfaf59a68a44f1468e"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 8]]
Completed 200 OK in 15ms (Views: 0.8ms | ActiveRecord: 0.8ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 8]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.1ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 8]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c12eb6e6801b80efb4d5ea62e4f8bacc"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ESnIdsEcnYygTnvQiLCmSOEC04i67VwMEHdmXHm.PL8U/vgJOB5FK"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:07:40.520156"], ["updated_at", "2015-07-24 15:07:40.520156"], ["auth_token", "c12eb6e6801b80efb4d5ea62e4f8bacc"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:40.524273"], ["updated_at", "2015-07-24 15:07:40.524273"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c2fe398d53e35a90abbdd0642e3cebb4"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZCA9mRajQiAJ1BBQ/EqeTOZ9eux1KG5sxrfSw6DNhZr8ktDhUEIMi"], ["created_at", "2015-07-24 15:07:40.533654"], ["updated_at", "2015-07-24 15:07:40.533654"], ["auth_token", "c2fe398d53e35a90abbdd0642e3cebb4"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZCA9mRajQiAJ1BBQ/EqeTOZ9eux1KG5sxrfSw6DNhZr8ktDhUEIMi"], ["created_at", "2015-07-24 15:07:40.533654"], ["updated_at", "2015-07-24 15:07:40.533654"], ["auth_token", "c2fe398d53e35a90abbdd0642e3cebb4"], ["id", 6], ["schema_name", "prv_6"], ["id", 6]]
  [1m[35m (0.2ms)[0m  CREATE SCHEMA "prv_6"
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (85.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (76.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (69.4ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (89.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (64.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/9/measures" for 127.0.0.1 at 2015-07-24 12:07:41 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"9"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c12eb6e6801b80efb4d5ea62e4f8bacc"]]
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 9]]
Completed 200 OK in 5ms (Views: 0.9ms | ActiveRecord: 1.6ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 9]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 9]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "fa871da03374addbc488f287abc1db89"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$E6HgF1PIAUkN2oSWVRmaY.4IamjQd.vuzBMbU3sK68FAoblteKBiW"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:07:41.125633"], ["updated_at", "2015-07-24 15:07:41.125633"], ["auth_token", "fa871da03374addbc488f287abc1db89"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:41.132370"], ["updated_at", "2015-07-24 15:07:41.132370"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "943f4d4d12ff7407016bde709f5723ff"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$yEvNOlawdONe4dEI/ITPZesb//7cUooGKQyVNxMf/1gsQ0WPP7Tfm"], ["created_at", "2015-07-24 15:07:41.139568"], ["updated_at", "2015-07-24 15:07:41.139568"], ["auth_token", "943f4d4d12ff7407016bde709f5723ff"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$yEvNOlawdONe4dEI/ITPZesb//7cUooGKQyVNxMf/1gsQ0WPP7Tfm"], ["created_at", "2015-07-24 15:07:41.139568"], ["updated_at", "2015-07-24 15:07:41.139568"], ["auth_token", "943f4d4d12ff7407016bde709f5723ff"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (102.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (53.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (106.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (0.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (64.3ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/10/measures" for 127.0.0.1 at 2015-07-24 12:07:41 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"10"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "fa871da03374addbc488f287abc1db89\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.7ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 10]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 10]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 8]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4aff69951d0708a8f2315ab866cf5203"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$8rhftgPLxVc24vQhONkZw.ppx2kWzxjQ2iz/vcpXwk3ovZGJMrz4q"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:07:41.730553"], ["updated_at", "2015-07-24 15:07:41.730553"], ["auth_token", "4aff69951d0708a8f2315ab866cf5203"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:41.737327"], ["updated_at", "2015-07-24 15:07:41.737327"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "c86de4c0517d4f5a32d5abf72192c0c5"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ULYANAXHWKqRMHkbv6bAtOX2cYzuM6giKi09oOQQ398KDV3vle1CK"], ["created_at", "2015-07-24 15:07:41.746059"], ["updated_at", "2015-07-24 15:07:41.746059"], ["auth_token", "c86de4c0517d4f5a32d5abf72192c0c5"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ULYANAXHWKqRMHkbv6bAtOX2cYzuM6giKi09oOQQ398KDV3vle1CK"], ["created_at", "2015-07-24 15:07:41.746059"], ["updated_at", "2015-07-24 15:07:41.746059"], ["auth_token", "c86de4c0517d4f5a32d5abf72192c0c5"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.6ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (89.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (70.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (89.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (53.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/11/measures" for 127.0.0.1 at 2015-07-24 12:07:42 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"11"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4aff69951d0708a8f2315ab866cf5203"]]
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 11]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 2.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 11]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 11]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 9]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "49f8079903ddc59c26a0614868120bbe"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$oVMmvlBFd2LzAON/Usf/MuLgZVAi1oTWdPiLt7NbPpGDViby4J19y"], ["created_at", "2015-07-24 15:07:42.316943"], ["updated_at", "2015-07-24 15:07:42.316943"], ["auth_token", "49f8079903ddc59c26a0614868120bbe"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$oVMmvlBFd2LzAON/Usf/MuLgZVAi1oTWdPiLt7NbPpGDViby4J19y"], ["created_at", "2015-07-24 15:07:42.316943"], ["updated_at", "2015-07-24 15:07:42.316943"], ["auth_token", "49f8079903ddc59c26a0614868120bbe"], ["id", 11], ["schema_name", "prv_11"], ["id", 11]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_11"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (93.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.4ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (66.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (61.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:42.865342"], ["updated_at", "2015-07-24 15:07:42.865342"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 12:07:42 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "49f8079903ddc59c26a0614868120bbe"]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.2ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 15:07:42.883687"], ["updated_at", "2015-07-24 15:07:42.883687"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 15ms (Views: 0.4ms | ActiveRecord: 4.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "measures" WHERE "measures"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "c3add3071bbe6bad538047ced4978b4a"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$LQzmOLLhfPP9EO0bljoqBehFkxv4GaPbL4XavN/vQWfNTXfo/GU7u"], ["created_at", "2015-07-24 15:07:42.921419"], ["updated_at", "2015-07-24 15:07:42.921419"], ["auth_token", "c3add3071bbe6bad538047ced4978b4a"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$LQzmOLLhfPP9EO0bljoqBehFkxv4GaPbL4XavN/vQWfNTXfo/GU7u"], ["created_at", "2015-07-24 15:07:42.921419"], ["updated_at", "2015-07-24 15:07:42.921419"], ["auth_token", "c3add3071bbe6bad538047ced4978b4a"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_12"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (125.9ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (44.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (94.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (52.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (50.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (49.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (52.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:43.507826"], ["updated_at", "2015-07-24 15:07:43.507826"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 12]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.6ms)
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (6.5ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.8ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 23ms (Views: 10.6ms | ActiveRecord: 2.6ms)
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 12]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f2f238731e41a3ac670eb3dff6232a6c"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$jjMEdqQtjk2re9nM8f0zLeT2HT4tPH09mtTXvKHvEOsR0hpZ4aqvq"], ["created_at", "2015-07-24 15:07:43.556515"], ["updated_at", "2015-07-24 15:07:43.556515"], ["auth_token", "f2f238731e41a3ac670eb3dff6232a6c"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$jjMEdqQtjk2re9nM8f0zLeT2HT4tPH09mtTXvKHvEOsR0hpZ4aqvq"], ["created_at", "2015-07-24 15:07:43.556515"], ["updated_at", "2015-07-24 15:07:43.556515"], ["auth_token", "f2f238731e41a3ac670eb3dff6232a6c"], ["id", 13], ["schema_name", "prv_13"], ["id", 13]]
  [1m[35m (0.3ms)[0m  CREATE SCHEMA "prv_13"
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (103.4ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (63.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (92.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (52.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:44.101720"], ["updated_at", "2015-07-24 15:07:44.101720"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 15:07:44.114931"], ["updated_at", "2015-07-24 15:07:44.114931"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/2
Completed 302 Found in 9ms (ActiveRecord: 2.1ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7b28cb36f2a5cc34a1be099b3e89644e"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$cftOFzLL0vp3i8EhDDkQxu8fkJu6TiZ8NElVKML9h51OYNsLbj3MS"], ["created_at", "2015-07-24 15:07:44.148500"], ["updated_at", "2015-07-24 15:07:44.148500"], ["auth_token", "7b28cb36f2a5cc34a1be099b3e89644e"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$cftOFzLL0vp3i8EhDDkQxu8fkJu6TiZ8NElVKML9h51OYNsLbj3MS"], ["created_at", "2015-07-24 15:07:44.148500"], ["updated_at", "2015-07-24 15:07:44.148500"], ["auth_token", "7b28cb36f2a5cc34a1be099b3e89644e"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (88.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (70.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (86.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (69.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (47.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:44.708956"], ["updated_at", "2015-07-24 15:07:44.708956"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 14]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (7.5ms)
  Rendered circuits/edit.html.erb within layouts/application (8.9ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 122ms (Views: 114.9ms | ActiveRecord: 1.9ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.6ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4eb03a5d80b1e37d006ba8d2a4bc6245"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$WRkVy725CM2bP1clutZsgOqrxjBpM08gJXI9QX.9Kcr7iHhqGwos2"], ["created_at", "2015-07-24 15:07:44.858693"], ["updated_at", "2015-07-24 15:07:44.858693"], ["auth_token", "4eb03a5d80b1e37d006ba8d2a4bc6245"]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$WRkVy725CM2bP1clutZsgOqrxjBpM08gJXI9QX.9Kcr7iHhqGwos2"], ["created_at", "2015-07-24 15:07:44.858693"], ["updated_at", "2015-07-24 15:07:44.858693"], ["auth_token", "4eb03a5d80b1e37d006ba8d2a4bc6245"], ["id", 15], ["schema_name", "prv_15"], ["id", 15]]
  [1m[35m (0.2ms)[0m  CREATE SCHEMA "prv_15"
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (157.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (52.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (81.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.5ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (72.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (50.8ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:45.457983"], ["updated_at", "2015-07-24 15:07:45.457983"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 15]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 14ms (ActiveRecord: 3.3ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "20bf826e07eca3f594e497d5951ee13e"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$MJ/3dfk1bvOIsD9wEdBgBO/Y2KZ6H6aoI6rO7rKyFJy1NsRExAWVS"], ["created_at", "2015-07-24 15:07:45.499032"], ["updated_at", "2015-07-24 15:07:45.499032"], ["auth_token", "20bf826e07eca3f594e497d5951ee13e"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$MJ/3dfk1bvOIsD9wEdBgBO/Y2KZ6H6aoI6rO7rKyFJy1NsRExAWVS"], ["created_at", "2015-07-24 15:07:45.499032"], ["updated_at", "2015-07-24 15:07:45.499032"], ["auth_token", "20bf826e07eca3f594e497d5951ee13e"], ["id", 16], ["schema_name", "prv_16"], ["id", 16]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_16"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (107.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (44.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (41.5ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (61.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (53.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (50.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:46.055019"], ["updated_at", "2015-07-24 15:07:46.055019"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 16]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/1
Completed 302 Found in 10ms (ActiveRecord: 2.9ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.0ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "295040573a18bebda101e1708c28352d"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$GDFJ7YdmS.vB5mPxDlShoukHg8j9aOW2xmo/SHcqGS1h/ctx/DVNi"], ["created_at", "2015-07-24 15:07:46.102354"], ["updated_at", "2015-07-24 15:07:46.102354"], ["auth_token", "295040573a18bebda101e1708c28352d"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$GDFJ7YdmS.vB5mPxDlShoukHg8j9aOW2xmo/SHcqGS1h/ctx/DVNi"], ["created_at", "2015-07-24 15:07:46.102354"], ["updated_at", "2015-07-24 15:07:46.102354"], ["auth_token", "295040573a18bebda101e1708c28352d"], ["id", 17], ["schema_name", "prv_17"], ["id", 17]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_17"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (80.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.2ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (106.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (39.1ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (55.8ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:46.616258"], ["updated_at", "2015-07-24 15:07:46.616258"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 17]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (3.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 7.9ms | ActiveRecord: 0.5ms)
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.1ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f3ad572b059a14a46a6a7f1fdcea7ab1"]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2Bib7nxmsyf7sW9by4PBCOc0zX4UF4bjVe3vj.d8xoJC03yQbZngy"], ["created_at", "2015-07-24 15:07:46.646357"], ["updated_at", "2015-07-24 15:07:46.646357"], ["auth_token", "f3ad572b059a14a46a6a7f1fdcea7ab1"]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2Bib7nxmsyf7sW9by4PBCOc0zX4UF4bjVe3vj.d8xoJC03yQbZngy"], ["created_at", "2015-07-24 15:07:46.646357"], ["updated_at", "2015-07-24 15:07:46.646357"], ["auth_token", "f3ad572b059a14a46a6a7f1fdcea7ab1"], ["id", 18], ["schema_name", "prv_18"], ["id", 18]]
  [1m[36m (0.2ms)[0m  [1mCREATE SCHEMA "prv_18"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (88.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (65.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (52.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (67.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:07:47.194259"], ["updated_at", "2015-07-24 15:07:47.194259"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 18]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (5.2ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 12ms (Views: 7.5ms | ActiveRecord: 2.4ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.4ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (16.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 15:10:15', '2015-07-24 15:10:15', 980190962)[0m
  [1m[35mFixture Insert (0.4ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 15:10:15', '2015-07-24 15:10:15', 298486374)
  [1m[36mFixture Delete (0.4ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 15:10:15', '2015-07-24 15:10:15')
  [1m[36mFixture Insert (0.3ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 15:10:15', '2015-07-24 15:10:15')[0m
  [1m[35m (10.2ms)[0m  COMMIT
  [1m[36m (9.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (3.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.4ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.8ms)
  Rendered welcome/_month_status.html.erb (0.8ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (11.2ms)
  Rendered layouts/_header.html.erb (1.5ms)
  Rendered layouts/_sidebar.html.erb (1.4ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 34ms (Views: 22.6ms | ActiveRecord: 5.9ms)
  [1m[35m (0.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3d9c167a8839184ddcf3d2844c7e1422"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$fZdRVfA28rKqq3nT3eZid.tSyAVPPJUhPEtopcQ.00W4fLeTR6eSe"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:10:15.603715"], ["updated_at", "2015-07-24 15:10:15.603715"], ["auth_token", "3d9c167a8839184ddcf3d2844c7e1422"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:15.635221"], ["updated_at", "2015-07-24 15:10:15.635221"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "71b1b894feec64fb80a36988178b3370"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Q7qMpfQ6PPjqfOWtWQ1Q4uyQjaH3x57/RdWCGF26aW683w5jiADu6"], ["created_at", "2015-07-24 15:10:15.643618"], ["updated_at", "2015-07-24 15:10:15.643618"], ["auth_token", "71b1b894feec64fb80a36988178b3370"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Q7qMpfQ6PPjqfOWtWQ1Q4uyQjaH3x57/RdWCGF26aW683w5jiADu6"], ["created_at", "2015-07-24 15:10:15.643618"], ["updated_at", "2015-07-24 15:10:15.643618"], ["auth_token", "71b1b894feec64fb80a36988178b3370"], ["id", 4], ["schema_name", "prv_4"], ["id", 4]]
  [1m[36m (0.9ms)[0m  [1mCREATE SCHEMA "prv_4"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (94.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (49.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (85.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (52.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/12/measures" for 127.0.0.1 at 2015-07-24 12:10:16 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"12"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "3d9c167a8839184ddcf3d2844c7e1422\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 14ms (Views: 0.1ms | ActiveRecord: 0.6ms)
  [1m[35mMeasure Load (0.7ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.7ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 12]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 12]]
  [1m[36mSQL (1.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f4ee9b59e870f8ce636777a86a18d98b"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$T9WgHpoWmSHJEcgl0wd5UuJpgvejYBHSo/lFIDub2aw8RL0LcewaS"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:10:16.257932"], ["updated_at", "2015-07-24 15:10:16.257932"], ["auth_token", "f4ee9b59e870f8ce636777a86a18d98b"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:16.268154"], ["updated_at", "2015-07-24 15:10:16.268154"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "801c5528b9173820c98130d16caf6694"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$e9nBsaZf06C2NdQRcTTzxenXxhekP6/6y4DJh3scweL.Gv2HDJVPy"], ["created_at", "2015-07-24 15:10:16.278350"], ["updated_at", "2015-07-24 15:10:16.278350"], ["auth_token", "801c5528b9173820c98130d16caf6694"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$e9nBsaZf06C2NdQRcTTzxenXxhekP6/6y4DJh3scweL.Gv2HDJVPy"], ["created_at", "2015-07-24 15:10:16.278350"], ["updated_at", "2015-07-24 15:10:16.278350"], ["auth_token", "801c5528b9173820c98130d16caf6694"], ["id", 6], ["schema_name", "prv_6"], ["id", 6]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_6"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (123.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (51.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (85.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (42.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (61.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (42.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/13/measures" for 127.0.0.1 at 2015-07-24 12:10:16 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"13"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "f4ee9b59e870f8ce636777a86a18d98b"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 13]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 13]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 13]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "07bd1eb3ab34752738922548be4cb791"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$0CE/PrIhzUHEdjMM1l1KFO5sv7golEXGHhLCwtULdgWafAAdZdE7O"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:10:16.849637"], ["updated_at", "2015-07-24 15:10:16.849637"], ["auth_token", "07bd1eb3ab34752738922548be4cb791"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:16.856652"], ["updated_at", "2015-07-24 15:10:16.856652"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "09b579cf5a54cd38e0fafd165a772677"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$EN8ugdZPwWo9fktUTeX8VeqVLxzue9xn9ed/MXM/x50HwNcgCoaqK"], ["created_at", "2015-07-24 15:10:16.863753"], ["updated_at", "2015-07-24 15:10:16.863753"], ["auth_token", "09b579cf5a54cd38e0fafd165a772677"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$EN8ugdZPwWo9fktUTeX8VeqVLxzue9xn9ed/MXM/x50HwNcgCoaqK"], ["created_at", "2015-07-24 15:10:16.863753"], ["updated_at", "2015-07-24 15:10:16.863753"], ["auth_token", "09b579cf5a54cd38e0fafd165a772677"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_8"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (90.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (54.7ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (68.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (90.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (43.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (53.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (72.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/14/measures" for 127.0.0.1 at 2015-07-24 12:10:17 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"14"}
  [1m[35mUser Load (0.4ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "07bd1eb3ab34752738922548be4cb791"]]
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 14]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 1.3ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 14]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 14]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 8]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "ea8840aca4df1ef185e090a6fa9226f1"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$RN2Z/QGL7KhwA2Y0hhh02uoV.x5KSbRdOAAl0Jc04olrZLN8a3g/K"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:10:17.458593"], ["updated_at", "2015-07-24 15:10:17.458593"], ["auth_token", "ea8840aca4df1ef185e090a6fa9226f1"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:17.467321"], ["updated_at", "2015-07-24 15:10:17.467321"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d30689b485c15041805809d35633f133"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2nAe0jRp0Wdy32wJBcCjOuDKfDRnA1f21Mb6Q0CDaNWDNpKuTCryC"], ["created_at", "2015-07-24 15:10:17.482482"], ["updated_at", "2015-07-24 15:10:17.482482"], ["auth_token", "d30689b485c15041805809d35633f133"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$2nAe0jRp0Wdy32wJBcCjOuDKfDRnA1f21Mb6Q0CDaNWDNpKuTCryC"], ["created_at", "2015-07-24 15:10:17.482482"], ["updated_at", "2015-07-24 15:10:17.482482"], ["auth_token", "d30689b485c15041805809d35633f133"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (79.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.2ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/15/measures" for 127.0.0.1 at 2015-07-24 12:10:17 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"15"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "ea8840aca4df1ef185e090a6fa9226f1"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 15]]
Completed 200 OK in 4ms (Views: 0.6ms | ActiveRecord: 1.9ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 15]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 15]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 15]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 9]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f12d198d4f99c37a45ab2cb7be8f0807"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$1w8vOlg9qMurAsDVtM2JqeDCT.q79s35kdcIFU8NsTn6PmDOv3Rcy"], ["created_at", "2015-07-24 15:10:17.993714"], ["updated_at", "2015-07-24 15:10:17.993714"], ["auth_token", "f12d198d4f99c37a45ab2cb7be8f0807"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$1w8vOlg9qMurAsDVtM2JqeDCT.q79s35kdcIFU8NsTn6PmDOv3Rcy"], ["created_at", "2015-07-24 15:10:17.993714"], ["updated_at", "2015-07-24 15:10:17.993714"], ["auth_token", "f12d198d4f99c37a45ab2cb7be8f0807"], ["id", 11], ["schema_name", "prv_11"], ["id", 11]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_11"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (92.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (53.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (67.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (44.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.4ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:18.533442"], ["updated_at", "2015-07-24 15:10:18.533442"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 12:10:18 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[35mUser Load (0.2ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f12d198d4f99c37a45ab2cb7be8f0807"]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (1.1ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 15:10:18.546940"], ["updated_at", "2015-07-24 15:10:18.546940"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 12ms (Views: 0.4ms | ActiveRecord: 2.4ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "measures" WHERE "measures"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.9ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 11]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "81a16ba64a110f702b0e04f5c2a372c3"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$BFDaUfQ4p9kl8quBbtfj1.MNG/MIvDANUvqwSJQF.2iQJ0cxyScx."], ["created_at", "2015-07-24 15:10:18.582248"], ["updated_at", "2015-07-24 15:10:18.582248"], ["auth_token", "81a16ba64a110f702b0e04f5c2a372c3"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$BFDaUfQ4p9kl8quBbtfj1.MNG/MIvDANUvqwSJQF.2iQJ0cxyScx."], ["created_at", "2015-07-24 15:10:18.582248"], ["updated_at", "2015-07-24 15:10:18.582248"], ["auth_token", "81a16ba64a110f702b0e04f5c2a372c3"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_12"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (107.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (38.8ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (50.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (75.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (53.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (38.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:19.092110"], ["updated_at", "2015-07-24 15:10:19.092110"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 12]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (4.8ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 11ms (Views: 7.4ms | ActiveRecord: 1.3ms)
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 12]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "96f354cbdc27816648e6ef2957ebb999"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RdM7jWA4Y6QkAwan9VD0q.sdUuPj/Mfqn7GWcHC.oAXs2z46FI5iy"], ["created_at", "2015-07-24 15:10:19.124119"], ["updated_at", "2015-07-24 15:10:19.124119"], ["auth_token", "96f354cbdc27816648e6ef2957ebb999"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$RdM7jWA4Y6QkAwan9VD0q.sdUuPj/Mfqn7GWcHC.oAXs2z46FI5iy"], ["created_at", "2015-07-24 15:10:19.124119"], ["updated_at", "2015-07-24 15:10:19.124119"], ["auth_token", "96f354cbdc27816648e6ef2957ebb999"], ["id", 13], ["schema_name", "prv_13"], ["id", 13]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_13"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (83.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (119.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (60.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:19.645500"], ["updated_at", "2015-07-24 15:10:19.645500"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 13]]
  Rendered circuits/_form.html.erb (9.3ms)
  Rendered circuits/new.html.erb within layouts/application (11.2ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 120ms (Views: 116.0ms | ActiveRecord: 1.3ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 13]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "dc297b42e27d3969ec7f7c903383c7aa"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$cyFBCP22oLg/bEclS0W8f.PDlqwVCUda.ziRUOda8hOp7LdH4ijc."], ["created_at", "2015-07-24 15:10:19.794554"], ["updated_at", "2015-07-24 15:10:19.794554"], ["auth_token", "dc297b42e27d3969ec7f7c903383c7aa"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$cyFBCP22oLg/bEclS0W8f.PDlqwVCUda.ziRUOda8hOp7LdH4ijc."], ["created_at", "2015-07-24 15:10:19.794554"], ["updated_at", "2015-07-24 15:10:19.794554"], ["auth_token", "dc297b42e27d3969ec7f7c903383c7aa"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (115.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (52.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (107.8ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (113.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (44.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (51.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.0ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:20.422011"], ["updated_at", "2015-07-24 15:10:20.422011"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 14]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 15:10:20.433726"], ["updated_at", "2015-07-24 15:10:20.433726"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/2
Completed 302 Found in 10ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.9ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "6f2eba04c1438e51eea99cd0fe8e5068"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$l3MgrY6oVHTgS/jL707ON.jc0bgk6JIPVZVNLddHph8IOSmkeDzYC"], ["created_at", "2015-07-24 15:10:20.466329"], ["updated_at", "2015-07-24 15:10:20.466329"], ["auth_token", "6f2eba04c1438e51eea99cd0fe8e5068"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$l3MgrY6oVHTgS/jL707ON.jc0bgk6JIPVZVNLddHph8IOSmkeDzYC"], ["created_at", "2015-07-24 15:10:20.466329"], ["updated_at", "2015-07-24 15:10:20.466329"], ["auth_token", "6f2eba04c1438e51eea99cd0fe8e5068"], ["id", 15], ["schema_name", "prv_15"], ["id", 15]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_15"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (93.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (142.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (50.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.0ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (38.1ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (60.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.9ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:21.044645"], ["updated_at", "2015-07-24 15:10:21.044645"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 15]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 13ms (ActiveRecord: 4.6ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "ed9dc5571c5a623a0beafad53ce119df"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Gyk5pXh5MD9XdtmXelW7sujzFC2sQ7mw.szeLH9gV6Y9oR28oU3KW"], ["created_at", "2015-07-24 15:10:21.082139"], ["updated_at", "2015-07-24 15:10:21.082139"], ["auth_token", "ed9dc5571c5a623a0beafad53ce119df"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Gyk5pXh5MD9XdtmXelW7sujzFC2sQ7mw.szeLH9gV6Y9oR28oU3KW"], ["created_at", "2015-07-24 15:10:21.082139"], ["updated_at", "2015-07-24 15:10:21.082139"], ["auth_token", "ed9dc5571c5a623a0beafad53ce119df"], ["id", 16], ["schema_name", "prv_16"], ["id", 16]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_16"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (98.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (71.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (101.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (29.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (67.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (33.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:21.637291"], ["updated_at", "2015-07-24 15:10:21.637291"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 16]]
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (1.0ms)
  Rendered circuits/edit.html.erb within layouts/application (1.8ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 14ms (Views: 6.8ms | ActiveRecord: 2.6ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "0d7e17ff3629dfe7009c554de46107ae"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3CA8N6.s3Z11RyXkJSQ8NOShsUrvJYNWDthjN67.cpE.WKj2cRbja"], ["created_at", "2015-07-24 15:10:21.681889"], ["updated_at", "2015-07-24 15:10:21.681889"], ["auth_token", "0d7e17ff3629dfe7009c554de46107ae"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3CA8N6.s3Z11RyXkJSQ8NOShsUrvJYNWDthjN67.cpE.WKj2cRbja"], ["created_at", "2015-07-24 15:10:21.681889"], ["updated_at", "2015-07-24 15:10:21.681889"], ["auth_token", "0d7e17ff3629dfe7009c554de46107ae"], ["id", 17], ["schema_name", "prv_17"], ["id", 17]]
  [1m[36m (0.2ms)[0m  [1mCREATE SCHEMA "prv_17"[0m
  [1m[35mSQL (0.1ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (100.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (52.6ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (53.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (48.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (38.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:22.209472"], ["updated_at", "2015-07-24 15:10:22.209472"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 17]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/1
Completed 302 Found in 10ms (ActiveRecord: 2.7ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "700430bfd0f9e41312fa3b183396b10f"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$aJzy5/T.gfvjJvDSvCQvUetYsJ4oMgPcBi285h4BQkcbNQ.n339MC"], ["created_at", "2015-07-24 15:10:22.249527"], ["updated_at", "2015-07-24 15:10:22.249527"], ["auth_token", "700430bfd0f9e41312fa3b183396b10f"]]
  [1m[35mSQL (0.3ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$aJzy5/T.gfvjJvDSvCQvUetYsJ4oMgPcBi285h4BQkcbNQ.n339MC"], ["created_at", "2015-07-24 15:10:22.249527"], ["updated_at", "2015-07-24 15:10:22.249527"], ["auth_token", "700430bfd0f9e41312fa3b183396b10f"], ["id", 18], ["schema_name", "prv_18"], ["id", 18]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_18"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (84.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.0ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (117.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.6ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (72.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:10:22.798751"], ["updated_at", "2015-07-24 15:10:22.798751"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 18]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mCircuit Load (0.2ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (4.0ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 14ms (Views: 6.2ms | ActiveRecord: 2.2ms)
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (18.1ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.9ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 15:30:14', '2015-07-24 15:30:14', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 15:30:14', '2015-07-24 15:30:14', 298486374)
  [1m[36mFixture Delete (0.6ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 15:30:14', '2015-07-24 15:30:14')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 15:30:14', '2015-07-24 15:30:14')[0m
  [1m[35m (4.7ms)[0m  COMMIT
  [1m[36m (9.5ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (1.0ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "11e4c923b4593b487974956ec3a90172"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$dIbEU1NN.lLBZ0RNoHN6uehduXKvFzsKJ6f4x8FEWsPF5ffrgtp1m"], ["created_at", "2015-07-24 15:30:14.744848"], ["updated_at", "2015-07-24 15:30:14.744848"], ["auth_token", "11e4c923b4593b487974956ec3a90172"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$dIbEU1NN.lLBZ0RNoHN6uehduXKvFzsKJ6f4x8FEWsPF5ffrgtp1m"], ["created_at", "2015-07-24 15:30:14.744848"], ["updated_at", "2015-07-24 15:30:14.744848"], ["auth_token", "11e4c923b4593b487974956ec3a90172"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[36m (1.0ms)[0m  [1mCREATE SCHEMA "prv_3"[0m
  [1m[35mSQL (0.5ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (89.0ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (50.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (94.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (51.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (51.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.3ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (38.7ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (50.7ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:15.317915"], ["updated_at", "2015-07-24 15:30:15.317915"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 3]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 18ms (ActiveRecord: 4.1ms)
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.7ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "fb488e6845f3032d771a0fdae50bb08d"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Oi5uFUJ0BOIuoqu4wzr1JO4qBfLfq.VPsKysLPEnjtWv7Tz6P1gYS"], ["created_at", "2015-07-24 15:30:15.369166"], ["updated_at", "2015-07-24 15:30:15.369166"], ["auth_token", "fb488e6845f3032d771a0fdae50bb08d"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Oi5uFUJ0BOIuoqu4wzr1JO4qBfLfq.VPsKysLPEnjtWv7Tz6P1gYS"], ["created_at", "2015-07-24 15:30:15.369166"], ["updated_at", "2015-07-24 15:30:15.369166"], ["auth_token", "fb488e6845f3032d771a0fdae50bb08d"], ["id", 4], ["schema_name", "prv_4"], ["id", 4]]
  [1m[35m (0.3ms)[0m  CREATE SCHEMA "prv_4"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (94.3ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.8ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (64.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (86.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (41.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (61.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.8ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:15.912769"], ["updated_at", "2015-07-24 15:30:15.912769"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 15:30:15.923479"], ["updated_at", "2015-07-24 15:30:15.923479"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/2
Completed 302 Found in 10ms (ActiveRecord: 2.2ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 2]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 4]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "060571431c838d84298a95f998c65158"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$FR0POr60urweDO6wRZsdI.TFcVfGXE2LgA8IOueAxNJ1NDU/P83cq"], ["created_at", "2015-07-24 15:30:15.956164"], ["updated_at", "2015-07-24 15:30:15.956164"], ["auth_token", "060571431c838d84298a95f998c65158"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$FR0POr60urweDO6wRZsdI.TFcVfGXE2LgA8IOueAxNJ1NDU/P83cq"], ["created_at", "2015-07-24 15:30:15.956164"], ["updated_at", "2015-07-24 15:30:15.956164"], ["auth_token", "060571431c838d84298a95f998c65158"], ["id", 5], ["schema_name", "prv_5"], ["id", 5]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_5"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (87.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (29.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (108.5ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.4ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (57.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.5ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:16.460631"], ["updated_at", "2015-07-24 15:30:16.460631"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 5]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.4ms)
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (7.8ms)
  Rendered layouts/_header.html.erb (1.2ms)
  Rendered layouts/_sidebar.html.erb (1.3ms)
  Rendered layouts/_alerts.html.erb (0.4ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 27ms (Views: 18.5ms | ActiveRecord: 3.3ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 5]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a6ed8b7e3909a47a16e20e36493f5395"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$l9C7i.X0dRf108y/vAeDp.USuhISH6I9Mie1a1eJM.7jyPy82L2N2"], ["created_at", "2015-07-24 15:30:16.517630"], ["updated_at", "2015-07-24 15:30:16.517630"], ["auth_token", "a6ed8b7e3909a47a16e20e36493f5395"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$l9C7i.X0dRf108y/vAeDp.USuhISH6I9Mie1a1eJM.7jyPy82L2N2"], ["created_at", "2015-07-24 15:30:16.517630"], ["updated_at", "2015-07-24 15:30:16.517630"], ["auth_token", "a6ed8b7e3909a47a16e20e36493f5395"], ["id", 6], ["schema_name", "prv_6"], ["id", 6]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_6"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (86.6ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (53.8ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (43.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (97.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (63.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (42.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:17.057946"], ["updated_at", "2015-07-24 15:30:17.057946"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 6]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (7.4ms)
  Rendered circuits/edit.html.erb within layouts/application (9.1ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 134ms (Views: 127.2ms | ActiveRecord: 1.9ms)
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 6]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.1ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4c463b9c7479d3cf719a32c85109cc50"]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eTYQR/aTKOkbG2sIst.ds.uiVHHAQauonU.lSUZmB9sBH6mQ6N02y"], ["created_at", "2015-07-24 15:30:17.211297"], ["updated_at", "2015-07-24 15:30:17.211297"], ["auth_token", "4c463b9c7479d3cf719a32c85109cc50"]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eTYQR/aTKOkbG2sIst.ds.uiVHHAQauonU.lSUZmB9sBH6mQ6N02y"], ["created_at", "2015-07-24 15:30:17.211297"], ["updated_at", "2015-07-24 15:30:17.211297"], ["auth_token", "4c463b9c7479d3cf719a32c85109cc50"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[35m (0.2ms)[0m  CREATE SCHEMA "prv_7"
  [1m[36mSQL (0.1ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (92.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (31.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (62.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (88.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (53.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (61.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:17.733065"], ["updated_at", "2015-07-24 15:30:17.733065"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 7]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (5.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 2.3ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 7]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "741b14d6db1a4900a53388156ac47be5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$8cL.XagR6EyAJ2y8phezxO26Db/e6P7qeE34ylliNm6.1NABvMIN6"], ["created_at", "2015-07-24 15:30:17.778035"], ["updated_at", "2015-07-24 15:30:17.778035"], ["auth_token", "741b14d6db1a4900a53388156ac47be5"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$8cL.XagR6EyAJ2y8phezxO26Db/e6P7qeE34ylliNm6.1NABvMIN6"], ["created_at", "2015-07-24 15:30:17.778035"], ["updated_at", "2015-07-24 15:30:17.778035"], ["auth_token", "741b14d6db1a4900a53388156ac47be5"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_8"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (104.4ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (109.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (55.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (37.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:18.303676"], ["updated_at", "2015-07-24 15:30:18.303676"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 8]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/1
Completed 302 Found in 10ms (ActiveRecord: 2.9ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 8]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2f8c8576b2ec8990c74bd06592101ed7"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$40GoZoPIWWVVQTJjMscfB.hmSY2lolD4.3afu2cfuu0iR5SG39KaO"], ["created_at", "2015-07-24 15:30:18.342958"], ["updated_at", "2015-07-24 15:30:18.342958"], ["auth_token", "2f8c8576b2ec8990c74bd06592101ed7"]]
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$40GoZoPIWWVVQTJjMscfB.hmSY2lolD4.3afu2cfuu0iR5SG39KaO"], ["created_at", "2015-07-24 15:30:18.342958"], ["updated_at", "2015-07-24 15:30:18.342958"], ["auth_token", "2f8c8576b2ec8990c74bd06592101ed7"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[35m (0.3ms)[0m  CREATE SCHEMA "prv_9"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (87.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (55.1ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (41.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (85.6ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (62.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.5ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:18.849801"], ["updated_at", "2015-07-24 15:30:18.849801"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#new as HTML
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 9]]
  Rendered circuits/_form.html.erb (1.8ms)
  Rendered circuits/new.html.erb within layouts/application (3.1ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 8.2ms | ActiveRecord: 1.1ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.0ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 9]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 1]]
  [1m[35mCircuit Load (0.7ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (4.5ms)[0m  SELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_general_status.html.erb (2.3ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_last_measures.html.erb (2.2ms)
  Rendered welcome/_month_status.html.erb (0.9ms)
  Rendered welcome/_bar_graph.html.erb (0.4ms)
  Rendered welcome/index.html.erb within layouts/application (9.5ms)
  Rendered layouts/_header.html.erb (0.6ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 24ms (Views: 12.2ms | ActiveRecord: 7.9ms)
  [1m[36m (0.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f2d58750889b9b56e50a29ff3ea9314a"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$iK2brGZti4c9OKutuXrkvenJ/r7lE1IzzxRVFqQDvz4bh2Fh31o.."], ["created_at", "2015-07-24 15:30:18.920915"], ["updated_at", "2015-07-24 15:30:18.920915"], ["auth_token", "f2d58750889b9b56e50a29ff3ea9314a"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$iK2brGZti4c9OKutuXrkvenJ/r7lE1IzzxRVFqQDvz4bh2Fh31o.."], ["created_at", "2015-07-24 15:30:18.920915"], ["updated_at", "2015-07-24 15:30:18.920915"], ["auth_token", "f2d58750889b9b56e50a29ff3ea9314a"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (95.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (60.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (95.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (3.0ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (49.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:19.459788"], ["updated_at", "2015-07-24 15:30:19.459788"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 12:30:19 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f2d58750889b9b56e50a29ff3ea9314a"]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 15:30:19.505700"], ["updated_at", "2015-07-24 15:30:19.505700"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Completed 201 Created in 23ms (Views: 0.5ms | ActiveRecord: 2.2ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "measures" WHERE "measures"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.2ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 10]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7d3424a961ec777fb1342905d63af9d8"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$udwX/2.D.769mwVHOW7STed218lI4uvb6uwvbauCSAEUt7XzRxKUS"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:30:19.536078"], ["updated_at", "2015-07-24 15:30:19.536078"], ["auth_token", "7d3424a961ec777fb1342905d63af9d8"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:19.542544"], ["updated_at", "2015-07-24 15:30:19.542544"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "dd259912e46aeea156b2106b7c854613"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$D0m2TYJe4qYBzvZvML9Zt.zW3LgF9sfRiajq9IakLtIvgKtK0Uyh2"], ["created_at", "2015-07-24 15:30:19.551688"], ["updated_at", "2015-07-24 15:30:19.551688"], ["auth_token", "dd259912e46aeea156b2106b7c854613"]]
  [1m[35mSQL (0.9ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$D0m2TYJe4qYBzvZvML9Zt.zW3LgF9sfRiajq9IakLtIvgKtK0Uyh2"], ["created_at", "2015-07-24 15:30:19.551688"], ["updated_at", "2015-07-24 15:30:19.551688"], ["auth_token", "dd259912e46aeea156b2106b7c854613"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[36m (0.6ms)[0m  [1mCREATE SCHEMA "prv_12"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (86.0ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (57.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (76.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.9ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (54.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (36.9ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/16/measures" for 127.0.0.1 at 2015-07-24 12:30:20 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"16"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7d3424a961ec777fb1342905d63af9d8"]]
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 16]]
Completed 200 OK in 6ms (Views: 1.1ms | ActiveRecord: 1.7ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 16]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 16]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 16]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 11]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.4ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1d43e0e4ab470e26f72313ed1665ab38"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$VMSIiN7b99ceWk0IEGVafuRBmWWQzWTAzIlu/ZMdCQVEZEINStrFK"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:30:20.086510"], ["updated_at", "2015-07-24 15:30:20.086510"], ["auth_token", "1d43e0e4ab470e26f72313ed1665ab38"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:20.091989"], ["updated_at", "2015-07-24 15:30:20.091989"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "4d1cff90dd14f243d39ce3597468e72f"]]
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$IiK7lY6HouWFfUa.MYmLMem5ApT7DPYi9q.TzfQKiHXzaao4mHmBu"], ["created_at", "2015-07-24 15:30:20.099248"], ["updated_at", "2015-07-24 15:30:20.099248"], ["auth_token", "4d1cff90dd14f243d39ce3597468e72f"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$IiK7lY6HouWFfUa.MYmLMem5ApT7DPYi9q.TzfQKiHXzaao4mHmBu"], ["created_at", "2015-07-24 15:30:20.099248"], ["updated_at", "2015-07-24 15:30:20.099248"], ["auth_token", "4d1cff90dd14f243d39ce3597468e72f"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (92.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (52.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (42.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (85.4ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (51.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (39.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/17/measures" for 127.0.0.1 at 2015-07-24 12:30:20 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"17"}
  [1m[35mUser Load (0.8ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "1d43e0e4ab470e26f72313ed1665ab38"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 17]]
Completed 200 OK in 27ms (Views: 0.6ms | ActiveRecord: 2.1ms)
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 17]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 17]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 17]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (1.4ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a6251f192a404abe07e03611233748d6"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$F5F65xPtojKtvvKXRe5ASuTZOd9Dlb4tUVJlNEMxwpg/Dadb9bWtu"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:30:20.648953"], ["updated_at", "2015-07-24 15:30:20.648953"], ["auth_token", "a6251f192a404abe07e03611233748d6"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:20.654641"], ["updated_at", "2015-07-24 15:30:20.654641"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "cb0114c52543698f8774e05ba77eda24"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$UcnkU41zSkcDFFv1vYwJIey6XMd6ssCJGI9roVolS5BGqkwZ8bjgS"], ["created_at", "2015-07-24 15:30:20.662280"], ["updated_at", "2015-07-24 15:30:20.662280"], ["auth_token", "cb0114c52543698f8774e05ba77eda24"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$UcnkU41zSkcDFFv1vYwJIey6XMd6ssCJGI9roVolS5BGqkwZ8bjgS"], ["created_at", "2015-07-24 15:30:20.662280"], ["updated_at", "2015-07-24 15:30:20.662280"], ["auth_token", "cb0114c52543698f8774e05ba77eda24"], ["id", 16], ["schema_name", "prv_16"], ["id", 16]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_16"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (77.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (96.8ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (94.6ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (49.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (42.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (31.9ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/18/measures" for 127.0.0.1 at 2015-07-24 12:30:21 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"18"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a6251f192a404abe07e03611233748d6"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 18]]
Completed 200 OK in 4ms (Views: 0.7ms | ActiveRecord: 2.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 18]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 18]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 18]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 15]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 16]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f1d709f2183f60b2d5be925c0e6e6d86"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$2k957z5RmlqB0r/KcZITF.bUD3L/ykecpA7qmACCg4KSutkzo0jau"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:30:21.221154"], ["updated_at", "2015-07-24 15:30:21.221154"], ["auth_token", "f1d709f2183f60b2d5be925c0e6e6d86"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:30:21.228263"], ["updated_at", "2015-07-24 15:30:21.228263"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "120271970f7f18d7cdf7f170f3803c93"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Mdinyi5RXyY7ShJ2NRPOVe1mr7fjMD5nWlORl3GWB.0Ofaqp4Q3oK"], ["created_at", "2015-07-24 15:30:21.235785"], ["updated_at", "2015-07-24 15:30:21.235785"], ["auth_token", "120271970f7f18d7cdf7f170f3803c93"]]
  [1m[36mSQL (0.8ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$Mdinyi5RXyY7ShJ2NRPOVe1mr7fjMD5nWlORl3GWB.0Ofaqp4Q3oK"], ["created_at", "2015-07-24 15:30:21.235785"], ["updated_at", "2015-07-24 15:30:21.235785"], ["auth_token", "120271970f7f18d7cdf7f170f3803c93"], ["id", 18], ["schema_name", "prv_18"], ["id", 18]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_18"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (85.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (31.0ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (99.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (29.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (40.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (40.3ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (62.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/19/measures" for 127.0.0.1 at 2015-07-24 12:30:21 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"19"}
  [1m[35mUser Load (0.5ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f1d709f2183f60b2d5be925c0e6e6d86\"fake"]]
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 2ms (Views: 0.1ms | ActiveRecord: 0.5ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 19]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 19]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 19]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.6ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 17]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.6ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (33.3ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.8ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.7ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 15:42:01', '2015-07-24 15:42:01', 980190962)[0m
  [1m[35mFixture Insert (0.5ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 15:42:01', '2015-07-24 15:42:01', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 15:42:01', '2015-07-24 15:42:01')
  [1m[36mFixture Insert (0.4ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 15:42:01', '2015-07-24 15:42:01')[0m
  [1m[35m (7.0ms)[0m  COMMIT
  [1m[36m (8.6ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (4.7ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.8ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (3.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.4ms)
  Rendered welcome/_month_status.html.erb (0.5ms)
  Rendered welcome/_bar_graph.html.erb (0.3ms)
  Rendered welcome/index.html.erb within layouts/application (13.6ms)
  Rendered layouts/_header.html.erb (1.0ms)
  Rendered layouts/_sidebar.html.erb (1.1ms)
  Rendered layouts/_alerts.html.erb (0.3ms)
  Rendered layouts/_footer.html.erb (0.2ms)
Completed 200 OK in 39ms (Views: 24.2ms | ActiveRecord: 8.4ms)
  [1m[35m (0.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.8ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.9ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a3961c54d97452c11941e36705b163d5"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$c9INqdz4VUuat86rYNnMT.22DJ1WlPzKyJ3nRD18kCPJHiCiimD9S"], ["created_at", "2015-07-24 15:42:01.449940"], ["updated_at", "2015-07-24 15:42:01.449940"], ["auth_token", "a3961c54d97452c11941e36705b163d5"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$c9INqdz4VUuat86rYNnMT.22DJ1WlPzKyJ3nRD18kCPJHiCiimD9S"], ["created_at", "2015-07-24 15:42:01.449940"], ["updated_at", "2015-07-24 15:42:01.449940"], ["auth_token", "a3961c54d97452c11941e36705b163d5"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.9ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.5ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (79.4ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.2ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.7ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (72.3ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (1.6ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (51.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:01.956942"], ["updated_at", "2015-07-24 15:42:01.956942"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 12:42:01 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.6ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.3ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.7ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 3]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "0c478851ae73a19a1b6f59f05d14b946"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bDmnu3u5NBMhvqHOYoBdKeyOdPC54/anqhL./egA2M6oXze3Pv2Li"], ["created_at", "2015-07-24 15:42:02.029017"], ["updated_at", "2015-07-24 15:42:02.029017"], ["auth_token", "0c478851ae73a19a1b6f59f05d14b946"]]
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$bDmnu3u5NBMhvqHOYoBdKeyOdPC54/anqhL./egA2M6oXze3Pv2Li"], ["created_at", "2015-07-24 15:42:02.029017"], ["updated_at", "2015-07-24 15:42:02.029017"], ["auth_token", "0c478851ae73a19a1b6f59f05d14b946"], ["id", 4], ["schema_name", "prv_4"], ["id", 4]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_4"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (90.8ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (43.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (43.1ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (106.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (51.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.9ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (61.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (50.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:02.573733"], ["updated_at", "2015-07-24 15:42:02.573733"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/circuits
Completed 302 Found in 12ms (ActiveRecord: 3.9ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "9093b503e171897240f7a1eb2be31a73"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZJa1sYWuqLeGxp9uhKdW5etFp13ni4Cy9YULsUhCkEjt7XWGKOnl6"], ["created_at", "2015-07-24 15:42:02.617958"], ["updated_at", "2015-07-24 15:42:02.617958"], ["auth_token", "9093b503e171897240f7a1eb2be31a73"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$ZJa1sYWuqLeGxp9uhKdW5etFp13ni4Cy9YULsUhCkEjt7XWGKOnl6"], ["created_at", "2015-07-24 15:42:02.617958"], ["updated_at", "2015-07-24 15:42:02.617958"], ["auth_token", "9093b503e171897240f7a1eb2be31a73"], ["id", 5], ["schema_name", "prv_5"], ["id", 5]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_5"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (94.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (54.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.3ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (83.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (38.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (52.1ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:03.123217"], ["updated_at", "2015-07-24 15:42:03.123217"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 5]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/1
Completed 302 Found in 9ms (ActiveRecord: 2.5ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "820457c210ae00c0c1821d38079b8939"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$dlAh2JM/pXMev/2UpUFHuO/8o4IlRYNRzvg4JqQlP6Rjcxl8QqXIq"], ["created_at", "2015-07-24 15:42:03.161786"], ["updated_at", "2015-07-24 15:42:03.161786"], ["auth_token", "820457c210ae00c0c1821d38079b8939"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$dlAh2JM/pXMev/2UpUFHuO/8o4IlRYNRzvg4JqQlP6Rjcxl8QqXIq"], ["created_at", "2015-07-24 15:42:03.161786"], ["updated_at", "2015-07-24 15:42:03.161786"], ["auth_token", "820457c210ae00c0c1821d38079b8939"], ["id", 6], ["schema_name", "prv_6"], ["id", 6]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_6"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (80.4ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (58.8ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (37.2ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (84.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (42.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (56.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.2ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (37.9ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (39.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:03.656345"], ["updated_at", "2015-07-24 15:42:03.656345"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 6]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (6.1ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 8.9ms | ActiveRecord: 2.2ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.6ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "413117a77baa0388da1583078324f865"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$I.iUPLNogddIQQrn2Sp.MOcXtaXPain5C8jboGfzbyp1yFbe3ienu"], ["created_at", "2015-07-24 15:42:03.703738"], ["updated_at", "2015-07-24 15:42:03.703738"], ["auth_token", "413117a77baa0388da1583078324f865"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$I.iUPLNogddIQQrn2Sp.MOcXtaXPain5C8jboGfzbyp1yFbe3ienu"], ["created_at", "2015-07-24 15:42:03.703738"], ["updated_at", "2015-07-24 15:42:03.703738"], ["auth_token", "413117a77baa0388da1583078324f865"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (94.1ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.5ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.7ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (107.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (42.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.7ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (29.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:04.194451"], ["updated_at", "2015-07-24 15:42:04.194451"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 7]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 15:42:04.204581"], ["updated_at", "2015-07-24 15:42:04.204581"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/2
Completed 302 Found in 8ms (ActiveRecord: 2.1ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.9ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "5709ae1bc7fad16ae2109a5997bdab62"]]
  [1m[36mSQL (1.1ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$/3gIRmhHlY6pNaC1ZN/er.iJEzVHdew0ryZ2oD9qMHKBALXZW/qxC"], ["created_at", "2015-07-24 15:42:04.239349"], ["updated_at", "2015-07-24 15:42:04.239349"], ["auth_token", "5709ae1bc7fad16ae2109a5997bdab62"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$/3gIRmhHlY6pNaC1ZN/er.iJEzVHdew0ryZ2oD9qMHKBALXZW/qxC"], ["created_at", "2015-07-24 15:42:04.239349"], ["updated_at", "2015-07-24 15:42:04.239349"], ["auth_token", "5709ae1bc7fad16ae2109a5997bdab62"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (71.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.4ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (43.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (40.1ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (58.8ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:04.720186"], ["updated_at", "2015-07-24 15:42:04.720186"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 8]]
  Rendered circuits/_form.html.erb (9.0ms)
  Rendered circuits/new.html.erb within layouts/application (11.0ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 121ms (Views: 116.9ms | ActiveRecord: 1.3ms)
  [1m[36mCircuit Load (0.6ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.8ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 8]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "103a9ef814446a8d59cc19c4f62f919c"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$knyqy6A/ArzpmjjOKQ/OB.tvPRJ0.w3SZniqgWq9QdCZslrAX8m6G"], ["created_at", "2015-07-24 15:42:04.872845"], ["updated_at", "2015-07-24 15:42:04.872845"], ["auth_token", "103a9ef814446a8d59cc19c4f62f919c"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$knyqy6A/ArzpmjjOKQ/OB.tvPRJ0.w3SZniqgWq9QdCZslrAX8m6G"], ["created_at", "2015-07-24 15:42:04.872845"], ["updated_at", "2015-07-24 15:42:04.872845"], ["auth_token", "103a9ef814446a8d59cc19c4f62f919c"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[36m (0.2ms)[0m  [1mCREATE SCHEMA "prv_9"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (105.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (111.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (47.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (42.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:05.402394"], ["updated_at", "2015-07-24 15:42:05.402394"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 9]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (1.4ms)
  Rendered circuits/edit.html.erb within layouts/application (2.6ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 16ms (Views: 8.5ms | ActiveRecord: 2.2ms)
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 9]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.5ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b25a1c1fc61c87c9f875014b023c95be"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$4jN6h9jsrxmPbAEHFThPrunmZ2KgtHKzNMdgs/73zqd0HTpT3IQM2"], ["created_at", "2015-07-24 15:42:05.447810"], ["updated_at", "2015-07-24 15:42:05.447810"], ["auth_token", "b25a1c1fc61c87c9f875014b023c95be"]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$4jN6h9jsrxmPbAEHFThPrunmZ2KgtHKzNMdgs/73zqd0HTpT3IQM2"], ["created_at", "2015-07-24 15:42:05.447810"], ["updated_at", "2015-07-24 15:42:05.447810"], ["auth_token", "b25a1c1fc61c87c9f875014b023c95be"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[36m (0.3ms)[0m  [1mCREATE SCHEMA "prv_10"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (90.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.7ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (31.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (74.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (41.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (49.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.3ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:05.926342"], ["updated_at", "2015-07-24 15:42:05.926342"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 10]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.5ms)
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (5.4ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 7.7ms | ActiveRecord: 4.1ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.0ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 10]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "f5dca23165ca4698f7c9542a72cf8c52"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$Bzht9.MS6AsnMszutIdfQu9yv5DcBJJ156PPhre8SlZswjRXGfN/S"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:42:05.974330"], ["updated_at", "2015-07-24 15:42:05.974330"], ["auth_token", "f5dca23165ca4698f7c9542a72cf8c52"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:05.984265"], ["updated_at", "2015-07-24 15:42:05.984265"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "21b4834bc2190ec43bcf59f1685831c6"]]
  [1m[35mSQL (0.9ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$0MXC.tO7hyZn1GiMaqyPe.D5bzD0O1sKFBTxa9lFoV2IcgEHLiCfu"], ["created_at", "2015-07-24 15:42:05.992177"], ["updated_at", "2015-07-24 15:42:05.992177"], ["auth_token", "21b4834bc2190ec43bcf59f1685831c6"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$0MXC.tO7hyZn1GiMaqyPe.D5bzD0O1sKFBTxa9lFoV2IcgEHLiCfu"], ["created_at", "2015-07-24 15:42:05.992177"], ["updated_at", "2015-07-24 15:42:05.992177"], ["auth_token", "21b4834bc2190ec43bcf59f1685831c6"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_12"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (87.7ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.6ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.3ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (96.7ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (42.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (56.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (47.3ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/20/measures" for 127.0.0.1 at 2015-07-24 12:42:06 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"20"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.6ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 20]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 20]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 20]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 11]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 12]]
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.4ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "cdcfa7ea223c54edba623fd907701817"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$7.tP17ouwfL6Ynw2/15eNOiLtSQuNSRzN3BDlWfeBx0yKybCMxvmO"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:42:06.538053"], ["updated_at", "2015-07-24 15:42:06.538053"], ["auth_token", "cdcfa7ea223c54edba623fd907701817"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:06.544204"], ["updated_at", "2015-07-24 15:42:06.544204"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "03e472b57b376ab7503959ac5705b255"]]
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$gbfkmFVewZndd33YzT1qyOaB6wxt4AvB8eAZTzlM65vNRSHikz1AO"], ["created_at", "2015-07-24 15:42:06.552121"], ["updated_at", "2015-07-24 15:42:06.552121"], ["auth_token", "03e472b57b376ab7503959ac5705b255"]]
  [1m[35mSQL (0.8ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$gbfkmFVewZndd33YzT1qyOaB6wxt4AvB8eAZTzlM65vNRSHikz1AO"], ["created_at", "2015-07-24 15:42:06.552121"], ["updated_at", "2015-07-24 15:42:06.552121"], ["auth_token", "03e472b57b376ab7503959ac5705b255"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_14"[0m
  [1m[35mSQL (0.4ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (93.2ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.1ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (53.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (92.7ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.5ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (51.0ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (51.9ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/21/measures" for 127.0.0.1 at 2015-07-24 12:42:07 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"21"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 21]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 21]]
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 21]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 13]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 14]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.0ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.0ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.6ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.2ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "cd084affc7c63e7956e25858c26af2e7"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$ZSvsJRSJH6Jr49CAaKwL/OMD4fafOB3Lkve/F63OqARMdHCh5VG0G"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:42:07.106980"], ["updated_at", "2015-07-24 15:42:07.106980"], ["auth_token", "cd084affc7c63e7956e25858c26af2e7"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:07.112885"], ["updated_at", "2015-07-24 15:42:07.112885"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "da8fe882f8de0f14ddf59bef3c4cc028"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$oyH4DBS.Vpvfv6TT2aBbFerSyz9h8JmMxQllfCeO4disjw.2R8wr2"], ["created_at", "2015-07-24 15:42:07.120301"], ["updated_at", "2015-07-24 15:42:07.120301"], ["auth_token", "da8fe882f8de0f14ddf59bef3c4cc028"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$oyH4DBS.Vpvfv6TT2aBbFerSyz9h8JmMxQllfCeO4disjw.2R8wr2"], ["created_at", "2015-07-24 15:42:07.120301"], ["updated_at", "2015-07-24 15:42:07.120301"], ["auth_token", "da8fe882f8de0f14ddf59bef3c4cc028"], ["id", 16], ["schema_name", "prv_16"], ["id", 16]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_16"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (70.1ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.9ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (95.9ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.6ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (38.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (57.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.7ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.7ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/22/measures" for 127.0.0.1 at 2015-07-24 12:42:07 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"22"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 22]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 22]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 22]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 16]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "8c7bd81ed5a975bd80135e42e673fbfa"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$6VF93P2YrvBRuU84zAf3heU7Bg22fPj3H4kMhRZByRaF8TrCvYM2q"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:42:07.631017"], ["updated_at", "2015-07-24 15:42:07.631017"], ["auth_token", "8c7bd81ed5a975bd80135e42e673fbfa"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:42:07.638073"], ["updated_at", "2015-07-24 15:42:07.638073"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "64e602c7bf86e630dbe925d2ddf3b01c"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$1fPRMTqUz5.cl/56bzeH.eaXgI5YeMroZf0ItUasuqdK67TUGwmA."], ["created_at", "2015-07-24 15:42:07.645299"], ["updated_at", "2015-07-24 15:42:07.645299"], ["auth_token", "64e602c7bf86e630dbe925d2ddf3b01c"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$1fPRMTqUz5.cl/56bzeH.eaXgI5YeMroZf0ItUasuqdK67TUGwmA."], ["created_at", "2015-07-24 15:42:07.645299"], ["updated_at", "2015-07-24 15:42:07.645299"], ["auth_token", "64e602c7bf86e630dbe925d2ddf3b01c"], ["id", 18], ["schema_name", "prv_18"], ["id", 18]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_18"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (84.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (61.9ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.5ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (55.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (46.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.6ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/23/measures" for 127.0.0.1 at 2015-07-24 12:42:08 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"23"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 23]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 23]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 23]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 17]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mROLLBACK[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (14.0ms)[0m  ALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "measures" DISABLE TRIGGER ALL;ALTER TABLE "circuits" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL
  [1m[36m (0.4ms)[0m  [1mBEGIN[0m
  [1m[35mFixture Delete (0.6ms)[0m  DELETE FROM "circuits"
  [1m[36mFixture Insert (0.5ms)[0m  [1mINSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Demand', 5, '2015-07-24 15:43:01', '2015-07-24 15:43:01', 980190962)[0m
  [1m[35mFixture Insert (0.3ms)[0m  INSERT INTO "circuits" ("description", "type", "alarm_time", "created_at", "updated_at", "id") VALUES ('MyText', 'Generation', 5, '2015-07-24 15:43:01', '2015-07-24 15:43:01', 298486374)
  [1m[36mFixture Delete (0.8ms)[0m  [1mDELETE FROM "public"."users"[0m
  [1m[35mFixture Insert (0.6ms)[0m  INSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (1, 'Rocco', 'rocco@motherfucker.com', '2b4df314f32b4a659eb0f8ea1e7f5506', 'prv_1', '2015-07-24 15:43:01', '2015-07-24 15:43:01')
  [1m[36mFixture Insert (0.6ms)[0m  [1mINSERT INTO "public"."users" ("id", "name", "email", "auth_token", "schema_name", "created_at", "updated_at") VALUES (2, 'Jenna', 'jenna@fine.com', '2b4df314f32b4a659eb0f8ea1e7f5508', 'prv_2', '2015-07-24 15:43:01', '2015-07-24 15:43:01')[0m
  [1m[35m (4.2ms)[0m  COMMIT
  [1m[36m (8.9ms)[0m  [1mALTER TABLE "schema_migrations" ENABLE TRIGGER ALL;ALTER TABLE "measures" ENABLE TRIGGER ALL;ALTER TABLE "circuits" ENABLE TRIGGER ALL;ALTER TABLE "users" ENABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  BEGIN
--------------------------------------------
WelcomeControllerTest: test_should_get_index
--------------------------------------------
  [1m[36mUser Load (0.9ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1 LIMIT 1[0m  [["id", 1]]
Processing by WelcomeController#index as HTML
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 1]]
  [1m[36mCircuit Load (1.0ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36mUser Load (5.8ms)[0m  [1mSELECT SUM(Watts) AS "Wattshora", to_char(created_at,'Mon') as mon, extract(year from created_at) as year,"type"   FROM(                                                                                                                   SELECT                                                                                                                  circuits.type as "type",                                                                                              measures.created_at,                                                                                                    measures.watts *                                                                                                        EXTRACT(epoch FROM (measures.created_at - lag(measures.created_at)                                                      over (order by measures.created_at)))/3600 AS Watts                                                                     FROM                                                                                                                    public.users,                                                                                                           prv_1.circuits,                                                                                           prv_1.measures                                                                                            WHERE                                                                                                                   users.id = 1 AND                                                                                                        measures.created_at >= '2015-07-01 03:00:00.000000') AS foo                                                                                        GROUP BY 2,3,4;[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
  Rendered welcome/_general_status.html.erb (2.4ms)
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  Rendered welcome/_last_measures.html.erb (1.9ms)
  Rendered welcome/_month_status.html.erb (1.1ms)
  Rendered welcome/_bar_graph.html.erb (0.6ms)
  Rendered welcome/index.html.erb within layouts/application (13.6ms)
  Rendered layouts/_header.html.erb (2.1ms)
  Rendered layouts/_sidebar.html.erb (1.9ms)
  Rendered layouts/_alerts.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.4ms)
Completed 200 OK in 53ms (Views: 36.4ms | ActiveRecord: 9.6ms)
  [1m[35m (0.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
-------------------------------------------
CreatingMeasuresTest: test_creates_measures
-------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2a51a874dd1c1d6c50844095de94d871"]]
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$zbNROOZQqGGHjACEboCIce6DwtRrUE26vvcQz0LtZBauslf/PMZUm"], ["created_at", "2015-07-24 15:43:01.764022"], ["updated_at", "2015-07-24 15:43:01.764022"], ["auth_token", "2a51a874dd1c1d6c50844095de94d871"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$zbNROOZQqGGHjACEboCIce6DwtRrUE26vvcQz0LtZBauslf/PMZUm"], ["created_at", "2015-07-24 15:43:01.764022"], ["updated_at", "2015-07-24 15:43:01.764022"], ["auth_token", "2a51a874dd1c1d6c50844095de94d871"], ["id", 3], ["schema_name", "prv_3"], ["id", 3]]
  [1m[35m (0.8ms)[0m  CREATE SCHEMA "prv_3"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (77.6ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (30.4ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (40.8ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (84.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (41.7ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (3.1ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (69.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (41.4ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.4ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:02.275004"], ["updated_at", "2015-07-24 15:43:02.275004"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Started POST "/circuits/1/measures" for 127.0.0.1 at 2015-07-24 12:43:02 -0300
Processing by API::MeasuresController#create as JSON
  Parameters: {"measure"=>{"watts"=>65, "circuit_id"=>1}, "subdomain"=>"api", "circuit_id"=>"1"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "2a51a874dd1c1d6c50844095de94d871"]]
  [1m[35mCircuit Load (0.3ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "measures" ("circuit_id", "watts", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["circuit_id", 1], ["watts", 65], ["created_at", "2015-07-24 15:43:02.319077"], ["updated_at", "2015-07-24 15:43:02.319077"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Completed 201 Created in 23ms (Views: 0.4ms | ActiveRecord: 2.1ms)
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "measures" WHERE "measures"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 3]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.7ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------
CircuitsControllerTest: test_should_get_edit
--------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "821e6ff87dcf5cee61804a92f00861bd"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$tCkrZxd3VIX4anpKeyUby.0Ql1fnB8uQQ0EMP2KopnTI8hKNGVI6e"], ["created_at", "2015-07-24 15:43:02.354035"], ["updated_at", "2015-07-24 15:43:02.354035"], ["auth_token", "821e6ff87dcf5cee61804a92f00861bd"]]
  [1m[35mSQL (0.6ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$tCkrZxd3VIX4anpKeyUby.0Ql1fnB8uQQ0EMP2KopnTI8hKNGVI6e"], ["created_at", "2015-07-24 15:43:02.354035"], ["updated_at", "2015-07-24 15:43:02.354035"], ["auth_token", "821e6ff87dcf5cee61804a92f00861bd"], ["id", 4], ["schema_name", "prv_4"], ["id", 4]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_4"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (92.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.2ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (106.0ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (50.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (50.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (53.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:02.887195"], ["updated_at", "2015-07-24 15:43:02.887195"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#edit as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.3ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 4]]
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_form.html.erb (7.9ms)
  Rendered circuits/edit.html.erb within layouts/application (9.1ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.4ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 121ms (Views: 113.8ms | ActiveRecord: 1.2ms)
  [1m[36mCircuit Load (0.3ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.2ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.1ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.2ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 4]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.2ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
-------------------------------------------
CircuitsControllerTest: test_should_get_new
-------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "b29f3130f76c3e1a7a14ea90c1eb6666"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eLhpmXQTHkysohSDAW.bfOezJIjbEkK5lTsDUDC/GJmBY8pAUtiY2"], ["created_at", "2015-07-24 15:43:03.030283"], ["updated_at", "2015-07-24 15:43:03.030283"], ["auth_token", "b29f3130f76c3e1a7a14ea90c1eb6666"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$eLhpmXQTHkysohSDAW.bfOezJIjbEkK5lTsDUDC/GJmBY8pAUtiY2"], ["created_at", "2015-07-24 15:43:03.030283"], ["updated_at", "2015-07-24 15:43:03.030283"], ["auth_token", "b29f3130f76c3e1a7a14ea90c1eb6666"], ["id", 5], ["schema_name", "prv_5"], ["id", 5]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_5"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (71.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (39.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (96.1ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.4ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.1ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (38.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (53.0ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:03.523960"], ["updated_at", "2015-07-24 15:43:03.523960"]]
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#new as HTML
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 5]]
  Rendered circuits/_form.html.erb (1.5ms)
  Rendered circuits/new.html.erb within layouts/application (2.9ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.5ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 12ms (Views: 7.8ms | ActiveRecord: 1.5ms)
  [1m[36mCircuit Load (0.7ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 5]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.9ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
------------------------------------------------
CircuitsControllerTest: test_should_show_circuit
------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "db7af1047872fbe67681192f7611f449"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rPherMcsI2.pyc2T/SY5fu2Mr45S4do64qyDd08FE5UsI7BYDoFKu"], ["created_at", "2015-07-24 15:43:03.567328"], ["updated_at", "2015-07-24 15:43:03.567328"], ["auth_token", "db7af1047872fbe67681192f7611f449"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$rPherMcsI2.pyc2T/SY5fu2Mr45S4do64qyDd08FE5UsI7BYDoFKu"], ["created_at", "2015-07-24 15:43:03.567328"], ["updated_at", "2015-07-24 15:43:03.567328"], ["auth_token", "db7af1047872fbe67681192f7611f449"], ["id", 6], ["schema_name", "prv_6"], ["id", 6]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_6"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (93.3ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (43.4ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (63.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (91.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.0ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (71.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.6ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.5ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.8ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:04.125275"], ["updated_at", "2015-07-24 15:43:04.125275"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Processing by CircuitsController#show as HTML
  Parameters: {"id"=>"1"}
  [1m[35mUser Load (0.6ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1  [["id", 6]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/_graphs.html.erb (0.5ms)
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  Rendered circuits/show.html.erb within layouts/application (5.5ms)
  Rendered layouts/_header.html.erb (0.5ms)
  Rendered layouts/_sidebar.html.erb (0.6ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.0ms)
Completed 200 OK in 19ms (Views: 7.9ms | ActiveRecord: 4.2ms)
  [1m[36mCircuit Load (0.5ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (1.1ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 6]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (3.3ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
--------------------------------------------------
CircuitsControllerTest: test_should_create_circuit
--------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "512f21614267f37d1cfca807b4a79b56"]]
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$m7CD0KcMcU.ks3zmTNuHEuzV9k9anm79XhkqWE6ryCHi2gjKpfItu"], ["created_at", "2015-07-24 15:43:04.171275"], ["updated_at", "2015-07-24 15:43:04.171275"], ["auth_token", "512f21614267f37d1cfca807b4a79b56"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$m7CD0KcMcU.ks3zmTNuHEuzV9k9anm79XhkqWE6ryCHi2gjKpfItu"], ["created_at", "2015-07-24 15:43:04.171275"], ["updated_at", "2015-07-24 15:43:04.171275"], ["auth_token", "512f21614267f37d1cfca807b4a79b56"], ["id", 7], ["schema_name", "prv_7"], ["id", 7]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_7"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (98.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (53.3ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (58.4ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (87.3ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.9ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (39.7ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.9ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (55.8ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (33.4ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.2ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:04.701833"], ["updated_at", "2015-07-24 15:43:04.701833"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#create as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}}
  [1m[36mUser Load (0.4ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "circuits" ("description", "alarm_time", "type", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["description", "Circuito de test"], ["alarm_time", 5], ["type", "Demand"], ["created_at", "2015-07-24 15:43:04.712940"], ["updated_at", "2015-07-24 15:43:04.712940"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Redirected to http://test.host/demands/2
Completed 302 Found in 8ms (ActiveRecord: 1.6ms)
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "circuits"[0m
  [1m[35mCircuit Load (0.3ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.3ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 1]]
  [1m[36mSQL (0.6ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 2]]
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 7]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.8ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.2ms)[0m  BEGIN
---------------------------------------------------
CircuitsControllerTest: test_should_destroy_circuit
---------------------------------------------------
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "8b19e95ee85555c0a30fcc26deba0c0d"]]
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$TvD54YeJ2un4UKiJscso9uUbQF1UmKg.YDvfZKQFbOmDTG8IzZP5e"], ["created_at", "2015-07-24 15:43:04.748611"], ["updated_at", "2015-07-24 15:43:04.748611"], ["auth_token", "8b19e95ee85555c0a30fcc26deba0c0d"]]
  [1m[35mSQL (0.5ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$TvD54YeJ2un4UKiJscso9uUbQF1UmKg.YDvfZKQFbOmDTG8IzZP5e"], ["created_at", "2015-07-24 15:43:04.748611"], ["updated_at", "2015-07-24 15:43:04.748611"], ["auth_token", "8b19e95ee85555c0a30fcc26deba0c0d"], ["id", 8], ["schema_name", "prv_8"], ["id", 8]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_8"[0m
  [1m[35mSQL (0.2ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (73.5ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (76.6ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (42.5ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (87.8ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (52.2ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (50.5ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (40.5ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.7ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:05.262804"], ["updated_at", "2015-07-24 15:43:05.262804"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
Processing by CircuitsController#destroy as HTML
  Parameters: {"id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 8]]
  [1m[35mCircuit Load (0.4ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/circuits
Completed 302 Found in 12ms (ActiveRecord: 4.0ms)
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "circuits"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 8]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (2.9ms)[0m  ROLLBACK
  [1m[36m (0.3ms)[0m  [1mBEGIN[0m
---------------------------------------------
CircuitsControllerTest: test_should_get_index
---------------------------------------------
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "211bf8017f628abb4a69ab6d2910c0e4"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3QmneQkf1IeA.Q13xU0.meME.oRIf8IzCc1ltWj503.dAxcnGzLgq"], ["created_at", "2015-07-24 15:43:05.303517"], ["updated_at", "2015-07-24 15:43:05.303517"], ["auth_token", "211bf8017f628abb4a69ab6d2910c0e4"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3QmneQkf1IeA.Q13xU0.meME.oRIf8IzCc1ltWj503.dAxcnGzLgq"], ["created_at", "2015-07-24 15:43:05.303517"], ["updated_at", "2015-07-24 15:43:05.303517"], ["auth_token", "211bf8017f628abb4a69ab6d2910c0e4"], ["id", 9], ["schema_name", "prv_9"], ["id", 9]]
  [1m[35m (0.5ms)[0m  CREATE SCHEMA "prv_9"
  [1m[36mSQL (0.3ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (91.3ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (42.3ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (95.1ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (50.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (39.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.7ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (57.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (32.7ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.8ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.8ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:05.818732"], ["updated_at", "2015-07-24 15:43:05.818732"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 9]]
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  Rendered circuits/index.html.erb within layouts/application (5.8ms)
  Rendered layouts/_header.html.erb (0.4ms)
  Rendered layouts/_sidebar.html.erb (0.7ms)
  Rendered layouts/_alerts.html.erb (0.1ms)
  Rendered layouts/_footer.html.erb (0.1ms)
Completed 200 OK in 13ms (Views: 8.4ms | ActiveRecord: 2.3ms)
  [1m[35mCircuit Load (0.6ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.4ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 9]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.2ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
--------------------------------------------------
CircuitsControllerTest: test_should_update_circuit
--------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "bb7494d955853125b1ae7e0cc4d6d016"]]
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$AjweEU6E6LpKNsGR3nViV.Ibsd9eTH4okLx1FO7eM9IvIzqyXiSQq"], ["created_at", "2015-07-24 15:43:05.862537"], ["updated_at", "2015-07-24 15:43:05.862537"], ["auth_token", "bb7494d955853125b1ae7e0cc4d6d016"]]
  [1m[36mSQL (0.6ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$AjweEU6E6LpKNsGR3nViV.Ibsd9eTH4okLx1FO7eM9IvIzqyXiSQq"], ["created_at", "2015-07-24 15:43:05.862537"], ["updated_at", "2015-07-24 15:43:05.862537"], ["auth_token", "bb7494d955853125b1ae7e0cc4d6d016"], ["id", 10], ["schema_name", "prv_10"], ["id", 10]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_10"
  [1m[36mSQL (0.2ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (71.0ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (49.0ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (45.2ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (85.0ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (39.6ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (59.3ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (43.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (39.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.3ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.3ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:06.358345"], ["updated_at", "2015-07-24 15:43:06.358345"]]
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Processing by CircuitsController#update as HTML
  Parameters: {"circuit"=>{"description"=>"Circuito de test", "type"=>"Demand"}, "id"=>"1"}
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."id" = $1  ORDER BY "public"."users"."id" ASC LIMIT 1[0m  [["id", 10]]
  [1m[35mCircuit Load (0.5ms)[0m  SELECT  "circuits".* FROM "circuits" WHERE "circuits"."id" = $1 LIMIT 1  [["id", 1]]
  [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Redirected to http://test.host/demands/1
Completed 302 Found in 10ms (ActiveRecord: 2.9ms)
  [1m[35mCircuit Load (0.5ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.4ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 1]]
  [1m[35mSQL (1.1ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.5ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.3ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.3ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 10]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.6ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------
ListingMesuresTest: test_return_list_of_all_measures_form_current_circuit
-------------------------------------------------------------------------
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e5049d1da4244b29fdec04c8399071aa"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$IPu2cGZKc4AKZpShGIGiku8IjFYLlTMQeAOnqKZ0NxWZwGCbdYiLO"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:43:06.405245"], ["updated_at", "2015-07-24 15:43:06.405245"], ["auth_token", "e5049d1da4244b29fdec04c8399071aa"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:06.414282"], ["updated_at", "2015-07-24 15:43:06.414282"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.8ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "91ce939e5356bb5526a1fb98b8f61866"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$pb4XYgMWEq4JXXXhIzR6EOC6BACGsA7HtWI5gRdZZM5Xyq2DsRGoK"], ["created_at", "2015-07-24 15:43:06.424673"], ["updated_at", "2015-07-24 15:43:06.424673"], ["auth_token", "91ce939e5356bb5526a1fb98b8f61866"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$pb4XYgMWEq4JXXXhIzR6EOC6BACGsA7HtWI5gRdZZM5Xyq2DsRGoK"], ["created_at", "2015-07-24 15:43:06.424673"], ["updated_at", "2015-07-24 15:43:06.424673"], ["auth_token", "91ce939e5356bb5526a1fb98b8f61866"], ["id", 12], ["schema_name", "prv_12"], ["id", 12]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_12"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (94.7ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (41.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (54.8ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (90.9ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (39.8ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (30.5ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (74.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (47.8ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.3ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.1ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.1ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/24/measures" for 127.0.0.1 at 2015-07-24 12:43:06 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"24"}
  [1m[36mUser Load (0.3ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "e5049d1da4244b29fdec04c8399071aa"]]
  [1m[35mMeasure Load (0.2ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 24]]
Completed 200 OK in 4ms (Views: 0.9ms | ActiveRecord: 1.0ms)
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.2ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.3ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 24]]
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.2ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 24]]
  [1m[35mSQL (0.8ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 24]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.4ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (21.6ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 11]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 12]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (2.1ms)[0m  [1mROLLBACK[0m
  [1m[35m (0.1ms)[0m  BEGIN
---------------------------------------------
ListingMesuresTest: test_valid_authentication
---------------------------------------------
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.3ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "592bab9cc74dd598ad9b08f7e0ebcc23"]]
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"[0m  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$5o82KG8haTF50S8RMLEiQuh1cx/M/yB.Dmbj29qf.HWTfYpXLLTA."], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:43:07.003349"], ["updated_at", "2015-07-24 15:43:07.003349"], ["auth_token", "592bab9cc74dd598ad9b08f7e0ebcc23"]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:07.009473"], ["updated_at", "2015-07-24 15:43:07.009473"]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "ee38593e93c5800e6b775f44f18cfd77"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$mzfklNkDrEdUs1ZbmSA9JePwyClQANBSAwFPdqeR99WNlGX7Y1DY6"], ["created_at", "2015-07-24 15:43:07.017652"], ["updated_at", "2015-07-24 15:43:07.017652"], ["auth_token", "ee38593e93c5800e6b775f44f18cfd77"]]
  [1m[36mSQL (0.7ms)[0m  [1mUPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$mzfklNkDrEdUs1ZbmSA9JePwyClQANBSAwFPdqeR99WNlGX7Y1DY6"], ["created_at", "2015-07-24 15:43:07.017652"], ["updated_at", "2015-07-24 15:43:07.017652"], ["auth_token", "ee38593e93c5800e6b775f44f18cfd77"], ["id", 14], ["schema_name", "prv_14"], ["id", 14]]
  [1m[35m (0.4ms)[0m  CREATE SCHEMA "prv_14"
  [1m[36mSQL (0.4ms)[0m  [1mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (104.2ms)[0m  CREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) 
  [1m[36m (41.5ms)[0m  [1mCREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) [0m
  [1m[35m (39.9ms)[0m  CREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")
  [1m[36m (75.2ms)[0m  [1mCREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) [0m
  [1m[35m (61.8ms)[0m  CREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")
  [1m[36m (42.2ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")[0m
  [1m[35m (2.8ms)[0m  ALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")

  [1m[36m (39.9ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL) [0m
  [1m[35m (40.6ms)[0m  CREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")
  [1m[36m (0.6ms)[0m  [1mSELECT version FROM "schema_migrations"[0m
  [1m[35m (0.6ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720183845')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150522130847')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150513183751')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720181315')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150511152613')
  [1m[36m (0.2ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612150456')[0m
  [1m[35m (0.3ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612152327')
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
Started GET "/circuits/25/measures" for 127.0.0.1 at 2015-07-24 12:43:07 -0300
Processing by API::MeasuresController#index as HTML
  Parameters: {"subdomain"=>"api", "circuit_id"=>"25"}
  [1m[35mUser Load (0.7ms)[0m  SELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "592bab9cc74dd598ad9b08f7e0ebcc23"]]
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 25]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 2.0ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.5ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 25]]
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.4ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 25]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 25]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.6ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.5ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 13]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 14]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.5ms)[0m  ROLLBACK
  [1m[36m (0.2ms)[0m  [1mBEGIN[0m
-------------------------------------------------------------------------------------
ListingMesuresTest: test_invalid_authentication_sets_WWWW-Authenticate_to_Application
-------------------------------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7a5f1eb092b3204fd8ff6215c99f006c"]]
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$EoW0q1rw7PN/APiNxZYhfeQbVBQvSq9NcknoBgolW0v9ww4hFi5re"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:43:07.547346"], ["updated_at", "2015-07-24 15:43:07.547346"], ["auth_token", "7a5f1eb092b3204fd8ff6215c99f006c"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:07.553603"], ["updated_at", "2015-07-24 15:43:07.553603"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.2ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.7ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.7ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "d2d845cc515ff8e91836e12c7f0bb64d"]]
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3f6l/czBw9wks3ZX2tjljuzp8lHlk3vrBN8n4K8uzboXvuCUto6qK"], ["created_at", "2015-07-24 15:43:07.562501"], ["updated_at", "2015-07-24 15:43:07.562501"], ["auth_token", "d2d845cc515ff8e91836e12c7f0bb64d"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$3f6l/czBw9wks3ZX2tjljuzp8lHlk3vrBN8n4K8uzboXvuCUto6qK"], ["created_at", "2015-07-24 15:43:07.562501"], ["updated_at", "2015-07-24 15:43:07.562501"], ["auth_token", "d2d845cc515ff8e91836e12c7f0bb64d"], ["id", 16], ["schema_name", "prv_16"], ["id", 16]]
  [1m[36m (0.5ms)[0m  [1mCREATE SCHEMA "prv_16"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (86.6ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (42.9ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (42.6ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (97.4ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.1ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (41.3ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (54.2ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (48.2ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.7ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.7ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.5ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.3ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.3ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/26/measures" for 127.0.0.1 at 2015-07-24 12:43:08 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"26"}
  [1m[36mUser Load (0.8ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "7a5f1eb092b3204fd8ff6215c99f006c\"fake"]]
  Rendered text template (0.0ms)
Filter chain halted as :authenticate rendered or redirected
Completed 401 Unauthorized in 16ms (Views: 13.9ms | ActiveRecord: 0.8ms)
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures"
  [1m[36mCircuit Load (0.4ms)[0m  [1mSELECT "circuits".* FROM "circuits"[0m
  [1m[35m (0.4ms)[0m  SELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 26]]
  [1m[36m (0.3ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 26]]
  [1m[36mSQL (1.2ms)[0m  [1mDELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1[0m  [["id", 26]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36mUser Load (0.5ms)[0m  [1mSELECT "public"."users".* FROM "public"."users"[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 2]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.2ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 15]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 16]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (3.3ms)[0m  ROLLBACK
  [1m[36m (0.1ms)[0m  [1mBEGIN[0m
---------------------------------------------------------------
ListingMesuresTest: test_valid_authentication_with_manual_token
---------------------------------------------------------------
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mUser Exists (0.5ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'fake@trile.cl' LIMIT 1[0m
  [1m[35mUser Exists (0.4ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('fake@trile.cl') LIMIT 1
  [1m[36mUser Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a82fe3599f41b9fc1640db5ea8bb3503"]]
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "public"."users" ("name", "email", "encrypted_password", "schema_name", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING "id"  [["name", "fake"], ["email", "fake@trile.cl"], ["encrypted_password", "$2a$04$13b43ytbhEIWmjmX.T2XzeaYQTEAVTgcA5Zrl62mLmKmHJBLzKAS2"], ["schema_name", "prv_1"], ["created_at", "2015-07-24 15:43:08.113218"], ["updated_at", "2015-07-24 15:43:08.113218"], ["auth_token", "a82fe3599f41b9fc1640db5ea8bb3503"]]
  [1m[36m (0.2ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "circuits" ("type", "description", "alarm_time", "created_at", "updated_at") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["type", "Demand"], ["description", "Circuito de test"], ["alarm_time", 5], ["created_at", "2015-07-24 15:43:08.119832"], ["updated_at", "2015-07-24 15:43:08.119832"]]
  [1m[35m (0.2ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mUser Exists (0.6ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."email" = 'faker@trile.cl' LIMIT 1
  [1m[36mUser Exists (0.6ms)[0m  [1mSELECT  1 AS one FROM "public"."users" WHERE LOWER("public"."users"."email") = LOWER('faker@trile.cl') LIMIT 1[0m
  [1m[35mUser Exists (0.5ms)[0m  SELECT  1 AS one FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1  [["auth_token", "9a9033d12f15f13df901ce7492122526"]]
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "public"."users" ("name", "email", "encrypted_password", "created_at", "updated_at", "auth_token") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$XCElrtyKrAZP53XCsdkL.OpSVZN6LO7PGlSiJsirvkkR6zybkn/GO"], ["created_at", "2015-07-24 15:43:08.127352"], ["updated_at", "2015-07-24 15:43:08.127352"], ["auth_token", "9a9033d12f15f13df901ce7492122526"]]
  [1m[35mSQL (0.7ms)[0m  UPDATE "public"."users" SET "name" = $1, "email" = $2, "encrypted_password" = $3, "created_at" = $4, "updated_at" = $5, "auth_token" = $6, "id" = $7, "schema_name" = $8 WHERE "public"."users"."id" = $9  [["name", "faker"], ["email", "faker@trile.cl"], ["encrypted_password", "$2a$04$XCElrtyKrAZP53XCsdkL.OpSVZN6LO7PGlSiJsirvkkR6zybkn/GO"], ["created_at", "2015-07-24 15:43:08.127352"], ["updated_at", "2015-07-24 15:43:08.127352"], ["auth_token", "9a9033d12f15f13df901ce7492122526"], ["id", 18], ["schema_name", "prv_18"], ["id", 18]]
  [1m[36m (0.4ms)[0m  [1mCREATE SCHEMA "prv_18"[0m
  [1m[35mSQL (0.3ms)[0m  CREATE EXTENSION IF NOT EXISTS "plpgsql"
  [1m[36m (94.8ms)[0m  [1mCREATE TABLE "circuits" ("id" serial primary key, "description" text, "type" character varying, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL, "alarm_time" integer) [0m
  [1m[35m (44.0ms)[0m  CREATE TABLE "measures" ("id" serial primary key, "circuit_id" integer, "watts" integer, "created_at" timestamp NOT NULL, "updated_at" timestamp NOT NULL) 
  [1m[36m (40.1ms)[0m  [1mCREATE  INDEX  "index_measures_on_circuit_id" ON "measures" USING btree ("circuit_id")[0m
  [1m[35m (108.2ms)[0m  CREATE TABLE "users" ("id" serial primary key, "name" character varying DEFAULT '' NOT NULL, "email" character varying NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "auth_token" text, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp, "sign_in_count" integer DEFAULT 0 NOT NULL, "current_sign_in_at" timestamp, "last_sign_in_at" timestamp, "current_sign_in_ip" inet, "last_sign_in_ip" inet, "created_at" timestamp, "updated_at" timestamp, "schema_name" character varying) 
  [1m[36m (40.0ms)[0m  [1mCREATE UNIQUE INDEX  "index_users_on_email" ON "users" USING btree ("email")[0m
  [1m[35m (40.4ms)[0m  CREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users" USING btree ("reset_password_token")
  [1m[36m (2.8ms)[0m  [1mALTER TABLE "measures" ADD CONSTRAINT "fk_rails_0d9a1dd04c"
FOREIGN KEY ("circuit_id")
  REFERENCES "circuits" ("id")
[0m
  [1m[35m (61.6ms)[0m  CREATE TABLE "schema_migrations" ("version" character varying NOT NULL) 
  [1m[36m (41.6ms)[0m  [1mCREATE UNIQUE INDEX  "unique_schema_migrations" ON "schema_migrations"  ("version")[0m
  [1m[35m (0.8ms)[0m  SELECT version FROM "schema_migrations"
  [1m[36m (0.8ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150720183845')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150522130847')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150513183751')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150720181315')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150511152613')[0m
  [1m[35m (0.4ms)[0m  INSERT INTO "schema_migrations" (version) VALUES ('20150612150456')
  [1m[36m (0.4ms)[0m  [1mINSERT INTO "schema_migrations" (version) VALUES ('20150612152327')[0m
  [1m[35m (0.4ms)[0m  RELEASE SAVEPOINT active_record_1
Started GET "/circuits/27/measures" for 127.0.0.1 at 2015-07-24 12:43:08 -0300
Processing by API::MeasuresController#index as JSON
  Parameters: {"subdomain"=>"api", "circuit_id"=>"27"}
  [1m[36mUser Load (0.7ms)[0m  [1mSELECT  "public"."users".* FROM "public"."users" WHERE "public"."users"."auth_token" = $1 LIMIT 1[0m  [["auth_token", "a82fe3599f41b9fc1640db5ea8bb3503"]]
  [1m[35mMeasure Load (0.5ms)[0m  SELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1  [["circuit_id", 27]]
Completed 200 OK in 5ms (Views: 0.8ms | ActiveRecord: 2.0ms)
  [1m[36mMeasure Load (0.5ms)[0m  [1mSELECT "measures".* FROM "measures"[0m
  [1m[35mCircuit Load (0.4ms)[0m  SELECT "circuits".* FROM "circuits"
  [1m[36m (0.6ms)[0m  [1mSELECT COUNT(*) FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 27]]
  [1m[35m (0.2ms)[0m  SAVEPOINT active_record_1
  [1m[36mMeasure Load (0.3ms)[0m  [1mSELECT "measures".* FROM "measures" WHERE "measures"."circuit_id" = $1[0m  [["circuit_id", 27]]
  [1m[35mSQL (1.2ms)[0m  DELETE FROM "circuits" WHERE "circuits"."type" IN ('Demand') AND "circuits"."id" = $1  [["id", 27]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35mUser Load (0.3ms)[0m  SELECT "public"."users".* FROM "public"."users"
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.2ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 2]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (0.1ms)[0m  [1mSAVEPOINT active_record_1[0m
  [1m[35mSQL (0.1ms)[0m  DELETE FROM "public"."users" WHERE "public"."users"."id" = $1  [["id", 17]]
  [1m[36m (0.1ms)[0m  [1mRELEASE SAVEPOINT active_record_1[0m
  [1m[35m (0.1ms)[0m  SAVEPOINT active_record_1
  [1m[36mSQL (0.1ms)[0m  [1mDELETE FROM "public"."users" WHERE "public"."users"."id" = $1[0m  [["id", 18]]
  [1m[35m (0.1ms)[0m  RELEASE SAVEPOINT active_record_1
  [1m[36m (1.4ms)[0m  [1mROLLBACK[0m
